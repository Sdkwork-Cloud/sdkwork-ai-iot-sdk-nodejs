import{_ as e}from"./sdkwork-popup-DS-7-Y-L.js";import{aE as a,l,I as t,B as o,s,a as i,h as n,_ as u}from"./index-mGUiS-yG.js";/* empty css              *//* empty css              *//* empty css              */import{a as r,_ as c}from"./sdkwork-cell-group-VR2jHUXV.js";import{I as d}from"./index-wXuWqSXL.js";import{k as m,a as v,r as p,f,w as h,o as b,P as k,Q as g,j as C,Z as _,W as w,S as y,a0 as V,$ as j,a4 as B}from"./vue-vendor-B1RsE4Tz.js";import{F as x}from"./index-rMTr1bor.js";import{F as U}from"./index-BkonbJXR.js";const D={class:"sdkwork-user-profile"},S={key:1,class:"avatar-placeholder"},I={class:"user-info"},M={class:"user-name"},$={class:"user-id"},q={class:"action-buttons"},z={class:"button-group"},E={class:"button-group"},F={style:{margin:"16px"}},N=u(m({__name:"sdkwork-user-profile",props:{userData:{},editable:{type:Boolean,default:!0},showStats:{type:Boolean,default:!0}},emits:["update:user","basic-info-change","settings-change","logout"],setup(u,{emit:m}){const N=u,T=m,A=v(!1),O=p({name:"",phone:"",email:"",location:"",bio:""});a();const{themeMode:P}=l(),Q=f(()=>P.value);h(Q,e=>{W(e)}),b(()=>{W(Q.value)});const W=e=>{const a=document.querySelector(".sdkwork-user-profile");a&&a.setAttribute("data-theme",e)},Z=f(()=>N.userData?.profile||{id:"",name:"",phone:"",email:"",location:"",bio:"",avatar:""}),G=f(()=>N.userData?.stats||{}),H=f(()=>N.userData?.settings||{language:"zh-CN",notifications:{enabled:!0}}),J=e=>{const a=new Date(e),l=(new Date).getTime()-a.getTime(),t=Math.floor(l/6e4),o=Math.floor(t/60),s=Math.floor(o/24);return s>0?`${s}天前`:o>0?`${o}小时前`:t>0?`${t}分钟前`:"刚刚"},K=()=>{N.editable&&s("头像编辑功能开发中")},L=()=>{N.editable&&(Object.assign(O,Z.value),A.value=!0)},R=()=>{N.editable&&i({title:"修改手机号",message:"请输入新的手机号码",showCancelButton:!0,beforeClose:e=>{"confirm"===e&&s("手机号修改成功")}})},X=()=>{N.editable&&i({title:"修改邮箱",message:"请输入新的邮箱地址",showCancelButton:!0,beforeClose:e=>{"confirm"===e&&s("邮箱修改成功")}})},Y=()=>{N.editable&&i({title:"修改位置",message:"请输入新的位置信息",showCancelButton:!0,beforeClose:e=>{"confirm"===e&&s("位置修改成功")}})},ee=()=>{i({title:"通知设置",message:"通知设置功能开发中",showCancelButton:!1})},ae=()=>{i({title:"隐私设置",message:"隐私设置功能开发中",showCancelButton:!1})},le=()=>{i({title:"语言设置",message:"语言设置功能开发中",showCancelButton:!1})},te=()=>{T("basic-info-change",{...O}),A.value=!1,s("个人信息更新成功")},oe=()=>{T("basic-info-change",{...Z.value}),s("修改已保存")},se=async e=>{i({title:"退出登录",message:"确定要退出登录吗？",showCancelButton:!0,confirmButtonColor:"#ee0a24",beforeClose:async a=>{if("confirm"===a)try{const a=n();return await a.logout(e),T("logout"),s("已退出登录"),!0}catch(l){return console.error("退出登录失败:",l),s("退出登录失败，请重试"),!1}return!0}})};return(a,l)=>{const s=d,i=t,n=r,m=c,v=o,p=U,f=x,h=e;return g(),k("div",D,[C(m,{class:"user-card"},{default:V(()=>[C(n,{center:""},{icon:V(()=>{return[y("div",{class:"avatar-container",onClick:K},[Z.value?.avatar?(g(),_(s,{key:0,src:Z.value.avatar,width:"60",height:"60",round:"",fit:"cover"},null,8,["src"])):(g(),k("div",S,j((e=Z.value?.name||"用户",e.slice(0,2).toUpperCase())),1))])];var e}),title:V(()=>[y("div",I,[y("div",M,j(Z.value?.name||"未设置用户名"),1),y("div",$,"ID: "+j(Z.value?.id||"未设置"),1)])]),"right-icon":V(()=>[C(i,{name:"edit",onClick:L})]),_:1}),Z.value?.bio?(g(),_(n,{key:0,title:Z.value.bio,label:"个人简介"},null,8,["title"])):w("",!0)]),_:1}),C(m,{title:"基本信息"},{default:V(()=>[C(n,{title:"手机号",value:Z.value?.phone||"未设置","is-link":"",onClick:R},null,8,["value"]),C(n,{title:"邮箱",value:Z.value?.email||"未设置","is-link":"",onClick:X},null,8,["value"]),C(n,{title:"位置",value:Z.value?.location||"未设置","is-link":"",onClick:Y},null,8,["value"])]),_:1}),C(m,{title:"设置"},{default:V(()=>{return[C(n,{title:"通知设置","is-link":"",onClick:ee}),C(n,{title:"隐私设置","is-link":"",onClick:ae}),C(n,{title:"语言设置",value:(e=H.value.language,{"zh-CN":"简体中文","en-US":"English"}[e]||e),"is-link":"",onClick:le},null,8,["value"])];var e}),_:1}),u.showStats?(g(),_(m,{key:0,title:"统计信息"},{default:V(()=>[C(n,{title:"对话数量",value:G.value.total_conversations||0},null,8,["value"]),C(n,{title:"消息数量",value:G.value.total_messages||0},null,8,["value"]),C(n,{title:"设备数量",value:G.value.total_devices||0},null,8,["value"]),C(n,{title:"智能体数量",value:G.value.total_agents||0},null,8,["value"]),G.value.last_active?(g(),_(n,{key:0,title:"最后活跃",value:J(G.value.last_active)},null,8,["value"])):w("",!0)]),_:1})):w("",!0),y("div",q,[y("div",z,[C(v,{round:"",block:"",type:"primary",onClick:oe,class:"save-btn"},{default:V(()=>[...l[6]||(l[6]=[B("保存修改",-1)])]),_:1})]),y("div",E,[C(v,{round:"",block:"",type:"default",onClick:se,class:"logout-btn"},{default:V(()=>[...l[7]||(l[7]=[B("退出登录",-1)])]),_:1})])]),C(h,{show:A.value,"onUpdate:show":l[5]||(l[5]=e=>A.value=e),position:"bottom",round:""},{default:V(()=>[C(f,{onSubmit:te},{default:V(()=>[C(m,null,{default:V(()=>[C(p,{modelValue:O.name,"onUpdate:modelValue":l[0]||(l[0]=e=>O.name=e),label:"姓名",placeholder:"请输入姓名"},null,8,["modelValue"]),C(p,{modelValue:O.phone,"onUpdate:modelValue":l[1]||(l[1]=e=>O.phone=e),label:"手机号",placeholder:"请输入手机号",type:"tel"},null,8,["modelValue"]),C(p,{modelValue:O.email,"onUpdate:modelValue":l[2]||(l[2]=e=>O.email=e),label:"邮箱",placeholder:"请输入邮箱",type:"email"},null,8,["modelValue"]),C(p,{modelValue:O.location,"onUpdate:modelValue":l[3]||(l[3]=e=>O.location=e),label:"位置",placeholder:"请输入位置"},null,8,["modelValue"]),C(p,{modelValue:O.bio,"onUpdate:modelValue":l[4]||(l[4]=e=>O.bio=e),label:"个人简介",placeholder:"请输入个人简介",type:"textarea",rows:"2"},null,8,["modelValue"])]),_:1}),y("div",F,[C(v,{round:"",block:"",type:"primary","native-type":"submit"},{default:V(()=>[...l[8]||(l[8]=[B("保存",-1)])]),_:1})])]),_:1})]),_:1},8,["show"])])}}}),[["__scopeId","data-v-cf486558"]]);export{N as _};
