import{S as e}from"./sdkwork-page-container-5d58390b.js";import{k as a,O as i,c as t,Q as l,R as s,S as o,j as n,u as r,U as d,$ as u,F as c,Y as m,Z as p,a0 as v,a4 as f,X as g,r as h,V as k,W as y,w as b,a1 as w,b as C,a3 as _}from"./vue-vendor-a2672387.js";import{v as x,a as j,_ as M,s as z,c as B,B as S,I,aT as D,P as F}from"./index-5affcab4.js";/* empty css              *//* empty css              */import{T as L}from"./index-7bca35b2.js";/* empty css              */import{E as $}from"./index-ccee2c65.js";import{S as U}from"./sdkwork-api-list-2f474514.js";import{s as P}from"./function-call-e02e5da4.js";/* empty css              *//* empty css              */import{F as V}from"./index-dee6a080.js";import{D as T,a as A}from"./index-89208972.js";import{S as R}from"./index-6f177f7f.js";import{T as G,a as N}from"./index-a1493906.js";import"./utils-vendor-b5712723.js";import"./use-id-82312033.js";import"./index-e159e7ef.js";import"./index-56f0d1d3.js";import"./use-tab-status-aca7131d.js";import"./shared-1cf0c357.js";import"./sdkwork-search-bar-4d747e22.js";import"./sdkwork-icon-2d6efb98.js";import"./ListItem-783a2127.js";import"./ImagePreview-084463df.js";import"./index-63936d32.js";import"./index-4fcf5799.js";import"./index-44056be1.js";import"./use-refs-ac90b301.js";const O={class:"header-background"},E=["src","alt"],J={class:"nav-back"},K={class:"group-info"},W=["src","alt"],H={key:0,class:"official-badge"},Z={key:1,class:"verified-badge"},q={class:"group-basic-info"},Q={class:"group-name"},X={class:"group-tags"},Y={key:0,class:"more-tags"},ee={class:"stats-info"},ae={class:"stat-item"},ie={class:"stat-value"},te={class:"stat-item"},le={class:"stat-value"},se={key:0,class:"stat-divider"},oe={key:1,class:"stat-item"},ne={class:"stat-value"},re=M(a({__name:"GroupHeader",props:{group:{}},emits:["back"],setup(e,{emit:a}){const h=e,k=a,y=i(),{currentTheme:b}=x(),w=t(()=>`theme-${b.value}`),C=()=>{console.log("背景图片加载失败")},_=()=>{console.log("头像加载失败")},M=()=>{k("back")},z=()=>{h.group?.id&&y.push(`/group/profile/${h.group.id}`)},B=e=>e>=1e4?(e/1e4).toFixed(1)+"w":e>=1e3?(e/1e3).toFixed(1)+"k":e.toString();return(a,i)=>{const t=L;return l(),s("div",{class:g(["group-header",w.value])},[o("div",O,[o("img",{src:e.group?.coverImage||e.group?.avatar||"https://picsum.photos/seed/default-cover/800/300.jpg",alt:e.group?.name,class:"background-image",onError:C},null,40,E),i[0]||(i[0]=o("div",{class:"background-overlay"},null,-1))]),o("div",J,[n(r(j),{icon:"tabler:arrow-left",size:"24",onClick:M})]),o("div",K,[o("div",{class:"group-avatar",onClick:z},[o("img",{src:e.group?.avatar||"https://picsum.photos/seed/default-avatar/200/200.jpg",alt:e.group?.name,class:"avatar-image",onError:_},null,40,W),e.group?.isOfficial?(l(),s("div",H,"官方")):d("",!0),e.group?.isVerified?(l(),s("div",Z,[n(r(j),{icon:"tabler:circle-check"})])):d("",!0)]),o("div",q,[o("h1",Q,u(e.group?.name),1),o("div",X,[(l(!0),s(c,null,m(e.group?.tags?.slice(0,3),e=>(l(),p(t,{key:e,type:"primary",plain:"",class:"group-tag"},{default:v(()=>[f(u(e),1)]),_:2},1024))),128)),e.group?.tags&&e.group.tags.length>3?(l(),s("span",Y," +"+u(e.group.tags.length-3),1)):d("",!0)]),o("div",ee,[o("div",ae,[o("span",ie,u(B(e.group?.memberCount||0)),1),i[1]||(i[1]=o("span",{class:"stat-label"},"成员",-1))]),i[4]||(i[4]=o("div",{class:"stat-divider"},null,-1)),o("div",te,[o("span",le,u(B(e.group?.messageCount||0)),1),i[2]||(i[2]=o("span",{class:"stat-label"},"消息",-1))]),e.group?.maxMembers?(l(),s("div",se)):d("",!0),e.group?.maxMembers?(l(),s("div",oe,[o("span",ne,u(e.group.maxMembers),1),i[3]||(i[3]=o("span",{class:"stat-label"},"上限",-1))])):d("",!0)])])])],2)}}}),[["__scopeId","data-v-2513cc7a"]]),de={class:"bottom-container"},ue=M(a({__name:"GroupBottom",props:{group:{},joining:{type:Boolean,default:!1}},emits:["back","join","enter","publish-feed"],setup(e,{emit:a}){const i=e,u=a,{currentTheme:c}=x(),m=t(()=>`theme-${c.value}`),f=()=>{u("back")},h=()=>{i.group.isJoined?z("您已加入该群组"):i.group.price>0?B({title:"付费入群",message:`加入"${i.group.name}"需要支付 ¥${i.group.price}，是否确认？`}).then(()=>{z("支付成功，已加入群组"),u("join",i.group)}).catch(()=>{}):(z("已加入群组"),u("join",i.group))},k=()=>{u("enter",i.group)},y=()=>{u("publish-feed")};return(a,i)=>{const t=S;return l(),s("div",{class:g(["group-bottom",m.value])},[o("div",de,[n(t,{type:"default",size:"large",round:"",onClick:f,class:"back-button icon-only"},{default:v(()=>[n(r(j),{icon:"ri:arrow-left-line",width:"16",height:"16"})]),_:1}),e.group?.isJoined?(l(),p(t,{key:0,type:"primary",size:"large",round:"",onClick:y,class:"publish-button icon-only"},{default:v(()=>[n(r(j),{icon:"ri:edit-line",width:"16",height:"16"})]),_:1})):d("",!0),e.group?.isJoined?(l(),p(t,{key:2,type:"primary",size:"large",round:"",onClick:k,class:"enter-button icon-only"},{default:v(()=>[n(r(j),{icon:"ri:chat-3-line",width:"16",height:"16"})]),_:1})):(l(),p(t,{key:1,type:"primary",size:"large",round:"",loading:e.joining,onClick:h,class:"join-button icon-only"},{default:v(()=>[n(r(j),{icon:"ri:add-line",width:"16",height:"16"})]),_:1},8,["loading"]))])],2)}}}),[["__scopeId","data-v-2b91a31f"]]),ce={key:0,class:"feed-images"},me={class:"image-grid"},pe=["src","alt","onClick"],ve={key:0,class:"more-images"},fe=M(a({__name:"FeedImageContent",props:{images:{},displayLimit:{default:3}},emits:["imagePreview"],setup(e,{emit:a}){const i=e,n=a,r=t(()=>i.images.slice(0,i.displayLimit));return(a,t)=>e.images&&e.images.length?(l(),s("div",ce,[o("div",me,[(l(!0),s(c,null,m(r.value,(e,a)=>(l(),s("img",{key:a,src:e,alt:`图片${a+1}`,class:"feed-image",onClick:e=>{return t=a,n("imagePreview",i.images,t),void P({images:i.images,startPosition:t});var t}},null,8,pe))),128)),e.images.length>e.displayLimit?(l(),s("div",ve,[o("span",null,"+"+u(e.images.length-e.displayLimit),1)])):d("",!0)])])):d("",!0)}}),[["__scopeId","data-v-0255f5e7"]]),ge={key:0,class:"feed-video"},he={class:"video-container"},ke=["src","poster"],ye={class:"play-button"},be={key:1,class:"video-info"},we={key:0,class:"video-title"},Ce={key:1,class:"video-duration"},_e=M(a({__name:"FeedVideoContent",props:{videoUrl:{},thumbnail:{default:""},title:{default:""},duration:{default:0}},emits:["play","pause"],setup(e,{emit:a}){const i=h(!1),t=a,c=()=>{const e=document.querySelector(".video-player");e&&(e.paused?(e.play(),i.value=!0,t("play")):(e.pause(),i.value=!1,t("pause")))},m=e=>{if(!e||e<=0)return"";return`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`};return(a,t)=>e.videoUrl?(l(),s("div",ge,[o("div",he,[o("video",{src:e.videoUrl,poster:e.thumbnail,controls:"",class:"video-player",preload:"metadata"},null,8,ke),i.value?d("",!0):(l(),s("div",{key:0,class:"video-overlay",onClick:c},[o("div",ye,[n(r(j),{icon:"ri:play-fill",width:"36",height:"36"})])])),e.title||e.duration?(l(),s("div",be,[e.title?(l(),s("div",we,u(e.title),1)):d("",!0),e.duration?(l(),s("div",Ce,u(m(e.duration)),1)):d("",!0)])):d("",!0)])])):d("",!0)}}),[["__scopeId","data-v-081d0ad7"]]),xe={key:0,class:"feed-audio"},je={class:"audio-player"},Me={class:"audio-info"},ze={class:"audio-icon"},Be={class:"audio-details"},Se={class:"audio-title"},Ie={class:"audio-meta"},De={key:0,class:"duration"},Fe={key:1,class:"size"},Le={class:"audio-controls"},$e={class:"progress-container"},Ue={class:"progress-bar"},Pe={class:"time-display"},Ve=["src"],Te=M(a({__name:"FeedAudioContent",props:{audioUrl:{},title:{default:""},duration:{default:0},fileSize:{default:0}},emits:["play","pause"],setup(e,{emit:a}){const i=e,c=a,m=h(),p=h(!1),v=h(0),f=h(0),g=t(()=>f.value?v.value/f.value*100:0),y=()=>{m.value&&(p.value?(m.value.pause(),p.value=!1,c("pause")):(m.value.play(),p.value=!0,c("play")))},b=()=>{m.value&&(v.value=m.value.currentTime)},w=()=>{m.value&&(f.value=m.value.duration||i.duration||0)},C=()=>{p.value=!1,v.value=0},_=e=>{if(!e||e<=0)return"";return`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`},x=e=>{if(!e||e<=0)return"0:00";return`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`},M=e=>{if(0===e)return"0 B";const a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["B","KB","MB","GB"][a]};return(a,i)=>e.audioUrl?(l(),s("div",xe,[o("div",je,[o("div",Me,[o("div",ze,[n(r(j),{icon:"ri:music-2-line",width:"24",height:"24"})]),o("div",Be,[o("div",Se,u(e.title||"语音消息"),1),o("div",Ie,[e.duration?(l(),s("span",De,u(_(e.duration)),1)):d("",!0),e.fileSize?(l(),s("span",Fe,u(M(e.fileSize)),1)):d("",!0)])])]),o("div",Le,[o("button",{class:"play-button",onClick:y},[n(r(j),{icon:p.value?"ri:pause-fill":"ri:play-fill",width:"20",height:"20"},null,8,["icon"])]),o("div",$e,[o("div",Ue,[o("div",{class:"progress",style:k({width:g.value+"%"})},null,4)]),o("div",Pe,[o("span",null,u(x(v.value))+" / "+u(x(e.duration||0)),1)])])])]),o("audio",{ref_key:"audioRef",ref:m,src:e.audioUrl,onTimeupdate:b,onLoadedmetadata:w,onEnded:C,preload:"metadata"},null,40,Ve)])):d("",!0)}}),[["__scopeId","data-v-f302c791"]]),Ae={class:"link-preview"},Re={class:"link-content"},Ge={class:"link-info"},Ne={class:"link-title"},Oe={key:0,class:"link-description"},Ee={class:"link-url"},Je={key:0,class:"link-image"},Ke=["src","alt"],We={key:1,class:"link-icon"},He=M(a({__name:"FeedLinkContent",props:{linkUrl:{},title:{default:""},description:{default:""},image:{default:""}},emits:["linkClick"],setup(e,{emit:a}){const i=e,t=a,c=()=>{t("linkClick",i.linkUrl)},m=e=>{try{return new URL(e).hostname}catch(a){return e}};return(a,i)=>e.linkUrl?(l(),s("div",{key:0,class:"feed-link",onClick:c},[o("div",Ae,[o("div",Re,[o("div",Ge,[o("div",Ne,u(e.title||m(e.linkUrl)),1),e.description?(l(),s("div",Oe,u(e.description),1)):d("",!0),o("div",Ee,u(e.linkUrl),1)]),e.image?(l(),s("div",Je,[o("img",{src:e.image,alt:e.title||"链接预览图"},null,8,Ke)])):(l(),s("div",We,[n(r(j),{icon:"ri:external-link-line",width:"24",height:"24"})]))])])])):d("",!0)}}),[["__scopeId","data-v-bc81ede3"]]),Ze={key:0,class:"feed-files"},qe=["onClick"],Qe={class:"file-icon"},Xe={class:"file-info"},Ye={class:"file-name"},ea={class:"file-meta"},aa={class:"file-size"},ia={key:0,class:"file-type"},ta={class:"file-action"},la=M(a({__name:"FeedFileContent",props:{files:{}},emits:["fileClick"],setup(e,{emit:a}){const i=a,t=e=>{const a=e.split(".").pop()?.toLowerCase();return{pdf:"ri:file-pdf-line",doc:"ri:file-word-line",docx:"ri:file-word-line",xls:"ri:file-excel-line",xlsx:"ri:file-excel-line",ppt:"ri:file-ppt-line",pptx:"ri:file-ppt-line",txt:"ri:file-text-line",md:"ri:file-markdown-line",jpg:"ri:image-line",jpeg:"ri:image-line",png:"ri:image-line",gif:"ri:image-line",svg:"ri:image-line",webp:"ri:image-line",mp3:"ri:music-2-line",wav:"ri:music-2-line",flac:"ri:music-2-line",aac:"ri:music-2-line",mp4:"ri:video-line",avi:"ri:video-line",mov:"ri:video-line",mkv:"ri:video-line",webm:"ri:video-line",zip:"ri:file-zip-line",rar:"ri:file-zip-line","7z":"ri:file-zip-line",tar:"ri:file-zip-line",gz:"ri:file-zip-line",js:"ri:code-s-slash-line",ts:"ri:code-s-slash-line",html:"ri:code-box-line",css:"ri:code-box-line",vue:"ri:vuejs-line",react:"ri:reactjs-line",exe:"ri:settings-3-line",dmg:"ri:apple-line",iso:"ri:cd-line"}[a||""]||"ri:file-line"},p=e=>{if(0===e)return"0 B";const a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["B","KB","MB","GB","TB"][a]};return(a,v)=>e.files&&e.files.length?(l(),s("div",Ze,[(l(!0),s(c,null,m(e.files,(e,a)=>{return l(),s("div",{key:a,class:"file-item",onClick:a=>(e=>{i("fileClick",e)})(e)},[o("div",Qe,[n(r(j),{icon:t(e.name),width:"24",height:"24"},null,8,["icon"])]),o("div",Xe,[o("div",Ye,u(e.name),1),o("div",ea,[o("span",aa,u(p(e.size)),1),e.type?(l(),s("span",ia,u((c=e.type,{"image/jpeg":"JPEG图片","image/png":"PNG图片","image/gif":"GIF图片","image/svg+xml":"SVG图片","image/webp":"WebP图片","application/pdf":"PDF文档","application/msword":"Word文档","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"Word文档","application/vnd.ms-excel":"Excel表格","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"Excel表格","application/vnd.ms-powerpoint":"PPT演示文稿","application/vnd.openxmlformats-officedocument.presentationml.presentation":"PPT演示文稿","text/plain":"文本文件","audio/mpeg":"MP3音频","audio/wav":"WAV音频","audio/flac":"FLAC音频","video/mp4":"MP4视频","video/avi":"AVI视频","video/quicktime":"MOV视频","video/x-msvideo":"AVI视频","video/webm":"WebM视频","application/zip":"ZIP压缩包","application/x-rar-compressed":"RAR压缩包","application/x-7z-compressed":"7Z压缩包"}[c]||c.split("/")[1]?.toUpperCase()||"未知类型")),1)):d("",!0)])]),o("div",ta,[n(r(j),{icon:"ri:download-line",width:"18",height:"18"})])],8,qe);var c}),128))])):d("",!0)}}),[["__scopeId","data-v-5fdb0740"]]),sa={class:"feed-user"},oa=["src","alt"],na={class:"user-info"},ra={class:"feed-time"},da={key:0,class:"pin-badge"},ua={class:"feed-content"},ca={class:"feed-text"},ma={class:"feed-actions"},pa={class:"action-count"},va={class:"action-count"},fa=M(a({__name:"sdkwork-feeds-item",props:{feed:{}},emits:["like","comment","share","user-click"],setup(e,{emit:a}){const i=e,r=a,{currentTheme:c}=x(),m=t(()=>`theme-${c.value}`),v=()=>{r("like",i.feed)},f=()=>{r("comment",i.feed)},h=()=>{r("share",i.feed)},k=()=>{r("user-click",i.feed)},y=e=>{const a=new Date(e),i=(new Date).getTime()-a.getTime();return i<6e4?"刚刚":i<36e5?`${Math.floor(i/6e4)}分钟前`:i<864e5?`${Math.floor(i/36e5)}小时前`:i<6048e5?`${Math.floor(i/864e5)}天前`:a.toLocaleDateString()},b=e=>e>=1e4?(e/1e4).toFixed(1)+"w":e>=1e3?(e/1e3).toFixed(1)+"k":e.toString();return(a,i)=>{const t=I;return l(),s("div",{class:g(["sdkwork-feeds-item",m.value])},[o("div",sa,[o("img",{src:e.feed.userAvatar||"https://picsum.photos/seed/default-avatar/200/200.jpg",alt:e.feed.userName,class:"user-avatar",onClick:k},null,8,oa),o("div",na,[o("div",{class:"user-name",onClick:k},u(e.feed.userName),1),o("div",ra,u(y(e.feed.createdAt)),1)]),e.feed.isPinned?(l(),s("div",da,[n(t,{name:"thumb-circle-o",size:"14"}),i[0]||(i[0]=o("span",null,"置顶",-1))])):d("",!0)]),o("div",ua,[o("div",ca,u(e.feed.content),1),"image"===e.feed.type&&e.feed.images?(l(),p(fe,{key:0,images:e.feed.images},null,8,["images"])):d("",!0),"video"===e.feed.type&&e.feed.video?(l(),p(_e,{key:1,"video-url":e.feed.video.url,thumbnail:e.feed.video.thumbnail,title:e.feed.video.title,duration:e.feed.video.duration},null,8,["video-url","thumbnail","title","duration"])):d("",!0),"audio"===e.feed.type&&e.feed.audio?(l(),p(Te,{key:2,"audio-url":e.feed.audio.url,title:e.feed.audio.title,duration:e.feed.audio.duration,"file-size":e.feed.audio.fileSize},null,8,["audio-url","title","duration","file-size"])):d("",!0),"link"===e.feed.type&&e.feed.link?(l(),p(He,{key:3,"link-url":e.feed.link.url,title:e.feed.link.title,description:e.feed.link.description,image:e.feed.link.image},null,8,["link-url","title","description","image"])):d("",!0),"file"===e.feed.type&&e.feed.files?(l(),p(la,{key:4,files:e.feed.files},null,8,["files"])):d("",!0)]),o("div",ma,[o("div",{class:g(["action-item",{liked:e.feed.isLiked}]),onClick:v},[n(t,{name:e.feed.isLiked?"good-job":"good-job-o",size:"16"},null,8,["name"]),o("span",pa,u(b(e.feed.likeCount||0)),1)],2),o("div",{class:"action-item",onClick:f},[n(t,{name:"chat-o",size:"16"}),o("span",va,u(b(e.feed.commentCount||0)),1)]),o("div",{class:"action-item",onClick:h},[n(t,{name:"share-o",size:"16"}),i[1]||(i[1]=o("span",{class:"action-count"},"分享",-1))])])],2)}}}),[["__scopeId","data-v-adda085b"]]),ga={class:"sdkwork-feeds-list"},ha={class:"empty-state"},ka={key:0,class:"feeds-header"},ya={class:"header-title"},ba={class:"header-actions"},wa=M(a({__name:"sdkwork-feeds-list",props:{api:{},service:{},params:{default:()=>({})},pageableParams:{default:()=>({})},selectable:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},pageSize:{default:10},itemKey:{default:"id"},itemTitleField:{default:"content"},itemDescriptionField:{default:""},themeMode:{default:"auto"},showBorderBottom:{type:Boolean,default:!0},borderBottomLeftOffset:{default:16},showNoMoreData:{type:Boolean,default:!0},topSpacing:{default:0},leftSpacing:{default:0},rightSpacing:{default:0},showHeader:{type:Boolean,default:!0},title:{default:"动态列表"},customItem:{type:Boolean,default:!1}},emits:["select","delete","refresh","loadMore","search","itemClick","error","like","comment","share","userClick","post"],setup(e,{emit:a}){const i=a,t=e=>{i("select",e)},c=e=>{i("delete",e)},m=()=>{i("refresh")},f=()=>{i("loadMore")},g=e=>{i("search",e)},h=e=>{i("itemClick",e)},k=e=>{i("error",e)},b=()=>{i("post")};return(a,w)=>(l(),s("div",ga,[n(U,{api:e.api,service:e.service,params:e.params,"pageable-params":e.pageableParams,selectable:e.selectable,deletable:e.deletable,searchable:e.searchable,"page-size":e.pageSize,"item-key":e.itemKey,"item-title-field":e.itemTitleField,"item-description-field":e.itemDescriptionField,"theme-mode":e.themeMode,"show-border-bottom":e.showBorderBottom,"border-bottom-left-offset":e.borderBottomLeftOffset,"show-no-more-data":e.showNoMoreData,"top-spacing":e.topSpacing,"left-spacing":e.leftSpacing,"right-spacing":e.rightSpacing,onSelect:t,onDelete:c,onRefresh:m,onLoadMore:f,onSearch:g,onItemClick:h,onError:k},{default:v(({item:t,index:s,selected:o})=>[e.customItem?y(a.$slots,"item",{key:1,item:t,index:s,selected:o},void 0,!0):(l(),p(fa,{key:0,feed:t,selected:o,onLike:e=>(e=>{i("like",e)})(t),onComment:e=>(e=>{i("comment",e)})(t),onShare:e=>(e=>{i("share",e)})(t),onUserClick:e=>(e=>{i("userClick",e)})(t)},null,8,["feed","selected","onLike","onComment","onShare","onUserClick"]))]),empty:v(()=>[y(a.$slots,"empty",{},()=>[o("div",ha,[n(r(j),{icon:"ri:article-line",width:"48",height:"48"}),w[0]||(w[0]=o("div",{class:"empty-text"},"暂无动态",-1)),w[1]||(w[1]=o("div",{class:"empty-description"},"还没有任何动态，快去发布第一条吧！",-1))])],!0)]),header:v(()=>[y(a.$slots,"header",{},()=>[e.showHeader?(l(),s("div",ka,[o("div",ya,u(e.title),1),o("div",ba,[o("button",{class:"post-button",onClick:b},[n(r(j),{icon:"ri:add-line",width:"18",height:"18"}),w[2]||(w[2]=o("span",null,"发布动态",-1))])])])):d("",!0)],!0)]),footer:v(()=>[y(a.$slots,"footer",{},void 0,!0)]),_:3},8,["api","service","params","pageable-params","selectable","deletable","searchable","page-size","item-key","item-title-field","item-description-field","theme-mode","show-border-bottom","border-bottom-left-offset","show-no-more-data","top-spacing","left-spacing","right-spacing"])]))}}),[["__scopeId","data-v-a011826c"]]),Ca={class:"group-feeds-list"},_a=M(a({__name:"GroupFeedsList",props:{loading:{type:Boolean,default:!1},hasMore:{type:Boolean,default:!0},feeds:{default:()=>[]},api:{},service:{},params:{default:()=>({})},pageableParams:{default:()=>({})},selectable:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},pageSize:{default:10},itemKey:{default:"id"},itemTitleField:{default:"content"},itemDescriptionField:{default:""},themeMode:{default:"auto"},showBorderBottom:{type:Boolean,default:!0},borderBottomLeftOffset:{default:16},showNoMoreData:{type:Boolean,default:!0},title:{default:"群动态"}},emits:["publish","like","comment","share","user-click","load-more","select","delete","refresh","search","itemClick","error","post"],setup(e,{emit:a}){const i=a,{currentTheme:r}=x(),d=t(()=>`theme-${r.value}`),u=()=>{i("publish")},c=e=>{i("like",e)},m=e=>{i("comment",e)},p=e=>{i("share",e)},h=e=>{i("user-click",e)},k=()=>{i("load-more")},y=e=>{i("select",e)},b=e=>{i("delete",e)},w=()=>{i("refresh")},C=e=>{i("search",e)},_=e=>{i("itemClick",e)},j=e=>{i("error",e)},M=()=>{i("post")};return(a,i)=>{const t=I,r=S,x=$;return l(),s("div",Ca,[o("div",{class:g(["publish-container",d.value])},[n(r,{type:"primary",size:"large",round:"",onClick:u,class:"publish-button"},{default:v(()=>[n(t,{name:"plus",size:"16",class:"button-icon"}),i[0]||(i[0]=f(" 发布动态 ",-1))]),_:1})],2),n(wa,{api:e.api,service:e.service,params:e.params,"pageable-params":e.pageableParams,selectable:e.selectable,deletable:e.deletable,searchable:e.searchable,"page-size":e.pageSize,"item-key":e.itemKey,"item-title-field":e.itemTitleField,"item-description-field":e.itemDescriptionField,"theme-mode":e.themeMode,"show-border-bottom":e.showBorderBottom,"border-bottom-left-offset":e.borderBottomLeftOffset,"show-no-more-data":e.showNoMoreData,"top-spacing":0,"left-spacing":0,"right-spacing":0,"show-header":!1,"custom-item":!1,title:e.title,onSelect:y,onDelete:b,onRefresh:w,onLoadMore:k,onSearch:C,onItemClick:_,onError:j,onLike:c,onComment:m,onShare:p,onUserClick:h,onPost:M},{empty:v(()=>[o("div",{class:g(["custom-empty-state",d.value])},[n(x,{image:"default",description:"暂无群动态"},{default:v(()=>[n(r,{type:"primary",size:"small",round:"",onClick:u},{default:v(()=>[...i[1]||(i[1]=[f(" 发布第一条动态 ",-1)])]),_:1})]),_:1})],2)]),_:1},8,["api","service","params","pageable-params","selectable","deletable","searchable","page-size","item-key","item-title-field","item-description-field","theme-mode","show-border-bottom","border-bottom-left-offset","show-no-more-data","title"])])}}}),[["__scopeId","data-v-77613457"]]),xa={key:0,class:"audio-preview"},ja={class:"audio-info"},Ma={class:"audio-details"},za={class:"audio-status"},Ba=M(a({__name:"AudioPreview",props:{audioUrl:{},recording:{type:Boolean,default:!1}},emits:["delete"],setup(e,{emit:a}){const i=a,t=()=>{i("delete")};return(a,i)=>e.audioUrl?(l(),s("div",xa,[o("div",ja,[n(r(j),{icon:"ri:mic-line",width:"24",height:"24"}),o("div",Ma,[i[0]||(i[0]=o("div",{class:"audio-name"},"语音消息",-1)),o("div",za,u(e.recording?"正在录音...":"录音完成"),1)])]),o("div",{class:"delete-btn",onClick:t},[n(r(j),{icon:"ri:close-line"})])])):d("",!0)}}),[["__scopeId","data-v-c9953bf5"]]),Sa={key:0,class:"video-preview"},Ia=["src"],Da=M(a({__name:"VideoPreview",props:{videoUrl:{}},emits:["delete"],setup(e,{emit:a}){const i=a,t=()=>{i("delete")};return(a,i)=>e.videoUrl?(l(),s("div",Sa,[o("video",{src:e.videoUrl,controls:"",class:"video-player"},null,8,Ia),o("div",{class:"delete-btn",onClick:t},[n(r(j),{icon:"ri:close-line"})])])):d("",!0)}}),[["__scopeId","data-v-6ebd59fe"]]),Fa={key:0,class:"file-list"},La={class:"file-info"},$a={class:"file-name"},Ua={class:"file-size"},Pa=["onClick"],Va=M(a({__name:"FilePreview",props:{files:{}},emits:["delete"],setup(e,{emit:a}){const i=a,t=e=>{if(0===e)return"0 B";const a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["B","KB","MB","GB"][a]};return(a,p)=>e.files.length>0?(l(),s("div",Fa,[(l(!0),s(c,null,m(e.files,(e,a)=>(l(),s("div",{key:a,class:"file-item"},[n(r(j),{icon:"ri:file-text-line",width:"24",height:"24"}),o("div",La,[o("div",$a,u(e.name),1),o("div",Ua,u(t(e.size)),1)]),o("div",{class:"delete-btn",onClick:e=>(e=>{i("delete",e)})(a)},[n(r(j),{icon:"ri:close-line"})],8,Pa)]))),128))])):d("",!0)}}),[["__scopeId","data-v-2b41d8af"]]),Ta={key:0,class:"image-preview"},Aa=["src"],Ra=["onClick"],Ga=M(a({__name:"ImagePreview",props:{images:{},maxImages:{default:9}},emits:["delete","addMore"],setup(e,{emit:a}){const i=e,u=a,p=()=>{u("addMore")},v=t(()=>i.images.length>0&&i.images.length<i.maxImages);return(a,i)=>e.images.length>0?(l(),s("div",Ta,[(l(!0),s(c,null,m(e.images,(e,a)=>(l(),s("div",{key:a,class:"image-item"},[o("img",{src:e,alt:"预览图"},null,8,Aa),o("div",{class:"delete-btn",onClick:e=>(e=>{u("delete",e)})(a)},[n(r(j),{icon:"ri:close-line"})],8,Ra)]))),128)),v.value?(l(),s("div",{key:0,class:"image-item add-more-btn",onClick:p},[n(r(j),{icon:"ri:image-add-line",width:"24",height:"24"})])):d("",!0)])):d("",!0)}}),[["__scopeId","data-v-ef29badd"]]),Na={key:0,class:"link-preview"},Oa={class:"link-preview-title"},Ea={class:"link-preview-desc"},Ja={key:0,class:"link-preview-image"},Ka=["src"],Wa=M(a({__name:"LinkPreview",props:{previewData:{}},setup:e=>(a,i)=>e.previewData?(l(),s("div",Na,[o("div",Oa,u(e.previewData.title||"链接预览"),1),o("div",Ea,u(e.previewData.description||"暂无描述"),1),e.previewData.image?(l(),s("div",Ja,[o("img",{src:e.previewData.image,alt:"链接预览图"},null,8,Ka)])):d("",!0)])):d("",!0)}),[["__scopeId","data-v-97b40c3a"]]),Ha={class:"feeds-post-popup"},Za={class:"popup-header"},qa={class:"popup-content"},Qa={class:"content-area"},Xa={class:"add-content-area"},Ya={class:"content-items"},ei={key:0,class:"link-input-area"},ai={class:"popup-footer"},ii=M(a({__name:"GroupFeedsPostPopup",props:{modelValue:{type:Boolean}},emits:["update:modelValue","submit"],setup(e,{emit:a}){const i=e,t=a,u=h(i.modelValue),c=h(""),m=h(!1),k=h(!1),y=h([]),w=h(""),C=h(""),_=h(!1),{open:x,onChange:M}=D({accept:"image/*",multiple:!0}),{open:B,onChange:I}=D({accept:"video/*",multiple:!1}),{open:L,onChange:$}=D({multiple:!0}),U=h(""),P=h(null),T=h([]);b(()=>i.modelValue,e=>{u.value=e,e||A()}),b(u,e=>{t("update:modelValue",e)}),b(U,e=>{e&&q(e)?setTimeout(()=>{P.value={title:"链接预览标题",description:"这是一个链接预览描述",image:"https://picsum.photos/seed/preview/300/200.jpg"}},500):P.value=null}),M(e=>{if(!e)return;const a=[];for(let i=0;i<e.length&&y.value.length+a.length<9;i++){const t=e[i];if(t.size>5242880){z("图片大小不能超过5MB");continue}const l=new FileReader;l.onload=i=>{const t=i.target?.result;a.push(t),a.length===Math.min(e.length,9-y.value.length)&&(y.value=[...y.value,...a])},l.readAsDataURL(t)}}),I(e=>{const a=e?.[0];if(!a)return;if(a.size>104857600)return void z("视频大小不能超过100MB");const i=new FileReader;i.onload=e=>{const a=e.target?.result;w.value=a},i.readAsDataURL(a)}),$(e=>{if(!e)return;const a=[];for(let i=0;i<e.length&&T.value.length+a.length<5;i++){const t=e[i];t.size>20971520?z(`文件 ${t.name} 大小不能超过20MB`):a.push(t)}a.length>0&&(T.value=[...T.value,...a])});const A=()=>{c.value="",y.value=[],T.value=[],w.value="",C.value="",U.value="",P.value=null,k.value=!1,_.value=!1},R=()=>{u.value=!1},G=()=>{if(!(c.value.trim()||0!==y.value.length||0!==T.value.length||w.value||C.value||U.value))return void z("请输入内容或添加附件");if(U.value&&!q(U.value))return void z("请输入有效的链接地址");m.value=!0;const e={};let a="text";y.value.length>0&&(a="image",e.images=y.value),w.value&&(a="video",e.video=w.value),C.value&&(a="audio",e.audio=C.value),U.value&&(a="link",e.linkUrl=U.value,e.linkPreview=P.value),T.value.length>0&&(a="file",e.files=T.value),setTimeout(()=>{t("submit",c.value,a,e),m.value=!1,z("发布成功"),R()},1e3)},N=()=>{x()},O=()=>{B()},E=()=>{L()},J=()=>{w.value=""},K=()=>{_.value?(_.value=!1,setTimeout(()=>{C.value="mock-audio-url.mp3",z("录音完成")},1e3),z("正在停止录音...")):(_.value=!0,z("正在录音..."))},W=()=>{C.value="",_.value=!1},H=e=>{y.value.splice(e,1)},Z=e=>{T.value.splice(e,1)},q=e=>{try{return"http:"===new URL(e).protocol||"https:"===new URL(e).protocol}catch(a){return!1}};return(e,a)=>{const i=S,t=V,h=F;return l(),p(h,{show:u.value,"onUpdate:show":a[3]||(a[3]=e=>u.value=e),position:"bottom",style:{height:"95%"},round:""},{default:v(()=>[o("div",Ha,[o("div",Za,[a[5]||(a[5]=o("div",{class:"popup-title"},"发布动态",-1)),n(i,{type:"default",size:"small",onClick:R,class:"cancel-button"},{default:v(()=>[...a[4]||(a[4]=[f(" 取消 ",-1)])]),_:1})]),o("div",qa,[o("div",Qa,[n(t,{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=e=>c.value=e),type:"textarea",placeholder:"分享你的想法...",rows:"6",maxlength:"500","show-word-limit":"",class:"content-input",autosize:""},null,8,["modelValue"]),o("div",Xa,[o("div",Ya,[0===y.value.length?(l(),s("div",{key:0,class:"add-item",onClick:N},[n(r(j),{icon:"ri:image-add-line",width:"20",height:"20"}),a[6]||(a[6]=o("span",null,"图片",-1))])):d("",!0),y.value.length>0&&y.value.length<9?(l(),s("div",{key:1,class:"add-item",onClick:N},[n(r(j),{icon:"ri:image-add-line",width:"20",height:"20"}),a[7]||(a[7]=o("span",null,"更多图片",-1))])):d("",!0),w.value?d("",!0):(l(),s("div",{key:2,class:"add-item",onClick:O},[n(r(j),{icon:"ri:video-line",width:"20",height:"20"}),a[8]||(a[8]=o("span",null,"视频",-1))])),C.value?d("",!0):(l(),s("div",{key:3,class:"add-item",onClick:K},[n(r(j),{icon:"ri:mic-line",width:"20",height:"20"}),a[9]||(a[9]=o("span",null,"语音",-1))])),0===T.value.length?(l(),s("div",{key:4,class:"add-item",onClick:E},[n(r(j),{icon:"ri:attachment-2",width:"20",height:"20"}),a[10]||(a[10]=o("span",null,"附件",-1))])):d("",!0),o("div",{class:g(["add-item",{active:k.value}]),onClick:a[1]||(a[1]=e=>k.value=!k.value)},[n(r(j),{icon:"ri:link",width:"20",height:"20"}),a[11]||(a[11]=o("span",null,"链接",-1))],2)])]),n(Ga,{images:y.value,onDelete:H,onAddMore:N},null,8,["images"]),w.value?(l(),p(Da,{key:0,"video-url":w.value,onDelete:J},null,8,["video-url"])):d("",!0),C.value?(l(),p(Ba,{key:1,"audio-url":C.value,recording:_.value,onDelete:W},null,8,["audio-url","recording"])):d("",!0),n(Va,{files:T.value,onDelete:Z},null,8,["files"]),P.value?(l(),p(Wa,{key:2,"preview-data":P.value},null,8,["preview-data"])):d("",!0)]),k.value?(l(),s("div",ei,[n(t,{modelValue:U.value,"onUpdate:modelValue":a[2]||(a[2]=e=>U.value=e),placeholder:"输入链接地址",class:"link-input"},{"left-icon":v(()=>[n(r(j),{icon:"ri:link"})]),_:1},8,["modelValue"])])):d("",!0)]),o("div",ai,[n(i,{type:"primary",size:"large",loading:m.value,onClick:G,class:"submit-button",block:""},{default:v(()=>[...a[12]||(a[12]=[f(" 发布 ",-1)])]),_:1},8,["loading"])])])]),_:1},8,["show"])}}}),[["__scopeId","data-v-e6031fc1"]]),ti={class:"filter-container"},li={class:"filter-left"},si={class:"resources-container"},oi={key:0,class:"empty-resources"},ni={key:1,class:"resources-list"},ri=["onClick"],di={class:"resource-icon"},ui={class:"resource-info"},ci={class:"resource-title"},mi={class:"resource-description"},pi={class:"resource-meta"},vi={class:"resource-size"},fi={class:"resource-date"},gi={class:"resource-author"},hi={key:0,class:"resource-tags"},ki={key:0,class:"more-tags"},yi={class:"resource-actions"},bi={key:0,class:"load-more"},wi=M(a({__name:"GroupResourceList",props:{resources:{default:()=>[]},loading:{type:Boolean,default:!1},hasMore:{type:Boolean,default:!0},isGroupAdmin:{type:Boolean,default:!1}},emits:["upload","download","view","delete","edit","load-more","filter-change"],setup(e,{emit:a}){const i=a,{currentTheme:r}=x(),k=t(()=>`theme-${r.value}`),y=h("all"),b=h("newest"),C=[{text:"全部",value:"all"},{text:"图片",value:"image"},{text:"视频",value:"video"},{text:"文档",value:"doc"},{text:"音频",value:"audio"},{text:"其他",value:"other"}],_=[{text:"最新",value:"newest"},{text:"最热",value:"hottest"},{text:"名称",value:"name"},{text:"大小",value:"size"}],j=()=>{i("upload")},M=()=>{i("load-more")},B=()=>{i("filter-change",{type:y.value,sort:b.value})},D=()=>{i("filter-change",{type:y.value,sort:b.value})},F=e=>({image:"#1989fa",video:"#ff6b35",doc:"#07c160",audio:"#7232dd",other:"#969799"}[e]||"#969799"),U=e=>{const a=new Date(e),i=(new Date).getTime()-a.getTime();return i<864e5?"今天":i<1728e5?"昨天":i<6048e5?`${Math.floor(i/864e5)}天前`:a.toLocaleDateString()};return(a,t)=>{const r=T,h=A,x=I,P=S,V=$,R=L;return l(),s("div",{class:g(["group-resource-list",k.value])},[o("div",ti,[o("div",li,[n(h,null,{default:v(()=>[n(r,{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=e=>y.value=e),options:C,title:"类型",onChange:B},null,8,["modelValue"]),n(r,{modelValue:b.value,"onUpdate:modelValue":t[1]||(t[1]=e=>b.value=e),options:_,title:"排序",onChange:D},null,8,["modelValue"])]),_:1})]),n(P,{type:"primary",size:"small",round:"",onClick:j,class:"upload-button"},{default:v(()=>[n(x,{name:"plus",size:"14",class:"button-icon"}),t[2]||(t[2]=f(" 上传资源 ",-1))]),_:1})]),o("div",si,[0===e.resources.length?(l(),s("div",oi,[n(V,{image:"default",description:"暂无群资源"},{default:v(()=>[n(P,{type:"primary",size:"small",round:"",onClick:j},{default:v(()=>[...t[3]||(t[3]=[f(" 上传第一个资源 ",-1)])]),_:1})]),_:1})])):(l(),s("div",ni,[(l(!0),s(c,null,m(e.resources,a=>{return l(),s("div",{key:a.id,class:"resource-item",onClick:e=>(e=>{i("view",e)})(a)},[o("div",di,[n(x,{name:(g=a.type,{image:"photo-o",video:"play-circle-o",doc:"description",audio:"music-o",other:"folder-o"}[g]||"folder-o"),size:"36",color:F(a.type)},null,8,["name","color"])]),o("div",ui,[o("div",ci,u(a.title),1),o("div",mi,u(a.description),1),o("div",pi,[o("span",vi,u((r=a.size,r<1024?r+" B":r<1048576?(r/1024).toFixed(1)+" KB":r<1073741824?(r/1048576).toFixed(1)+" MB":(r/1073741824).toFixed(1)+" GB")),1),o("span",fi,u(U(a.createdAt)),1),o("span",gi,"by "+u(a.authorName),1)]),a.tags&&a.tags.length?(l(),s("div",hi,[(l(!0),s(c,null,m(a.tags.slice(0,3),e=>(l(),p(R,{key:e,plain:"",size:"medium",class:"resource-tag"},{default:v(()=>[f(u(e),1)]),_:2},1024))),128)),a.tags.length>3?(l(),s("span",ki," +"+u(a.tags.length-3),1)):d("",!0)])):d("",!0)]),o("div",yi,[n(P,{type:"primary",size:"small",round:"",onClick:w(e=>(e=>{i("download",e)})(a),["stop"]),class:"download-button"},{default:v(()=>[n(x,{name:"down",size:"14"}),t[4]||(t[4]=f(" 下载 ",-1))]),_:1},8,["onClick"]),e.isGroupAdmin||a.isMine?(l(),p(P,{key:0,type:"default",size:"small",round:"",onClick:w(e=>{z("更多操作功能开发中")},["stop"]),class:"more-button"},{default:v(()=>[n(x,{name:"ellipsis",size:"14"})]),_:1},8,["onClick"])):d("",!0)])],8,ri);var r,g}),128))]))]),e.hasMore?(l(),s("div",bi,[n(P,{type:"default",size:"small",round:"",loading:e.loading,onClick:M},{default:v(()=>[f(u(e.loading?"加载中...":"加载更多"),1)]),_:1},8,["loading"])])):d("",!0)],2)}}}),[["__scopeId","data-v-d5905d5c"]]),Ci={class:"search-container"},_i={class:"role-tabs"},xi={class:"members-container"},ji={key:0,class:"empty-members"},Mi={key:1,class:"members-list"},zi=["onClick"],Bi=["src","alt"],Si={class:"member-info"},Ii={class:"member-basic"},Di={class:"member-name"},Fi={key:0,class:"member-role owner"},Li={key:1,class:"member-role admin"},$i={key:2,class:"member-role active"},Ui={key:0,class:"member-signature"},Pi={class:"member-meta"},Vi={class:"join-time"},Ti={key:0,class:"message-count"},Ai={class:"member-actions"},Ri={key:0,class:"load-more"},Gi=M(a({__name:"GroupMembersList",props:{members:{default:()=>[]},loading:{type:Boolean,default:!1},hasMore:{type:Boolean,default:!0}},emits:["member-click","send-message","add-friend","load-more","search"],setup(e,{emit:a}){const i=e,r=a,{currentTheme:k}=x(),y=t(()=>`theme-${k.value}`),b=h(""),C=h("all"),_=t(()=>{let e=[...i.members||[]];if("admin"===C.value)e=e.filter(e=>"admin"===e.role||"owner"===e.role);else if("active"===C.value)e=e.filter(e=>e.isActive);else if("new"===C.value){const a=new Date;a.setDate(a.getDate()-7),e=e.filter(e=>new Date(e.joinTime)>a)}if(b.value){const a=b.value.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(a)||e.signature&&e.signature.toLowerCase().includes(a))}return e}),j=()=>{r("search",b.value)},M=()=>{b.value="",r("search","")},z=e=>{C.value=e},B=()=>{r("load-more")},I=e=>{const a=new Date(e),i=(new Date).getTime()-a.getTime();return i<864e5?"今天":i<1728e5?"昨天":i<6048e5?`${Math.floor(i/864e5)}天前`:i<2592e6?`${Math.floor(i/6048e5)}周前`:a.toLocaleDateString()};return(a,i)=>{const t=R,h=G,k=N,x=$,D=S;return l(),s("div",{class:g(["group-members-list",y.value])},[o("div",Ci,[n(t,{modelValue:b.value,"onUpdate:modelValue":i[0]||(i[0]=e=>b.value=e),placeholder:"搜索成员",onSearch:j,onClear:M,shape:"round",background:"transparent"},null,8,["modelValue"])]),o("div",_i,[n(k,{active:C.value,"onUpdate:active":i[1]||(i[1]=e=>C.value=e),onChange:z,shrink:"",background:"transparent",color:"var(--color-primary, #1989fa)","line-height":"3px"},{default:v(()=>[n(h,{title:"全部",name:"all"}),n(h,{title:"管理员",name:"admin"}),n(h,{title:"活跃成员",name:"active"}),n(h,{title:"新成员",name:"new"})]),_:1},8,["active"])]),o("div",xi,[0===_.value.length?(l(),s("div",ji,[n(x,{image:"default",description:b.value?"未找到相关成员":"暂无成员"},null,8,["description"])])):(l(),s("div",Mi,[(l(!0),s(c,null,m(_.value,e=>(l(),s("div",{key:e.id,class:"member-item",onClick:a=>(e=>{r("member-click",e)})(e)},[o("img",{src:e.avatar||"https://picsum.photos/seed/default-avatar/200/200.jpg",alt:e.name,class:"member-avatar"},null,8,Bi),o("div",Si,[o("div",Ii,[o("div",Di,u(e.name),1),"owner"===e.role?(l(),s("div",Fi,"群主")):"admin"===e.role?(l(),s("div",Li,"管理员")):e.isActive?(l(),s("div",$i,"活跃")):d("",!0)]),e.signature?(l(),s("div",Ui,u(e.signature),1)):d("",!0),o("div",Pi,[o("span",Vi,"加入时间: "+u(I(e.joinTime)),1),e.messageCount?(l(),s("span",Ti,"发言 "+u(e.messageCount)+" 条",1)):d("",!0)])]),o("div",Ai,[e.isFriend?(l(),p(D,{key:0,type:"default",size:"small",round:"",plain:"",onClick:w(a=>(e=>{r("send-message",e)})(e),["stop"]),class:"action-button"},{default:v(()=>[...i[2]||(i[2]=[f(" 发消息 ",-1)])]),_:1},8,["onClick"])):(l(),p(D,{key:1,type:"primary",size:"small",round:"",plain:"",onClick:w(a=>(e=>{r("add-friend",e)})(e),["stop"]),class:"action-button"},{default:v(()=>[...i[3]||(i[3]=[f(" 加好友 ",-1)])]),_:1},8,["onClick"]))])],8,zi))),128))]))]),e.hasMore?(l(),s("div",Ri,[n(D,{type:"default",size:"small",round:"",loading:e.loading,onClick:B},{default:v(()=>[f(u(e.loading?"加载中...":"加载更多"),1)]),_:1},8,["loading"])])):d("",!0)],2)}}}),[["__scopeId","data-v-45dfe27d"]]),Ni={class:"content-container"},Oi={class:"tab-content-wrapper"},Ei={class:"tab-content-wrapper"},Ji={class:"tab-content-wrapper"},Ki={class:"bottom-fixed"},Wi=M(a({__name:"sdkwork-group-space",props:{groupId:{default:void 0},group:{default:void 0}},emits:["back","enter-group"],setup(e,{emit:a}){const d=e,u=a,c=i(),{currentTheme:m}=x(),p=t(()=>`theme-${m.value}`),f=h("feeds"),k=h(d.group),y=h(!1),b=h(!1),w=h([]),_=h(!1),j=h(!0),M=h([]),S=h(!1),I=h(!0),D=h([]),F=h(!1),L=h(!0),$=t(()=>k.value?.isJoined||!1);t(()=>k.value?.isJoined||!1);const U=async(e=!1)=>{if(!_.value){_.value=!0;try{await new Promise(e=>setTimeout(e,800));const a=[{id:"1",userId:"user1",userName:"张三",userAvatar:"https://picsum.photos/seed/user1/200/200.jpg",content:"今天遇到了一个CSS布局问题，最后用Grid解决了，真的是太强大了！",type:"image",images:["https://picsum.photos/seed/css1/400/300.jpg"],isPinned:!0,isLiked:!1,likeCount:23,commentCount:5,createdAt:new Date(Date.now()-72e5).toISOString()},{id:"2",userId:"user2",userName:"李四",userAvatar:"https://picsum.photos/seed/user2/200/200.jpg",content:"Vue3和React18哪个更好？我最近在做一个新项目，有点纠结，大家有什么建议吗？",type:"text",images:[],isPinned:!1,isLiked:!0,likeCount:18,commentCount:32,createdAt:new Date(Date.now()-18e6).toISOString()}];w.value=e?a:[...w.value,...a],j.value=w.value.length<20}finally{_.value=!1}}},P=async(e=!1)=>{if(!S.value){S.value=!0;try{await new Promise(e=>setTimeout(e,800));const a=[{id:"1",title:"Vue3实战教程",description:"从零开始学习Vue3，包含Composition API、响应式系统等核心概念",type:"doc",size:15728640,url:"https://example.com/vue3-tutorial.pdf",authorId:"user1",authorName:"张三",tags:["教程","Vue3"],isMine:!1,downloadCount:235,createdAt:new Date(Date.now()-2592e5).toISOString()},{id:"2",title:"React Hooks详解",description:"深入解析React Hooks的实现原理和最佳实践",type:"video",size:52428800,url:"https://example.com/react-hooks.mp4",thumbnailUrl:"https://picsum.photos/seed/react-hooks/320/180.jpg",authorId:"user2",authorName:"李四",tags:["视频","React"],isMine:!0,downloadCount:156,createdAt:new Date(Date.now()-6048e5).toISOString()}];M.value=e?a:[...M.value,...a],I.value=M.value.length<20}finally{S.value=!1}}},V=async(e=!1)=>{if(!F.value){F.value=!0;try{await new Promise(e=>setTimeout(e,800));const a=[{id:"user1",name:"张三",avatar:"https://picsum.photos/seed/user1/200/200.jpg",signature:"热爱前端，专注于Vue和React技术栈",role:"admin",isActive:!0,isFriend:!0,joinTime:"2022-02-15",messageCount:542},{id:"user2",name:"李四",avatar:"https://picsum.photos/seed/user2/200/200.jpg",signature:"前端工程师，爱技术，爱生活",role:"member",isActive:!0,isFriend:!1,joinTime:"2022-03-20",messageCount:326},{id:"user3",name:"王五",avatar:"https://picsum.photos/seed/user3/200/200.jpg",signature:"CSS高手，精通各种布局技巧",role:"member",isActive:!1,isFriend:!1,joinTime:"2022-05-10",messageCount:187}];D.value=e?a:[...D.value,...a],L.value=D.value.length<100}finally{F.value=!1}}},T=e=>{console.log("切换到标签:",e),"feeds"===e&&0===w.value.length?U(!0):"resources"===e&&0===M.value.length?P(!0):"members"===e&&0===D.value.length&&V(!0)},A=()=>{u("back"),c.back()},R=e=>{e.isJoined?z("您已加入该群组"):e.price>0?B({title:"付费入群",message:`加入"${e.name}"需要支付 ¥${e.price}，是否确认？`}).then(()=>{z("支付成功，已加入群组"),k.value&&(k.value.isJoined=!0)}).catch(()=>{}):(z("已加入群组"),k.value&&(k.value.isJoined=!0))},O=e=>{u("enter-group",e),z("进入群聊")},E=()=>{y.value=!0},J=(e,a,i)=>{const t={id:Date.now().toString(),userId:"current-user",userName:"当前用户",userAvatar:"https://picsum.photos/seed/currentuser/200/200.jpg",content:e,type:"text",images:i.images||[],isPinned:!1,isLiked:!1,likeCount:0,commentCount:0,createdAt:(new Date).toISOString()};"link"===a&&i.linkUrl?t.content+=`\n\n链接: ${i.linkUrl}`:"file"===a&&i.files&&i.files.length>0&&(t.content+=`\n\n附件: ${i.files.map(e=>e.name).join(", ")}`),w.value.unshift(t)},K=e=>{const a=w.value.findIndex(a=>a.id===e.id);-1!==a&&(w.value[a].isLiked=!w.value[a].isLiked,w.value[a].likeCount+=w.value[a].isLiked?1:-1)},W=e=>{z(`评论动态: ${e.content.substring(0,20)}...`)},H=e=>{z(`分享动态: ${e.content.substring(0,20)}...`)},Z=()=>{U()},q=()=>{z("上传资源")},Q=e=>{z(`下载资源: ${e.title}`)},X=e=>{z(`查看资源: ${e.title}`)},Y=e=>{z(`编辑资源: ${e.title}`)},ee=e=>{B({title:"删除资源",message:`确定要删除资源"${e.title}"吗？`}).then(()=>{const a=M.value.findIndex(a=>a.id===e.id);-1!==a&&(M.value.splice(a,1),z("删除成功"))}).catch(()=>{})},ae=e=>{console.log("资源筛选:",e)},ie=()=>{P()},te=e=>{z(`查看成员: ${e.name}`)},le=e=>{z(`给 ${e.name} 发送消息`)},se=e=>{z(`添加 ${e.name} 为好友`)},oe=()=>{V()},ne=e=>{console.log("搜索成员:",e)};return C(()=>{(async()=>{if(!k.value&&d.groupId){const e={id:String(d.groupId),name:"前端技术交流群",description:"分享前端技术、讨论最新前端框架、解决技术难题、共同进步的技术交流群组。",avatar:"https://picsum.photos/seed/frontend/200/200.jpg",coverImage:"https://picsum.photos/seed/frontend-cover/800/300.jpg",tags:["前端","技术","交流"],memberCount:3586,maxMembers:5e3,messageCount:128560,price:0,isOfficial:!0,isVerified:!0,isHot:!0,isJoined:!0,type:"official",createdAt:"2022-01-15"};k.value=e}})(),U(!0)}),(e,a)=>{const i=G,t=N;return l(),s("div",{class:g(["sdkwork-group-space",p.value])},[n(r(re),{group:k.value,onBack:A},null,8,["group"]),o("div",Ni,[n(t,{active:f.value,"onUpdate:active":a[0]||(a[0]=e=>f.value=e),onChange:T,sticky:"","offset-top":"0",animated:"",swipeable:"",background:"var(--bg-card, #ffffff)",color:"var(--color-primary, #1989fa)","line-height":"3px",shrink:!0,class:"custom-tabs"},{default:v(()=>[n(i,{name:"feeds",title:"群动态"},{default:v(()=>[o("div",Oi,[n(r(_a),{feeds:w.value,loading:_.value,"has-more":j.value,onPublish:E,onLike:K,onComment:W,onShare:H,onLoadMore:Z},null,8,["feeds","loading","has-more"])])]),_:1}),n(i,{name:"resources",title:"群资源"},{default:v(()=>[o("div",Ei,[n(r(wi),{resources:M.value,loading:S.value,"has-more":I.value,"is-group-admin":$.value,onUpload:q,onDownload:Q,onView:X,onEdit:Y,onDelete:ee,onLoadMore:ie,onFilterChange:ae},null,8,["resources","loading","has-more","is-group-admin"])])]),_:1}),n(i,{name:"members",title:"群成员"},{default:v(()=>[o("div",Ji,[n(r(Gi),{members:D.value,loading:F.value,"has-more":L.value,onMemberClick:te,onSendMessage:le,onAddFriend:se,onLoadMore:oe,onSearch:ne},null,8,["members","loading","has-more"])])]),_:1})]),_:1},8,["active"])]),o("div",Ki,[n(r(ue),{group:k.value,joining:b.value,onBack:A,onJoin:R,onEnter:O,onPublishFeed:E},null,8,["group","joining"])]),n(r(ii),{modelValue:y.value,"onUpdate:modelValue":a[1]||(a[1]=e=>y.value=e),onSubmit:J},null,8,["modelValue"])],2)}}}),[["__scopeId","data-v-99f90657"]]),Hi=M(a({__name:"[id]",setup(a){const s=_(),o=i(),r=t(()=>s.params.id),d=()=>{o.back()},u=e=>{};return(a,i)=>{const t=e;return l(),p(t,{"safe-area":"","theme-mode":"auto",scrollable:""},{default:v(()=>[n(Wi,{"group-id":r.value,onBack:d,onEnterGroup:u},null,8,["group-id"])]),_:1})}}}),[["__scopeId","data-v-888db01b"]]);export{Hi as default};
