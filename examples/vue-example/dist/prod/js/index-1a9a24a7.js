import{e,l as t,k as a,r as l,a as n,c as o,w as i,n as r,j as s,b as d,d as c,g as u,m as v,t as f,v as p,X as h,ai as b,V as g,q as m}from"./vue-vendor-905d75e5.js";import{av as x,a3 as w,ar as y,aw as I,ai as k,ax as B,c as C,n as S,q as T,r as $,aq as R,a7 as z,x as j,ay as A,X as H,ap as L,Z as W,U as Z,V as N,w as F,a5 as O,y as V,t as X,$ as q,ao as M,b as D,F as E,Q as J,ac as Q,az as U,J as G,aA as K,au as P,al as Y,aa as _,a0 as ee,a2 as te,z as ae}from"./index-34815b62.js";import{u as le}from"./use-id-350fcd7b.js";import{a as ne}from"./use-tab-status-c1e0ad5e.js";import{a as oe,S as ie}from"./index-8c878aea.js";import{u as re}from"./use-refs-c0c76fd0.js";function se(a,l){if(!k||!window.IntersectionObserver)return;const n=new IntersectionObserver(e=>{l(e[0].intersectionRatio>0)},{root:document.body}),o=()=>{a.value&&n.unobserve(a.value)};e(o),t(o),B(()=>{a.value&&n.observe(a.value)})}const[de,ce]=C("sticky");const ue=F(a({name:de,props:{zIndex:S,position:T("top"),container:Object,offsetTop:$(0),offsetBottom:$(0)},emits:["scroll","change"],setup(e,{emit:t,slots:a}){const d=l(),c=R(d),u=n({fixed:!1,width:0,height:0,transform:0}),v=l(!1),f=o(()=>z("top"===e.position?e.offsetTop:e.offsetBottom)),p=o(()=>{if(v.value)return;const{fixed:e,height:t,width:a}=u;return e?{width:`${a}px`,height:`${t}px`}:void 0}),h=o(()=>{if(!u.fixed||v.value)return;const t=j(A(e.zIndex),{width:`${u.width}px`,height:`${u.height}px`,[e.position]:`${f.value}px`});return u.transform&&(t.transform=`translate3d(0, ${u.transform}px, 0)`),t}),b=()=>{if(!d.value||L(d))return;const{container:a,position:l}=e,n=W(d),o=y(window);if(u.width=n.width,u.height=n.height,"top"===l)if(a){const e=W(a),t=e.bottom-f.value-u.height;u.fixed=f.value>n.top&&e.bottom>0,u.transform=t<0?t:0}else u.fixed=f.value>n.top;else{const{clientHeight:e}=document.documentElement;if(a){const t=W(a),l=e-t.top-f.value-u.height;u.fixed=e-f.value<n.bottom&&e>t.top,u.transform=l<0?-l:0}else u.fixed=e-f.value<n.bottom}(e=>{t("scroll",{scrollTop:e,isFixed:u.fixed})})(o)};return i(()=>u.fixed,e=>t("change",e)),H("scroll",b,{target:c,passive:!0}),se(d,b),i([Z,N],()=>{d.value&&!L(d)&&u.fixed&&(v.value=!0,r(()=>{const e=W(d);u.width=e.width,u.height=e.height,v.value=!1}))}),()=>{var e;return s("div",{ref:d,style:p.value},[s("div",{class:ce({fixed:u.fixed&&!v.value}),style:h.value},[null==(e=a.default)?void 0:e.call(a)])])}}})),[ve,fe]=C("tabs");var pe=a({name:ve,props:{count:O(Number),inited:Boolean,animated:Boolean,duration:O(S),swipeable:Boolean,lazyRender:Boolean,currentIndex:O(Number)},emits:["change"],setup(e,{emit:t,slots:a}){const n=l(),o=e=>t("change",e),r=()=>{var t;const l=null==(t=a.default)?void 0:t.call(a);return e.animated||e.swipeable?s(oe,{ref:n,loop:!1,class:fe("track"),duration:1e3*+e.duration,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:o},{default:()=>[l]}):l},c=t=>{const a=n.value;a&&a.state.active!==t&&a.swipeTo(t,{immediate:!e.inited})};return i(()=>e.currentIndex,c),d(()=>{c(e.currentIndex)}),V({swipeRef:n}),()=>s("div",{class:fe("content",{animated:e.animated||e.swipeable})},[r()])}});const[he,be]=C("tabs"),ge={type:T("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:$(0),duration:$(.3),animated:Boolean,ellipsis:X,swipeable:Boolean,scrollspy:Boolean,offsetTop:$(0),background:String,lazyRender:X,showHeader:X,lineWidth:S,lineHeight:S,beforeChange:Function,swipeThreshold:$(5),titleActiveColor:String,titleInactiveColor:String},me=Symbol(he);var xe=a({name:he,props:ge,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:t,slots:a}){let d,u,v,f,p;const h=l(),b=l(),g=l(),m=l(),k=le(),C=R(h),[S,T]=re(),{children:$,linkChildren:j}=q(me),A=n({inited:!1,position:"",lineStyle:{},currentIndex:-1}),N=o(()=>$.length>+e.swipeThreshold||!e.ellipsis||e.shrink),F=o(()=>({borderColor:e.color,background:e.background})),O=(e,t)=>{var a;return null!=(a=e.name)?a:t},X=o(()=>{const e=$[A.currentIndex];if(e)return O(e,A.currentIndex)}),P=o(()=>z(e.offsetTop)),Y=o(()=>e.sticky?P.value+d:0),_=t=>{const a=b.value,l=S.value;if(!(N.value&&a&&l&&l[A.currentIndex]))return;const n=l[A.currentIndex].$el,o=n.offsetLeft-(a.offsetWidth-n.offsetWidth)/2;f&&f(),f=function(e,t,a){let l,n=0;const o=e.scrollLeft,i=0===a?1:Math.round(1e3*a/16);let r=o;return function a(){r+=(t-o)/i,e.scrollLeft=r,++n<i&&(l=w(a))}(),function(){x(l)}}(a,o,t?0:+e.duration)},ee=()=>{const t=A.inited;r(()=>{const a=S.value;if(!a||!a[A.currentIndex]||"line"!==e.type||L(h.value))return;const l=a[A.currentIndex].$el,{lineWidth:n,lineHeight:o}=e,i=l.offsetLeft+l.offsetWidth/2,r={width:D(n),backgroundColor:e.color,transform:`translateX(${i}px) translateX(-50%)`};if(t&&(r.transitionDuration=`${e.duration}s`),E(o)){const e=D(o);r.height=e,r.borderRadius=e}A.lineStyle=r})},te=(a,l)=>{const n=(e=>{const t=e<A.currentIndex?-1:1;for(;e>=0&&e<$.length;){if(!$[e].disabled)return e;e+=t}})(a);if(!E(n))return;const o=$[n],i=O(o,n),r=null!==A.currentIndex;A.currentIndex!==n&&(A.currentIndex=n,l||_(),ee()),i!==e.active&&(t("update:active",i),r&&t("change",i,o.title)),v&&!e.scrollspy&&Q(Math.ceil(U(h.value)-P.value))},ae=(e,t)=>{const a=$.findIndex((t,a)=>O(t,a)===e);te(-1===a?0:a,t)},ne=(t=!1)=>{if(e.scrollspy){const a=$[A.currentIndex].$el;if(a&&C.value){const l=U(a,C.value)-Y.value;u=!0,p&&p(),p=function(e,t,a,l){let n,o=y(e);const i=o<t,r=0===a?1:Math.round(1e3*a/16),s=(t-o)/r;return function a(){o+=s,(i&&o>t||!i&&o<t)&&(o=t),I(e,o),i&&o<t||!i&&o>t?n=w(a):l&&(n=w(l))}(),function(){x(n)}}(C.value,l,t?0:+e.duration,()=>{u=!1})}}},oe=(a,l,n)=>{const{title:o,disabled:i}=$[l],r=O($[l],l);i||(G(e.beforeChange,{args:[r],done:()=>{te(l),ne()}}),K(a)),t("clickTab",{name:r,title:o,event:n,disabled:i})},ie=e=>{v=e.isFixed,t("scroll",e)},de=()=>{if("line"===e.type&&$.length)return s("div",{class:be("line"),style:A.lineStyle},null)},ce=()=>{var t,l,n;const{type:o,border:i,sticky:r}=e,d=[s("div",{ref:r?void 0:g,class:[be("wrap"),{[J]:"line"===o&&i}]},[s("div",{ref:b,role:"tablist",class:be("nav",[o,{shrink:e.shrink,complete:N.value}]),style:F.value,"aria-orientation":"horizontal"},[null==(t=a["nav-left"])?void 0:t.call(a),$.map(e=>e.renderTitle(oe)),de(),null==(l=a["nav-right"])?void 0:l.call(a)])]),null==(n=a["nav-bottom"])?void 0:n.call(a)];return r?s("div",{ref:g},[d]):d},ve=()=>{ee(),r(()=>{var e,t;_(!0),null==(t=null==(e=m.value)?void 0:e.swipeRef.value)||t.resize()})};i(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],ee),i(Z,ve),i(()=>e.active,e=>{e!==X.value&&ae(e)}),i(()=>$.length,()=>{A.inited&&(ae(e.active),ee(),r(()=>{_(!0)}))});return V({resize:ve,scrollTo:e=>{r(()=>{ae(e),ne(!0)})}}),c(ee),M(ee),B(()=>{ae(e.active,!0),r(()=>{A.inited=!0,g.value&&(d=W(g.value).height),_(!0)})}),se(h,ee),H("scroll",()=>{if(e.scrollspy&&!u){const e=(()=>{for(let e=0;e<$.length;e++){const{top:t}=W($[e].$el);if(t>Y.value)return 0===e?0:e-1}return $.length-1})();te(e)}},{target:C,passive:!0}),j({id:k,props:e,setLine:ee,scrollable:N,onRendered:(e,a)=>t("rendered",e,a),currentName:X,setTitleRefs:T,scrollIntoView:_}),()=>s("div",{ref:h,class:be([e.type])},[e.showHeader?e.sticky?s(ue,{container:h.value,offsetTop:P.value,onScroll:ie},{default:()=>[ce()]}):ce():null,s(pe,{ref:m,count:$.length,inited:A.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:A.currentIndex,onChange:te},{default:()=>{var e;return[null==(e=a.default)?void 0:e.call(a)]}})])}});const[we,ye]=C("tab"),Ie=a({name:we,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:S,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:X},setup(e,{slots:t}){const a=o(()=>{const t={},{type:a,color:l,disabled:n,isActive:o,activeColor:i,inactiveColor:r}=e;l&&"card"===a&&(t.borderColor=l,n||(o?t.backgroundColor=l:t.color=l));const s=o?i:r;return s&&(t.color=s),t}),l=()=>{const a=s("span",{class:ye("text",{ellipsis:!e.scrollable})},[t.title?t.title():e.title]);return e.dot||E(e.badge)&&""!==e.badge?s(P,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[a]}):a};return()=>s("div",{id:e.id,role:"tab",class:[ye([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:a.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls,"data-allow-mismatch":"attribute"},[l()])}}),[ke,Be]=C("tab");const Ce=F(a({name:ke,props:j({},Y,{dot:Boolean,name:S,badge:S,title:String,disabled:Boolean,titleClass:_,titleStyle:[String,Object],showZeroBadge:X}),setup(e,{slots:t}){const a=le(),n=l(!1),d=u(),{parent:c,index:x}=ee(me);if(!c)return;const w=()=>{var t;return null!=(t=e.name)?t:x.value},y=o(()=>{const t=w()===c.currentName.value;return t&&!n.value&&(n.value=!0,c.props.lazyRender&&r(()=>{c.onRendered(w(),e.title)})),t}),I=l(""),k=l("");v(()=>{const{titleClass:t,titleStyle:a}=e;I.value=t?h(t):"",k.value=a&&"string"!=typeof a?b(g(a)):a});const B=l(!y.value);return i(y,e=>{e?B.value=!1:te(()=>{B.value=!0})}),i(()=>e.title,()=>{c.setLine(),c.scrollIntoView()}),ne(y),V({id:a,renderTitle:l=>s(Ie,m({key:a,id:`${c.id}-${x.value}`,ref:c.setTitleRefs(x.value),style:k.value,class:I.value,isActive:y.value,controls:a,scrollable:c.scrollable.value,activeColor:c.props.titleActiveColor,inactiveColor:c.props.titleInactiveColor,onClick:e=>l(d.proxy,x.value,e)},ae(c.props,["type","color","shrink"]),ae(e,["dot","badge","title","disabled","showZeroBadge"])),{title:t.title})}),()=>{var e;const l=`${c.id}-${x.value}`,{animated:o,swipeable:i,scrollspy:r,lazyRender:d}=c.props;if(!t.default&&!o)return;const u=r||y.value;if(o||i)return s(ie,{id:a,role:"tabpanel",class:Be("panel-wrapper",{inactive:B.value}),tabindex:y.value?0:-1,"aria-hidden":!y.value,"aria-labelledby":l,"data-allow-mismatch":"attribute"},{default:()=>{var e;return[s("div",{class:Be("panel")},[null==(e=t.default)?void 0:e.call(t)])]}});const v=n.value||r||!d?null==(e=t.default)?void 0:e.call(t):null;return f(s("div",{id:a,role:"tabpanel",class:Be("panel"),tabindex:u?0:-1,"aria-labelledby":l,"data-allow-mismatch":"attribute"},[v]),[[p,u]])}}})),Se=F(xe);export{Ce as T,Se as a};
