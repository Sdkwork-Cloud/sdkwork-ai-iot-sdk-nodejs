import{k as e,f as t,r as a,w as o,b as s,o as r,P as n,Q as d,W as i,S as l,V as c,U as u,j as h,$ as k,R as f,O as p}from"./vue-vendor-CnVaDBlt.js";import{S as v}from"./sdkwork-icon-JBBTW6q4.js";import{_ as w}from"./index-DS3FT4GI.js";const m={class:"sdkwork-navbar__left"},y={key:0,class:"sdkwork-navbar__arrow"},b={key:1,class:"sdkwork-navbar__text"},g={class:"sdkwork-navbar__title"},_={class:"sdkwork-navbar__title-text"},x={class:"sdkwork-navbar__right"},M=w(e({__name:"sdkwork-navbar",props:{title:{default:""},leftText:{default:""},rightText:{default:""},leftArrow:{type:Boolean,default:!1},autoBack:{type:Boolean,default:!0},fixed:{type:Boolean,default:!1},border:{type:Boolean,default:!0},height:{default:46},zIndex:{default:1},background:{default:""},themeMode:{default:"auto"},safeAreaInsetTop:{type:Boolean,default:!1}},emits:["click-left","click-right"],setup(e,{expose:w,emit:M}){const B=e,T=M,C=p(),S=t(()=>{if(B.leftArrow)return!0;if(!B.autoBack)return!1;try{const e=C.currentRoute.value;if(!0===e.meta?.hideBackButton)return!1;if(!0===e.meta?.showBackButton)return!0;const t=window.history.length,a="/"===e.path||"/home"===e.path||"/index"===e.path;return t>1&&!a}catch(e){return!1}}),$=t(()=>S.value),A=a(!1),I=()=>{"dark"===B.themeMode?A.value=!0:"light"===B.themeMode?A.value=!1:"auto"===B.themeMode&&(A.value=!("undefined"==typeof window||!window.matchMedia)&&window.matchMedia("(prefers-color-scheme: dark)").matches)};o(()=>B.themeMode,I);let P=null;s(()=>{if(I(),"auto"===B.themeMode&&"undefined"!=typeof window&&window.matchMedia){P=window.matchMedia("(prefers-color-scheme: dark)");const e=()=>{"auto"===B.themeMode&&(A.value=P?.matches||!1)};P.addEventListener("change",e),r(()=>{P&&P.removeEventListener("change",e)})}});const E=t(()=>A.value?"sdkwork-navbar--dark":"sdkwork-navbar--light"),j=t(()=>{if(!B.safeAreaInsetTop)return!1;if("undefined"==typeof window)return!1;const e=navigator.userAgent.toLowerCase();if(!/iphone|ipad|ipod|android/.test(e))return!1;const t=window.matchMedia("(display-mode: standalone)").matches,a=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e);return!!(t||a||document.fullscreenElement)&&(!(!window.CSS||!window.CSS.supports)&&window.CSS.supports("top: env(safe-area-inset-top)"))}),L=t(()=>{if(!j.value)return 0;if("undefined"!=typeof window){try{const e=document.createElement("div");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="0",e.style.height="0",e.style.pointerEvents="none",e.style.visibility="hidden",e.style.top="env(safe-area-inset-top)",document.body.appendChild(e);const t=getComputedStyle(e).top;if(document.body.removeChild(e),t&&"0px"!==t&&"auto"!==t){const e=parseInt(t);if(!isNaN(e)&&e>0)return e}}catch(e){}const t=navigator.userAgent.toLowerCase();if(/iphone|ipad|ipod/.test(t)){return/iPhone (X|1[1-9]|2[0-9])|iPad Pro/.test(t)?44:20}if(/android/.test(t))return 24}return 0}),z=t(()=>B.height+L.value),N=()=>{if(B.autoBack&&S.value)try{C.back()}catch(e){window.history.back()}else T("click-left")},R=()=>{T("click-right")};return w({setTitle:e=>{},getThemeMode:()=>B.themeMode,isDarkMode:()=>A.value}),(t,a)=>(d(),n("div",null,[e.fixed?(d(),n("div",{key:0,class:"sdkwork-navbar__placeholder-space",style:c({height:`${z.value}px`})},null,4)):i("",!0),l("div",{class:f(["sdkwork-navbar",[{"sdkwork-navbar--fixed":e.fixed,"sdkwork-navbar--border":e.border},E.value]]),style:c({height:`${e.height}px`,zIndex:e.zIndex,background:e.background})},[j.value?(d(),n("div",{key:0,class:"sdkwork-navbar__placeholder",style:c({height:`${L.value}px`})},null,4)):i("",!0),l("div",{class:"sdkwork-navbar__content",style:c({height:`${e.height}px`})},[l("div",m,[$.value||e.leftText?(d(),n("div",{key:0,class:"sdkwork-navbar__left-btn",onClick:N},[$.value?(d(),n("span",y,[u(t.$slots,"left-arrow",{},()=>[h(v,{icon:"material-symbols:arrow-back-ios-new-rounded",width:"16",height:"16"})],!0)])):i("",!0),e.leftText?(d(),n("span",b,k(e.leftText),1)):i("",!0)])):i("",!0),u(t.$slots,"left",{},void 0,!0)]),l("div",g,[u(t.$slots,"title",{},()=>[l("span",_,k(e.title),1)],!0)]),l("div",x,[u(t.$slots,"right",{},void 0,!0),e.rightText?(d(),n("span",{key:0,class:"sdkwork-navbar__text sdkwork-navbar__right-btn",onClick:R},k(e.rightText),1)):i("",!0)])],4)],6)]))}}),[["__scopeId","data-v-bdcaeca0"]]);export{M as _};
