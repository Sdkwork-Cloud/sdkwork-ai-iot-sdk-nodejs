import{S as e}from"./sdkwork-page-container-DNimybSC.js";import{S as t}from"./sdkwork-api-tab-list-B8SlztKo.js";import{I as a,B as s,_ as o,f as n,s as i}from"./index-CS7g9XHh.js";/* empty css              *//* empty css              *//* empty css              */import{T as l}from"./index-BiDXggP_.js";import{k as c,a as p,f as r,w as d,P as m,Q as u,S as f,U as v,$ as b,j as h,a0 as y,a4 as k,W as g,F as C,Y as E,a1 as I,Z as x,R as N,a9 as S,O as D,o as w}from"./vue-vendor-BvtDOCb5.js";import{C as A}from"./index-CEy5rHVp.js";import{E as T}from"./index-1dsIbHLT.js";/* empty css              */import"./index-Dzr8mFM5.js";import"./sdkwork-pull-refresh-COkRYHXm.js";import"./index-PnL9L784.js";import"./shared-DPkvtz4r.js";import"./sdkwork-search-bar-BVv1IjtJ.js";import"./sdkwork-icon-DuHr6i5g.js";import"./ListItem-BKv55VP8.js";import"./LoadMoreSection-NCKz5q2S.js";import"./index-2YGsMav0.js";import"./use-id-Bc1QsgaB.js";import"./use-tab-status-UmGlUUSR.js";import"./use-refs-2XQ2iFxn.js";import"./utils-vendor-WEzSe-CR.js";import"./Checker-CE9Et041.js";var _=(e=>(e.SERVICE="service",e.MEDICAL="medical",e.BEAUTY="beauty",e.EDUCATION="education",e.BUSINESS="business",e.OTHER="other",e))(_||{}),$=(e=>(e.PENDING="pending",e.CONFIRMED="confirmed",e.IN_PROGRESS="in_progress",e.COMPLETED="completed",e.CANCELLED="cancelled",e.EXPIRED="expired",e.RESCHEDULED="rescheduled",e))($||{});const P={pending:{text:"待确认",color:"#ff6b35",bgColor:"#fff7f0",icon:"clock-o"},confirmed:{text:"已确认",color:"#1890ff",bgColor:"#f0f8ff",icon:"checked"},in_progress:{text:"进行中",color:"#52c41a",bgColor:"#f6ffed",icon:"setting-o"},completed:{text:"已完成",color:"#13c2c2",bgColor:"#e6fffb",icon:"completed"},cancelled:{text:"已取消",color:"#ff4d4f",bgColor:"#fff2f0",icon:"close"},expired:{text:"已过期",color:"#faad14",bgColor:"#fffbe6",icon:"clock-o"},rescheduled:{text:"已改期",color:"#722ed1",bgColor:"#f9f0ff",icon:"calendar-o"}},j=[{key:"view",text:"查看详情",type:"primary",icon:"eye-o"},{key:"edit",text:"修改预约",type:"default",icon:"edit",showCondition:e=>"pending"===e.status},{key:"confirm",text:"确认预约",type:"success",icon:"checked",showCondition:e=>"pending"===e.status},{key:"cancel",text:"取消预约",type:"warning",icon:"close",showCondition:e=>"pending"===e.status||"confirmed"===e.status},{key:"start",text:"开始服务",type:"primary",icon:"play-circle-o",showCondition:e=>"confirmed"===e.status},{key:"complete",text:"完成服务",type:"success",icon:"completed",showCondition:e=>"in_progress"===e.status},{key:"reschedule",text:"重新预约",type:"default",icon:"calendar-o",showCondition:e=>"cancelled"===e.status||"expired"===e.status}],R=[{value:"all",title:"全部预约",params:{status:""}},{value:"pending",title:"待确认",params:{status:"pending"}},{value:"confirmed",title:"已确认",params:{status:"confirmed"}},{value:"in_progress",title:"进行中",params:{status:"in_progress"}},{value:"completed",title:"已完成",params:{status:"completed"}},{value:"cancelled",title:"已取消",params:{status:"cancelled"}}],O={class:"appointment-header"},L={class:"header-content"},B={class:"appointment-basic-info"},M={class:"appointment-no"},U={class:"appointment-type"},z={class:"appointment-status"},G={class:"appointment-content"},F={class:"content-main"},V={class:"appointment-title"},H={class:"title-text"},Y={class:"time-info"},Q={class:"time-text"},W={key:0,class:"duration-text"},X={key:0,class:"location-info"},Z={class:"location-text"},q={class:"staff-info"},J={class:"staff-name"},K={class:"customer-info"},ee={class:"customer-name"},te={key:0,class:"customer-phone"},ae={key:1,class:"service-items"},se={class:"items-preview"},oe={class:"item-name"},ne={key:0,class:"item-duration"},ie={key:1,class:"item-fee"},le={key:0,class:"more-items"},ce={key:2,class:"appointment-fee"},pe={class:"fee-value"},re={key:3,class:"customer-notes"},de={class:"notes-text"},me={class:"appointment-footer"},ue={class:"footer-content"},fe={key:0,class:"selection-action"},ve={key:1,class:"action-buttons"},be=o(c({__name:"appointment-list-item",props:{appointment:{},index:{default:0},selected:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},showActions:{type:Boolean,default:!0},actionButtons:{default:()=>[]},statusConfig:{default:()=>({})}},emits:["select","delete","action","click"],setup(e,{emit:t}){const o=e,n=t,i=p(o.selected),c=r(()=>o.actionButtons.filter(e=>!e.showCondition||e.showCondition(o.appointment)));d(()=>o.selected,e=>{i.value=e});const S=()=>{o.selectable&&(i.value=!i.value,n("select",o.appointment))},D=()=>{o.deletable&&n("delete",o.appointment)},w=()=>{n("click",o.appointment)},T=e=>{try{return new Date(e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return e}},$=e=>e.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",");return(t,p)=>{const r=l,d=a,P=A,j=s;return u(),m("div",{class:N(["appointment-list-item",{selected:e.selected,"has-actions":e.showActions}]),onClick:w},[f("div",O,[v(t.$slots,"header",{},()=>{return[f("div",L,[f("div",B,[f("span",M,"预约号: "+b(e.appointment.appointmentNo),1),f("span",U,b((t=e.appointment.type,{[_.SERVICE]:"服务预约",[_.MEDICAL]:"医疗就诊",[_.BEAUTY]:"美容美发",[_.EDUCATION]:"教育培训",[_.BUSINESS]:"商务会议",[_.OTHER]:"其他预约"}[t]||"预约")),1)]),f("div",z,[h(r,{color:e.statusConfig[e.appointment.status]?.color,plain:!0,class:"status-tag"},{default:y(()=>[k(b(e.appointment.statusText||e.statusConfig[e.appointment.status]?.text),1)]),_:1},8,["color"])])])];var t},!0)]),f("div",G,[v(t.$slots,"content",{},()=>[f("div",F,[f("div",V,[h(d,{name:"notes-o",class:"title-icon"}),f("span",H,b(e.appointment.title),1)]),f("div",Y,[h(d,{name:"clock-o",class:"info-icon"}),f("span",Q,b(T(e.appointment.dateTime)),1),e.appointment.duration?(u(),m("span",W," ("+b(e.appointment.duration)+"分钟) ",1)):g("",!0)]),e.appointment.location?(u(),m("div",X,[h(d,{name:"location-o",class:"info-icon"}),f("span",Z,b(e.appointment.location),1)])):g("",!0),f("div",q,[h(d,{name:"user-o",class:"info-icon"}),f("span",J,b(e.appointment.staffName),1)]),f("div",K,[h(d,{name:"friends-o",class:"info-icon"}),f("span",ee,b(e.appointment.customerName),1),e.appointment.customerPhone?(u(),m("span",te,b(e.appointment.customerPhone),1)):g("",!0)]),e.appointment.serviceItems&&e.appointment.serviceItems.length>0?(u(),m("div",ae,[f("div",se,[(u(!0),m(C,null,E(e.appointment.serviceItems.slice(0,3),(e,t)=>(u(),m("div",{key:e.id,class:"item-preview"},[f("span",oe,b(e.serviceName),1),e.duration?(u(),m("span",ne,"("+b(e.duration)+"分钟)",1)):g("",!0),e.fee?(u(),m("span",ie,"¥"+b($(e.fee)),1)):g("",!0)]))),128)),e.appointment.serviceItems.length>3?(u(),m("div",le," 等"+b(e.appointment.serviceItems.length)+"项服务 ",1)):g("",!0)])])):g("",!0),e.appointment.fee?(u(),m("div",ce,[p[1]||(p[1]=f("span",{class:"fee-label"},"预约费用:",-1)),f("span",pe,b(e.appointment.currency||"¥")+b($(e.appointment.fee)),1)])):g("",!0),e.appointment.notes?(u(),m("div",re,[h(d,{name:"comment-o",class:"notes-icon"}),f("span",de,b(e.appointment.notes),1)])):g("",!0)])],!0)]),f("div",me,[v(t.$slots,"footer",{},()=>[f("div",ue,[e.selectable?(u(),m("div",fe,[h(P,{modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=e=>i.value=e),onClick:I(S,["stop"]),class:"selection-checkbox"},null,8,["modelValue"])])):g("",!0),e.showActions?(u(),m("div",ve,[v(t.$slots,"actions",{},()=>[(u(!0),m(C,null,E(c.value,e=>(u(),x(j,{key:e.key,type:e.type||"default",icon:e.icon,disabled:e.disabled,size:"small",onClick:I(t=>{return a=e.key,void n("action",o.appointment,a);var a},["stop"]),class:"action-button"},{default:y(()=>[k(b(e.text),1)]),_:2},1032,["type","icon","disabled","onClick"]))),128)),e.deletable?(u(),x(j,{key:0,type:"danger",icon:"delete",size:"small",onClick:I(D,["stop"]),class:"action-button"},{default:y(()=>[...p[2]||(p[2]=[k(" 删除 ",-1)])]),_:1})):g("",!0)],!0)])):g("",!0)])],!0)])],2)}}}),[["__scopeId","data-v-a846d0be"]]),he=o(c({__name:"sdkwork-appointment-list",props:{api:{},params:{default:()=>({})},searchable:{type:Boolean,default:!0},selectable:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},pageSize:{default:10},tabs:{default:()=>R},tabsApi:{},defaultActiveTab:{default:"all"},showActions:{type:Boolean,default:!0},actionButtons:{default:()=>j},statusConfig:{default:()=>P}},emits:["select","delete","search","load","tab-change","action","click"],setup(e,{expose:a,emit:s}){const o=e,n=s,i=p(),l=p([{value:"all",title:"全部预约",params:{status:""}},{value:$.PENDING,title:"待确认",params:{status:$.PENDING}},{value:$.CONFIRMED,title:"已确认",params:{status:$.CONFIRMED}},{value:$.IN_PROGRESS,title:"进行中",params:{status:$.IN_PROGRESS}},{value:$.COMPLETED,title:"已完成",params:{status:$.COMPLETED}},{value:$.CANCELLED,title:"已取消",params:{status:$.CANCELLED}}]),c=r(()=>o.tabs.length>0?o.tabs:l.value),d=r(()=>({...o.params})),m=(e,t)=>{n("tab-change",e,t)},f=e=>{n("select",e)},b=e=>{n("delete",e)},k=e=>{n("search",e)},g=e=>{n("load",e)},C=e=>{n("select",e)},E=e=>{n("delete",e)},I=(e,t)=>{n("action",e,t)},N=e=>{n("click",e)};return a({refresh:()=>i.value?.refresh(),loadMore:()=>i.value?.loadMore(),getData:()=>i.value?.getData()||[],getSelectedItems:()=>i.value?.getSelectedItems()||[],clearSelected:()=>i.value?.clearSelected(),setSelectedItems:e=>i.value?.setSelectedItems(e),getActiveTab:()=>i.value?.getActiveTab(),setActiveTab:e=>i.value?.setActiveTab(e),getTabsData:()=>i.value?.getTabsData()||[]}),(a,s)=>(u(),x(t,{ref_key:"tabListRef",ref:i,api:e.api,tabs:c.value,"tabs-api":e.tabsApi,params:d.value,searchable:e.searchable,selectable:e.selectable,deletable:e.deletable,"page-size":e.pageSize,"default-active-tab":e.defaultActiveTab,onTabChange:m,onSelect:f,onDelete:b,onSearch:k,onLoad:g},S({default:y(({item:t,index:s,selected:o})=>[h(be,{appointment:t,index:s,selected:o,selectable:e.selectable,deletable:e.deletable,"show-actions":e.showActions,"action-buttons":e.actionButtons,onSelect:C,onDelete:E,onAction:I,onClick:N},S({_:2},[a.$slots["appointment-header"]?{name:"header",fn:y(()=>[v(a.$slots,"appointment-header",{appointment:t,index:s},void 0,!0)]),key:"0"}:void 0,a.$slots["appointment-content"]?{name:"content",fn:y(()=>[v(a.$slots,"appointment-content",{appointment:t,index:s},void 0,!0)]),key:"1"}:void 0,a.$slots["appointment-footer"]?{name:"footer",fn:y(()=>[v(a.$slots,"appointment-footer",{appointment:t,index:s},void 0,!0)]),key:"2"}:void 0,a.$slots["appointment-actions"]?{name:"actions",fn:y(()=>[v(a.$slots,"appointment-actions",{appointment:t,index:s},void 0,!0)]),key:"3"}:void 0]),1032,["appointment","index","selected","selectable","deletable","show-actions","action-buttons"])]),_:2},[a.$slots.header?{name:"header",fn:y(()=>[v(a.$slots,"header",{},void 0,!0)]),key:"0"}:void 0,a.$slots.footer?{name:"footer",fn:y(()=>[v(a.$slots,"footer",{},void 0,!0)]),key:"1"}:void 0,a.$slots.empty?{name:"empty",fn:y(()=>[v(a.$slots,"empty",{},void 0,!0)]),key:"2"}:void 0,a.$slots.loading?{name:"loading",fn:y(()=>[v(a.$slots,"loading",{},void 0,!0)]),key:"3"}:void 0,a.$slots["tab-title"]?{name:"tab-title",fn:y(()=>[v(a.$slots,"tab-title",{},void 0,!0)]),key:"4"}:void 0]),1032,["api","tabs","tabs-api","params","searchable","selectable","deletable","page-size","default-active-tab"]))}}),[["__scopeId","data-v-d7401708"]]),ye=o(c({__name:"list",setup(t){const a=D(),o=p(),l=p("all"),c=r(()=>({all:"暂无预约记录",[$.PENDING]:"暂无待确认预约",[$.CONFIRMED]:"暂无已确认预约",[$.IN_PROGRESS]:"暂无进行中预约",[$.COMPLETED]:"暂无已完成预约",[$.CANCELLED]:"暂无已取消预约"}[l.value]||"暂无预约记录")),d=[{id:1,appointmentNo:"AP20240001",title:"AI技术咨询服务",type:_.SERVICE,status:$.PENDING,statusText:"待确认",dateTime:new Date(Date.now()+1728e5).toISOString(),location:"线上会议",staffName:"张技术顾问",customerName:"李客户",customerPhone:"138****1234",notes:"关于AI绘画技术的深度咨询",fee:299,currency:"¥",serviceItems:[{id:1,serviceName:"AI技术咨询",duration:60,fee:299}]},{id:2,appointmentNo:"AP20240002",title:"产品演示会议",type:_.BUSINESS,status:$.CONFIRMED,statusText:"已确认",dateTime:new Date(Date.now()+432e6).toISOString(),location:"公司会议室",staffName:"李销售经理",customerName:"王客户",customerPhone:"139****5678",notes:"新产品功能演示和商务洽谈",fee:0,serviceItems:[{id:1,serviceName:"产品演示",duration:90}]},{id:3,appointmentNo:"AP20240003",title:"技术培训课程",type:_.EDUCATION,status:$.COMPLETED,statusText:"已完成",dateTime:new Date(Date.now()-2592e5).toISOString(),location:"培训中心",staffName:"王培训师",customerName:"赵学员",customerPhone:"136****9012",notes:"AI应用开发实战培训",fee:899,currency:"¥",serviceItems:[{id:1,serviceName:"AI开发基础",duration:120,fee:299},{id:2,serviceName:"实战项目指导",duration:180,fee:600}]},{id:4,appointmentNo:"AP20240004",title:"医疗健康检查",type:_.MEDICAL,status:$.IN_PROGRESS,statusText:"进行中",dateTime:new Date(Date.now()+864e5).toISOString(),location:"健康体检中心",staffName:"刘医生",customerName:"钱先生",customerPhone:"137****3456",notes:"年度健康体检和咨询",fee:580,currency:"¥",serviceItems:[{id:1,serviceName:"基础体检",duration:60,fee:200},{id:2,serviceName:"专项检查",duration:90,fee:380}]}],m=async e=>{const{page:t=1,size:a=10,status:s}=e;await new Promise(e=>setTimeout(e,500));let o=d;s&&"all"!==s&&(o=d.filter(e=>e.status===s));const n=(t-1)*a,i=n+a;return{content:o.slice(n,i),size:a,totalElements:o.length,totalPages:Math.ceil(o.length/a)}},v=e=>{},b=async e=>{try{await n({title:"确认删除",message:`确定要删除"${e.title}"的预约记录吗？`}),i("预约记录已删除")}catch{}},g=e=>{},C=e=>{},E=(e,t)=>{l.value=e.value},I=(e,t)=>{switch(t){case"view":A(e);break;case"edit":P(e);break;case"confirm":j(e);break;case"cancel":R(e);break;case"start":O(e);break;case"complete":L(e);break;case"reschedule":B(e)}},N=e=>{A(e)},S=()=>{a.push("/appointment/create")},A=e=>{a.push(`/appointment/detail/${e.id}`)},P=e=>{i(`修改预约：${e.title}`)},j=e=>{i(`已确认预约：${e.title}`)},R=async e=>{try{await n({title:"确认取消",message:`确定要取消"${e.title}"的预约吗？`}),i("预约已取消")}catch{}},O=e=>{i(`开始服务：${e.title}`)},L=e=>{i(`完成服务：${e.title}`)},B=e=>{i(`重新预约：${e.title}`)};return w(()=>{o.value?.refresh()}),(t,a)=>{const n=s,i=T,l=he,p=e;return u(),x(p,{"safe-area":"",scrollable:"","theme-mode":"auto"},{default:y(()=>[h(l,{ref_key:"appointmentListRef",ref:o,api:m,searchable:!0,selectable:!1,deletable:!1,"show-actions":!0,onSelect:v,onDelete:b,onSearch:g,onLoad:C,onTabChange:E,onAction:I,onClick:N},{empty:y(()=>[h(i,{image:"calendar-o",description:c.value},{default:y(()=>[h(n,{round:"",type:"primary",onClick:S},{default:y(()=>[...a[0]||(a[0]=[k(" 立即预约 ",-1)])]),_:1})]),_:1},8,["description"])]),header:y(()=>[...a[1]||(a[1]=[f("div",{class:"appointment-header"},[f("h2",{class:"header-title"},"我的预约"),f("p",{class:"header-subtitle"},"管理您的服务预约和医疗就诊安排")],-1)])]),_:1},512)]),_:1})}}}),[["__scopeId","data-v-275de308"]]);export{ye as default};
