import{v as e,n as s,c as a,au as t,D as o,E as l,L as n,av as i,a1 as d,w as u,_ as r}from"./index-Czm3MDyH.js";import{k as c,r as p,c as h,w as m,j as g,n as f,f as v,P as x,R as k,a9 as y,a0 as D,Q as M,U as T,ac as _,ad as w,W as V,Z as $,a4 as H,S as B}from"./vue-vendor-CnVaDBlt.js";import{E as S}from"./index-DAOemCPB.js";const[b,L,j]=a("pull-refresh"),E=["pulling","loosing","success"];const R=u(c({name:b,props:{disabled:Boolean,modelValue:Boolean,headHeight:e(50),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:s,successDuration:e(500),animationDuration:e(300)},emits:["change","refresh","update:modelValue"],setup(e,{emit:s,slots:a}){let u;const r=p(),c=p(),v=t(r),x=h({status:"normal",distance:0,duration:0}),k=o(),y=()=>{if(50!==e.headHeight)return{height:`${e.headHeight}px`}},D=()=>"loading"!==x.status&&"success"!==x.status&&!e.disabled,M=(a,t)=>{const o=+(e.pullDistance||e.headHeight);x.distance=a,x.status=t?"loading":0===a?"normal":a<o?"pulling":"loosing",s("change",{status:x.status,distance:a})},T=()=>{const{status:s}=x;return"normal"===s?"":e[`${s}Text`]||j(s)},_=()=>{const{status:e,distance:s}=x;if(a[e])return a[e]({distance:s});const t=[];return E.includes(e)&&t.push(g("div",{class:L("text")},[T()])),"loading"===e&&t.push(g(n,{class:L("loading")},{default:T})),t},w=e=>{u=0===i(v.value),u&&(x.duration=0,k.start(e))},V=e=>{D()&&w(e)},$=()=>{u&&k.deltaY.value&&D()&&(x.duration=+e.animationDuration,"loosing"===x.status?(M(+e.headHeight,!0),s("update:modelValue",!0),f(()=>s("refresh"))):M(0))};return m(()=>e.modelValue,s=>{x.duration=+e.animationDuration,s?M(+e.headHeight,!0):a.success||e.successText?(x.status="success",setTimeout(()=>{M(0)},+e.successDuration)):M(0,!1)}),l("touchmove",s=>{if(D()){u||w(s);const{deltaY:a}=k;k.move(s),u&&a.value>=0&&k.isVertical()&&(d(s),M((s=>{const a=+(e.pullDistance||e.headHeight);return s>a&&(s=s<2*a?a+(s-a)/2:1.5*a+(s-2*a)/4),Math.round(s)})(a.value)))}},{target:c}),()=>{var e;const s={transitionDuration:`${x.duration}ms`,transform:x.distance?`translate3d(0,${x.distance}px, 0)`:""};return g("div",{ref:r,class:L()},[g("div",{ref:c,class:L("track"),style:s,onTouchstartPassive:V,onTouchend:$,onTouchcancel:$},[g("div",{class:L("head"),style:y()},[_()]),null==(e=a.default)?void 0:e.call(a)])])}}})),I=r(c({__name:"sdkwork-pull-refresh",props:{modelValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},pullDistance:{default:50},headHeight:{default:50},animationDuration:{default:300},successDuration:{default:500},pullingText:{default:"下拉即可刷新..."},loosingText:{default:"释放即可刷新..."},loadingText:{default:"加载中..."},successText:{default:"刷新成功"},themeMode:{default:"auto"}},emits:["refresh","change","update:modelValue"],setup(e,{expose:s,emit:a}){const t=e,o=a,l=p(t.modelValue),n=p(!1),i=()=>{"dark"===t.themeMode?n.value=!0:"light"===t.themeMode?n.value=!1:"auto"===t.themeMode&&(n.value=!("undefined"==typeof window||!window.matchMedia)&&window.matchMedia("(prefers-color-scheme: dark)").matches)},d=v(()=>n.value?"sdkwork-pull-refresh--dark":"sdkwork-pull-refresh--light"),u=e=>{o("change",e)},r=async()=>{o("refresh")};return s({finish:()=>{l.value=!1}}),m(()=>t.themeMode,i),m(()=>t.modelValue,e=>{l.value=e}),m(l,e=>{o("update:modelValue",e)}),m(l,e=>{o("update:modelValue",e)}),i(),(s,a)=>{const t=R;return M(),x("div",{class:k(["sdkwork-pull-refresh-container",d.value])},[g(t,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e),disabled:e.disabled,"pull-distance":e.pullDistance,"head-height":e.headHeight,"animation-duration":e.animationDuration,"success-duration":e.successDuration,"pulling-text":e.pullingText,"loosing-text":e.loosingText,"loading-text":e.loadingText,"success-text":e.successText,onRefresh:r,onChange:u,class:"sdkwork-pull-refresh"},y({default:D(()=>[T(s.$slots,"default",{},void 0,!0)]),_:2},[s.$slots.pulling?{name:"pulling",fn:D(({distance:e})=>[T(s.$slots,"pulling",{distance:e},void 0,!0)]),key:"0"}:void 0,s.$slots.loosing?{name:"loosing",fn:D(({distance:e})=>[T(s.$slots,"loosing",{distance:e},void 0,!0)]),key:"1"}:void 0,s.$slots.loading?{name:"loading",fn:D(()=>[T(s.$slots,"loading",{},void 0,!0)]),key:"2"}:void 0,s.$slots.success?{name:"success",fn:D(()=>[T(s.$slots,"success",{},void 0,!0)]),key:"3"}:void 0]),1032,["modelValue","disabled","pull-distance","head-height","animation-duration","success-duration","pulling-text","loosing-text","loading-text","success-text"])],2)}}}),[["__scopeId","data-v-e48733fe"]]),C={class:"empty-section"},N=r(c({__name:"EmptySection",props:{empty:{type:Boolean,default:!0}},setup:e=>(e,s)=>{const a=S;return M(),x("div",C,[T(e.$slots,"empty",_(w({empty:!0})),()=>[g(a,{description:"暂无数据"})],!0)])}}),[["__scopeId","data-v-ed806e0f"]]),P={key:1,class:"load-more-tip"},U={key:1,class:"no-more-section"},Y=r(c({__name:"LoadMoreSection",props:{hasMore:{type:Boolean},loadingMore:{type:Boolean},dataList:{},showNoMoreData:{type:Boolean,default:!1}},emits:["load"],setup(e,{expose:s,emit:a}){const t=e,o=a,l=()=>{t.loadingMore||o("load")};return s({loadMoreRef:p()}),(s,a)=>{const t=n;return e.hasMore?(M(),x("div",{key:0,ref:"loadMoreRef",class:"load-more-section",onClick:l},[e.loadingMore?(M(),$(t,{key:0,size:"24px"},{default:D(()=>[...a[0]||(a[0]=[H("加载中...",-1)])]),_:1})):(M(),x("div",P,"点击加载更多"))],512)):e.showNoMoreData&&e.dataList.length>0?(M(),x("div",U,[...a[1]||(a[1]=[B("div",{class:"no-more-tip"},"没有更多数据了",-1)])])):V("",!0)}}}),[["__scopeId","data-v-4e175053"]]);export{N as E,Y as L,I as _};
