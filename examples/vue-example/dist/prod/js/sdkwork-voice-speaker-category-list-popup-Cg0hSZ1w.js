import{_ as e}from"./sdkwork-popup-DB8NKgbd.js";import{a4 as a,D as t,E as o,T as l,c as i,a1 as s,a2 as r,X as c,L as n,n as d,G as u,ac as p,q as m,t as v,v as g,aa as f,a5 as y,H as h,O as b,C as w,z as k,a6 as S,I as x,ad as C,ae as z,U as _,af as I,ag as B,w as R,ah as M,ai as F,a3 as A,r as O,ab as P,aj as L,_ as U,ak as D,B as V,d as j,s as $,al as T}from"./index-lnKdqbPs.js";/* empty css              */import{k as Z,c as N,r as X,f as Y,w as H,j as W,b as K,m as E,n as q,l as G,s as Q,v as J,y as ee,P as ae,Q as te,R as oe,S as le,W as ie,$ as se,a1 as re,U as ce,o as ne,Z as de,F as ue,Y as pe,a0 as me,u as ve,i as ge,V as fe,ac as ye,ad as he,a4 as be}from"./vue-vendor-CnVaDBlt.js";import{_ as we,E as ke,L as Se}from"./LoadMoreSection-DxkHo9qH.js";import{D as xe,u as Ce,S as ze}from"./shared-DUTVD2z0.js";import{L as _e}from"./ListItem-B_CUZCa5.js";import{L as Ie}from"./LoadingSection-BUjoPGQj.js";import{I as Be}from"./index-BIHZGPcc.js";import{a as Re,S as Me}from"./index-CDC4TuBW.js";import{F as Fe}from"./index-2PCVDlDh.js";const Ae=e=>Math.sqrt((e[0].clientX-e[1].clientX)**2+(e[0].clientY-e[1].clientY)**2),Oe=i("image-preview")[1];var Pe=Z({props:{src:String,show:Boolean,active:Number,minZoom:a(d),maxZoom:a(d),rootWidth:a(Number),rootHeight:a(Number),disableZoom:Boolean,doubleScale:Boolean,closeOnClickImage:Boolean,closeOnClickOverlay:Boolean,vertical:Boolean},emits:["scale","close","longPress"],setup(e,{emit:a,slots:i}){const d=N({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,initializing:!1,imageRatio:0}),m=t(),v=X(),g=X(),f=X(!1),y=X(!1);let h=0;const b=Y(()=>{const{scale:e,moveX:a,moveY:t,moving:o,zooming:l,initializing:i}=d,s={transitionDuration:l||o||i?"0s":".3s"};return(1!==e||y.value)&&(s.transform=`matrix(${e}, 0, 0, ${e}, ${a}, ${t})`),s}),w=Y(()=>{if(d.imageRatio){const{rootWidth:a,rootHeight:t}=e,o=f.value?t/d.imageRatio:a;return Math.max(0,(d.scale*o-a)/2)}return 0}),k=Y(()=>{if(d.imageRatio){const{rootWidth:a,rootHeight:t}=e,o=f.value?t:a*d.imageRatio;return Math.max(0,(d.scale*o-t)/2)}return 0}),S=(t,o)=>{var l;if((t=r(t,+e.minZoom,+e.maxZoom+1))!==d.scale){const i=t/d.scale;if(d.scale=t,o){const e=u(null==(l=v.value)?void 0:l.$el),a={x:.5*e.width,y:.5*e.height},t=d.moveX-(o.x-e.left-a.x)*(i-1),s=d.moveY-(o.y-e.top-a.y)*(i-1);d.moveX=r(t,-w.value,w.value),d.moveY=r(s,-k.value,k.value)}else d.moveX=0,d.moveY=y.value?h:0;a("scale",{scale:t,index:e.active})}},x=()=>{S(1)};let C,z,_,I,B,R,M,F,A=!1;const O=a=>{const{touches:t}=a;if(C=t.length,2===C&&e.disableZoom)return;const{offsetX:o}=m;m.start(a),z=d.moveX,_=d.moveY,F=Date.now(),A=!1,d.moving=1===C&&(1!==d.scale||y.value),d.zooming=2===C&&!o.value,d.zooming&&(I=d.scale,B=Ae(t))},P=t=>{var o;const l=null==(o=g.value)?void 0:o.$el;if(!l)return;const i=l.firstElementChild,s=t.target===l,r=null==i?void 0:i.contains(t.target);!e.closeOnClickImage&&r||!e.closeOnClickOverlay&&s||a("close")},L=t=>{if(C>1)return;const o=Date.now()-F;m.isTap.value&&(o<250?e.doubleScale?M?(clearTimeout(M),M=null,(()=>{const e=d.scale>1?1:2;S(e,2===e||y.value?{x:m.startX.value,y:m.startY.value}:void 0)})()):M=setTimeout(()=>{P(t),M=null},250):P(t):o>p&&a("longPress"))},U=a=>{let t=!1;if((d.moving||d.zooming)&&(t=!0,d.moving&&z===d.moveX&&_===d.moveY&&(t=!1),!a.touches.length)){d.zooming&&(d.moveX=r(d.moveX,-w.value,w.value),d.moveY=r(d.moveY,-k.value,k.value),d.zooming=!1),d.moving=!1,z=0,_=0,I=1,d.scale<1&&x();const a=+e.maxZoom;d.scale>a&&S(a,R)}s(a,t),L(a),m.reset()},D=()=>{const{rootWidth:a,rootHeight:t}=e,o=t/a,{imageRatio:l}=d;f.value=d.imageRatio>o&&l<2.6,y.value=d.imageRatio>o&&l>=2.6,y.value&&(h=(l*a-t)/2,d.moveY=h,d.initializing=!0,c(()=>{d.initializing=!1})),x()},V=e=>{const{naturalWidth:a,naturalHeight:t}=e.target;d.imageRatio=t/a,D()};return H(()=>e.active,x),H(()=>e.show,e=>{e||x()}),H(()=>[e.rootWidth,e.rootHeight],D),o("touchmove",a=>{const{touches:t}=a;if(m.move(a),d.moving){const{deltaX:t,deltaY:o}=m,l=t.value+z,i=o.value+_;if((e.vertical?m.isVertical()&&Math.abs(i)>k.value:m.isHorizontal()&&Math.abs(l)>w.value)&&!A)return void(d.moving=!1);A=!0,s(a,!0),d.moveX=r(l,-w.value,w.value),d.moveY=r(i,-k.value,k.value)}if(d.zooming&&(s(a,!0),2===t.length)){const e=Ae(t),a=I*e/B;R=(e=>({x:(e[0].clientX+e[1].clientX)/2,y:(e[0].clientY+e[1].clientY)/2}))(t),S(a,R)}},{target:Y(()=>{var e;return null==(e=g.value)?void 0:e.$el})}),l({resetScale:x}),()=>{const a={loading:()=>W(n,{type:"spinner"},null)};return W(Re,{ref:g,class:Oe("swipe-item"),onTouchstartPassive:O,onTouchend:U,onTouchcancel:U},{default:()=>[i.image?W("div",{class:Oe("image-wrap")},[i.image({src:e.src,onLoad:V,style:b.value})]):W(Be,{ref:v,src:e.src,fit:"contain",class:Oe("image",{vertical:f.value}),style:b.value,onLoad:V},a)]})}}});const[Le,Ue]=i("image-preview"),De=["show","teleport","transition","overlayStyle","closeOnPopstate"];var Ve=Z({name:Le,props:{show:Boolean,loop:v,images:y(),minZoom:g(1/3),maxZoom:g(3),overlay:v,vertical:Boolean,closeable:Boolean,showIndex:v,className:f,closeIcon:m("clear"),transition:String,beforeClose:Function,doubleScale:v,overlayClass:f,overlayStyle:Object,swipeDuration:g(300),startPosition:g(0),showIndicators:Boolean,closeOnPopstate:v,closeOnClickImage:v,closeOnClickOverlay:v,closeIconPosition:m("top-right"),teleport:[String,Object]},emits:["scale","close","closed","change","longPress","update:show"],setup(e,{emit:a,slots:t}){const o=X(),i=X(),s=N({active:0,rootWidth:0,rootHeight:0,disableZoom:!1}),r=()=>{if(o.value){const e=u(o.value.$el);s.rootWidth=e.width,s.rootHeight=e.height,o.value.resize()}},c=e=>a("scale",e),n=e=>a("update:show",e),d=()=>{C(e.beforeClose,{args:[s.active],done:()=>n(!1)})},p=e=>{e!==s.active&&(s.active=e,a("change",e))},m=()=>{if(e.showIndex)return W("div",{class:Ue("index")},[t.index?t.index({index:s.active}):`${s.active+1} / ${e.images.length}`])},v=()=>{if(t.cover)return W("div",{class:Ue("cover")},[t.cover()])},g=()=>{s.disableZoom=!0},f=()=>{s.disableZoom=!1},y=()=>{if(e.closeable)return W(x,{role:"button",name:e.closeIcon,class:[Ue("close-icon",e.closeIconPosition),S],onClick:d},null)},z=()=>a("closed"),_=(e,a)=>{var t;return null==(t=o.value)?void 0:t.swipeTo(e,a)};return l({resetScale:()=>{var e;null==(e=i.value)||e.resetScale()},swipeTo:_}),K(r),H([w,k],r),H(()=>e.startPosition,e=>p(+e)),H(()=>e.show,t=>{const{images:o,startPosition:l}=e;t?(p(+l),q(()=>{r(),_(+l,{immediate:!0})})):a("close",{index:s.active,url:o[s.active]})}),()=>W(b,E({class:[Ue(),e.className],overlayClass:[Ue("overlay"),e.overlayClass],onClosed:z,"onUpdate:show":n},h(e,De)),{default:()=>[y(),W(Me,{ref:o,lazyRender:!0,loop:e.loop,class:Ue("swipe"),vertical:e.vertical,duration:e.swipeDuration,initialSwipe:e.startPosition,showIndicators:e.showIndicators,indicatorColor:"white",onChange:p,onDragEnd:f,onDragStart:g},{default:()=>[e.images.map((o,l)=>W(Pe,{ref:e=>{l===s.active&&(i.value=e)},src:o,show:e.show,active:s.active,maxZoom:e.maxZoom,minZoom:e.minZoom,rootWidth:s.rootWidth,rootHeight:s.rootHeight,disableZoom:s.disableZoom,doubleScale:e.doubleScale,closeOnClickImage:e.closeOnClickImage,closeOnClickOverlay:e.closeOnClickOverlay,vertical:e.vertical,onScale:c,onClose:d,onLongPress:()=>a("longPress",{index:l})},{image:t.image}))]}),m(),v()]})}});let je;const $e={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,vertical:!1,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,doubleScale:!0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeOnClickOverlay:!0,closeIconPosition:"top-right"};const Te=(e,a=0)=>{if(z)return je||({instance:je}=I({setup(){const{state:e,toggle:a}=B(),t=()=>{e.images=[]};return()=>W(Ve,E(e,{onClosed:t,"onUpdate:show":a}),null)}})),e=Array.isArray(e)?{images:e,startPosition:a}:e,je.open(_({},$e,e)),je};R(Ve);const[Ze,Ne,Xe]=i("uploader");function Ye(e,a){return new Promise(t=>{if("file"===a)return void t();const o=new FileReader;o.onload=e=>{t(e.target.result)},"dataUrl"===a?o.readAsDataURL(e):"text"===a&&o.readAsText(e)})}function He(e,a){return M(e).some(e=>!!e.file&&(F(a)?a(e.file):e.file.size>+a))}const We=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg|avif)/i;function Ke(e){return!!e.isImage||(e.file&&e.file.type?0===e.file.type.indexOf("image"):e.url?(a=e.url,We.test(a)):"string"==typeof e.content&&0===e.content.indexOf("data:image"));var a}var Ee=Z({props:{name:d,item:a(Object),index:Number,imageFit:String,lazyLoad:Boolean,deletable:Boolean,reupload:Boolean,previewSize:[Number,String,Array],beforeDelete:Function},emits:["delete","preview","reupload"],setup(e,{emit:a,slots:t}){const o=()=>{const{status:a,message:t}=e.item;if("uploading"===a||"failed"===a){const e="failed"===a?W(x,{name:"close",class:Ne("mask-icon")},null):W(n,{class:Ne("loading")},null),o=A(t)&&""!==t;return W("div",{class:Ne("mask")},[e,o&&W("div",{class:Ne("mask-message")},[t])])}},l=t=>{const{name:o,item:l,index:i,beforeDelete:s}=e;t.stopPropagation(),C(s,{args:[l,{name:o,index:i}],done:()=>a("delete")})},i=()=>a("preview"),s=()=>a("reupload"),r=()=>{if(e.deletable&&"uploading"!==e.item.status){const e=t["preview-delete"];return W("div",{role:"button",class:Ne("preview-delete",{shadow:!e}),tabindex:0,"aria-label":Xe("delete"),onClick:l},[e?e():W(x,{name:"cross",class:Ne("preview-delete-icon")},null)])}},c=()=>{if(t["preview-cover"]){const{index:a,item:o}=e;return W("div",{class:Ne("preview-cover")},[t["preview-cover"](_({index:a},o))])}},d=()=>{const{item:a,lazyLoad:t,imageFit:o,previewSize:l,reupload:r}=e;return Ke(a)?W(Be,{fit:o,src:a.objectUrl||a.content||a.url,class:Ne("preview-image"),width:Array.isArray(l)?l[0]:l,height:Array.isArray(l)?l[1]:l,lazyLoad:t,onClick:r?s:i},{default:c}):W("div",{class:Ne("file"),style:O(e.previewSize)},[W(x,{class:Ne("file-icon"),name:"description"},null),W("div",{class:[Ne("file-name"),"van-ellipsis"]},[a.file?a.file.name:a.url]),c()])};return()=>W("div",{class:Ne("preview")},[d(),o(),r()])}});const qe=R(Z({name:Ze,props:{name:g(""),accept:m("image/*"),capture:String,multiple:Boolean,disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,maxCount:g(1/0),imageFit:m("cover"),resultType:m("dataUrl"),uploadIcon:m("photograph"),uploadText:String,deletable:v,reupload:Boolean,afterRead:Function,showUpload:v,modelValue:y(),beforeRead:Function,beforeDelete:Function,previewSize:[Number,String,Array],previewImage:v,previewOptions:Object,previewFullImage:v,maxSize:{type:[Number,String,Function],default:1/0}},emits:["delete","oversize","clickUpload","closePreview","clickPreview","clickReupload","update:modelValue"],setup(e,{emit:a,slots:t}){const o=X(),i=[],s=X(-1),r=X(!1),c=(a=e.modelValue.length)=>({name:e.name,index:a}),n=()=>{o.value&&(o.value.value="")},d=t=>{if(n(),He(t,e.maxSize)){if(!Array.isArray(t))return void a("oversize",t,c());{const o=function(e,a){const t=[],o=[];return e.forEach(e=>{He(e,a)?o.push(e):t.push(e)}),{valid:t,invalid:o}}(t,e.maxSize);if(t=o.valid,a("oversize",o.invalid,c()),!t.length)return}}if(t=N(t),s.value>-1){const o=[...e.modelValue];o.splice(s.value,1,t),a("update:modelValue",o),s.value=-1}else a("update:modelValue",[...e.modelValue,...M(t)]);e.afterRead&&e.afterRead(t,c())},u=a=>{const{maxCount:t,modelValue:o,resultType:l}=e;if(Array.isArray(a)){const e=+t-o.length;a.length>e&&(a=a.slice(0,e)),Promise.all(a.map(e=>Ye(e,l))).then(e=>{const t=a.map((a,t)=>{const o={file:a,status:"",message:"",objectUrl:URL.createObjectURL(a)};return e[t]&&(o.content=e[t]),o});d(t)})}else Ye(a,l).then(e=>{const t={file:a,status:"",message:"",objectUrl:URL.createObjectURL(a)};e&&(t.content=e),d(t)})},p=a=>{const{files:t}=a.target;if(e.disabled||!t||!t.length)return;const o=1===t.length?t[0]:[].slice.call(t);if(e.beforeRead){const a=e.beforeRead(o,c());if(!a)return void n();if(L(a))return void a.then(e=>{u(e||o)}).catch(n)}u(o)};let m;const v=()=>a("closePreview"),g=e=>{r.value=!0,s.value=e,q(()=>S())},f=()=>{r.value||(s.value=-1),r.value=!1},y=(o,l)=>{const s=["imageFit","deletable","reupload","previewSize","beforeDelete"],r=_(h(e,s),h(o,s,!0));return W(Ee,E({item:o,index:l,onClick:()=>a(e.reupload?"clickReupload":"clickPreview",o,c(l)),onDelete:()=>((t,o)=>{const l=e.modelValue.slice(0);l.splice(o,1),a("update:modelValue",l),a("delete",t,c(o))})(o,l),onPreview:()=>(a=>{if(e.previewFullImage){const t=e.modelValue.filter(Ke),o=t.map(e=>(e.objectUrl&&!e.url&&"failed"!==e.status&&(e.url=e.objectUrl,i.push(e.url)),e.url)).filter(Boolean);m=Te(_({images:o,startPosition:t.indexOf(a),onClose:v},e.previewOptions))}})(o),onReupload:()=>g(l)},h(e,["name","lazyLoad"]),r),h(t,["preview-cover","preview-delete"]))},b=()=>{if(e.previewImage)return e.modelValue.map(y)},w=e=>a("clickUpload",e),k=()=>{const a=e.modelValue.length<+e.maxCount,l=e.readonly?null:W("input",{ref:o,type:"file",class:Ne("input"),accept:e.accept,capture:e.capture,multiple:e.multiple&&-1===s.value,disabled:e.disabled,onChange:p,onClick:f},null);return t.default?Q(W("div",{class:Ne("input-wrapper"),onClick:w},[t.default(),l]),[[J,a]]):Q(W("div",{class:Ne("upload",{readonly:e.readonly}),style:O(e.previewSize),onClick:w},[W(x,{name:e.uploadIcon,class:Ne("upload-icon")},null),e.uploadText&&W("span",{class:Ne("upload-text")},[e.uploadText]),l]),[[J,e.showUpload&&a]])},S=()=>{o.value&&!e.disabled&&o.value.click()};return G(()=>{i.forEach(e=>URL.revokeObjectURL(e))}),l({chooseFile:S,reuploadFile:g,closeImagePreview:()=>{m&&m.close()}}),P(()=>e.modelValue),()=>W("div",{class:Ne()},[W("div",{class:Ne("wrapper",{disabled:e.disabled})},[b(),k()])])}})),Ge=ee("audio",()=>{const e=X(null),a=X([]),t=X([]),o=X(null),l=e=>a.value.filter(a=>a.category===e);return{selectedSpeaker:e,speakers:a,categories:t,playingAudio:o,setSelectedSpeaker:a=>{e.value=a},clearSelectedSpeaker:()=>{e.value=null},setSpeakers:e=>{a.value=e},setCategories:e=>{t.value=e},previewSpeaker:async e=>{if(o.value&&(o.value.pause(),o.value=null),e.sampleAudio)try{const a=new Audio(e.sampleAudio);o.value=a,await a.play(),a.onended=()=>{o.value=null}}catch(a){o.value=null}},stopPreview:()=>{o.value&&(o.value.pause(),o.value=null)},getSpeakersByCategory:l,getDefaultSpeakers:()=>{if(t.value.length>0){const e=t.value[0];return l(e?.id)}return a.value}}}),Qe={class:"avatar"},Je=["src","alt"],ea={key:1,class:"avatar-placeholder"},aa={class:"info"},ta={class:"name-section"},oa={class:"name"},la={class:"description"},ia={class:"meta"},sa={class:"language"},ra={class:"gender"},ca={key:0,class:"selection-indicator"},na=Z({__name:"sdkwork-voice-speaker-category-item",props:{speaker:{},active:{type:Boolean},themeMode:{default:"auto"}},emits:["select"],setup(e,{emit:a}){const t=e,o=a,l=Ge(),i=Y(()=>"dark"===t.themeMode||"light"!==t.themeMode&&(!("undefined"==typeof window||!window.matchMedia)&&window.matchMedia("(prefers-color-scheme: dark)").matches)),s=Y(()=>i.value?"voice-item--dark":"voice-item--light"),r=e=>e.charAt(0).toUpperCase(),c=()=>{o("select",t.speaker)},n=()=>{l.previewSpeaker(t.speaker)};return(a,t)=>{const o=x;return te(),ae("div",{class:oe(["voice-item",[{active:e.active},s.value]]),onClick:c},[le("div",Qe,[e.speaker.avatar?(te(),ae("img",{key:0,src:e.speaker.avatar,alt:e.speaker.name},null,8,Je)):(te(),ae("div",ea,se(r(e.speaker.name)),1))]),le("div",aa,[le("div",ta,[le("span",oa,se(e.speaker.name),1),le("div",{class:"preview-btn",onClick:re(n,["stop"])},[W(o,{name:"play-circle",size:"18"})])]),le("div",la,se(e.speaker.description),1),le("div",ia,[le("span",sa,se(e.speaker.language),1),le("span",ra,se((l=e.speaker.gender,"male"===l?"男声":"女声")),1)])]),e.active?(te(),ae("div",ca,[W(o,{name:"success",size:"16",color:"#1989fa"})])):ie("",!0)],2);var l}}}),da=U(na,[["__scopeId","data-v-2400f870"]]),ua={class:"default-category"},pa={class:"category-name"},ma={key:0,class:"category-count"},va=U(Z({__name:"CategoryItem",props:{category:{},index:{},active:{type:Boolean},categoryKey:{default:"id"},categoryNameField:{default:"name"},categoryCountField:{default:"count"},themeMode:{default:"auto"}},emits:["select"],setup(e,{emit:a}){const t=e,o=a,l=Y(()=>"dark"===t.themeMode||"light"!==t.themeMode&&(!("undefined"==typeof window||!window.matchMedia)&&window.matchMedia("(prefers-color-scheme: dark)").matches)),i=Y(()=>l.value?"category-item--dark":"category-item--light"),s=e=>e[t.categoryCountField]||"",r=()=>{o("select",t.category)};return(a,o)=>(te(),ae("div",{class:oe(["category-item",[{active:e.active},i.value]]),onClick:r},[ce(a.$slots,"default",{category:e.category,index:e.index},()=>{return[le("div",ua,[le("div",pa,se((a=e.category,a[t.categoryNameField]||"未知分类")),1),s(e.category)?(te(),ae("div",ma,se(s(e.category)),1)):ie("",!0)])];var a},!0)],2))}}),[["__scopeId","data-v-9af08e01"]]),ga={class:"main-content"},fa={key:0,class:"category-sidebar"},ya={key:0,class:"category-loading"},ha={key:1,class:"category-list"},ba={key:2,class:"data-section"},wa=U(Z({__name:"sdkwork-api-category-list",props:{api:{type:Function,default:void 0},service:{default:void 0},params:{default:()=>({})},pageableParams:{default:()=>({})},selectable:{type:Boolean,default:xe.selectable},deletable:{type:Boolean,default:xe.deletable},searchable:{type:Boolean,default:xe.searchable},pageSize:{default:xe.pageSize},itemKey:{default:xe.itemKey},itemTitleField:{default:xe.itemTitleField},itemDescriptionField:{default:xe.itemDescriptionField},topSpacing:{default:xe.topSpacing},leftSpacing:{default:xe.leftSpacing},rightSpacing:{default:xe.rightSpacing},categorys:{default:()=>[]},categoryApi:{},categoryKey:{default:xe.categoryKey},categoryNameField:{default:xe.categoryNameField},categoryCountField:{default:xe.categoryCountField},defaultCategoryId:{},selectionMode:{default:xe.selectionMode},showBorderBottom:{type:Boolean},borderBottomLeftOffset:{},showNoMoreData:{type:Boolean},themeMode:{default:xe.themeMode},minSize:{},itemGap:{},fixed:{type:Boolean},buffer:{},bufferTop:{},bufferBottom:{},horizontal:{type:Boolean},scrollDistance:{},fixSelection:{type:Boolean},start:{},offset:{},listStyle:{},listClass:{},itemStyle:{},itemClass:{},renderControl:{}},emits:["select-category","select","delete","search","reach-top","reach-bottom","scroll","item-resize","range-update","load"],setup(e,{expose:a,emit:t}){const o=e,l=t,i=X([]),s=X(!1),r=X([]),c=X(null),n=Y(()=>"dark"===o.themeMode||"light"!==o.themeMode&&(!("undefined"==typeof window||!window.matchMedia)&&window.matchMedia("(prefers-color-scheme: dark)").matches)),d=Y(()=>n.value?"api-category-list--dark":"api-category-list--light"),u=X();let p=null;const{dataList:m,currentPage:v,loading:g,loadingMore:f,hasMore:y,loadData:h,onRefresh:b}=Ce({api:o.api,service:o.service,params:(()=>{const e={...o.params};return c.value&&(e.categoryId=x(c.value,-1)),e})(),pageableParams:o.pageableParams,pageSize:o.pageSize,autoLoad:!1}),w=Y(()=>i.value.length>0),k=Y(()=>({"padding-top":"number"==typeof o.topSpacing?`${o.topSpacing}px`:o.topSpacing,"padding-left":"number"==typeof o.leftSpacing?`${o.leftSpacing}px`:o.leftSpacing,"padding-right":"number"==typeof o.rightSpacing?`${o.rightSpacing}px`:o.rightSpacing})),S=(e,a)=>e[o.itemKey]||a,x=(e,a)=>e[o.categoryKey]||a,C=e=>!!c.value&&x(e,-1)===x(c.value,-1),z=e=>r.value.some(a=>S(a,-1)===S(e,-1)),_=e=>{l("search",e),h(0)},I=e=>{c.value=e,l("select-category",e),h(0)},B=e=>{if(o.selectable){const a=r.value.findIndex(a=>S(a,-1)===S(e,-1));a>-1?r.value.splice(a,1):"single"===o.selectionMode?r.value=[e]:r.value.push(e)}l("select",e)},R=e=>{l("delete",e)};return H(()=>o.params,()=>{h(0)},{deep:!0}),H(()=>o.pageSize,()=>{h(0)}),H(()=>o.categorys,()=>{o.categorys&&o.categorys.length>0&&(i.value=o.categorys)},{deep:!0}),K(()=>{(async()=>{if(!s.value)try{if(s.value=!0,o.categoryApi?i.value=await o.categoryApi():o.categorys&&o.categorys.length>0&&(i.value=o.categorys),o.defaultCategoryId&&i.value.length>0){const e=i.value.find(e=>x(e,-1)===o.defaultCategoryId);e&&(c.value=e)}else i.value.length>0&&(c.value=i.value[0])}catch(e){}finally{s.value=!1}})().then(()=>{h(0)}),q(()=>{u.value?.$el&&(p=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&y.value&&!f.value&&!g.value&&h(v.value+1,!0)})},{root:null,rootMargin:"0px",threshold:.1}),p.observe(u.value.$el))})}),ne(()=>{p&&(p.disconnect(),p=null)}),a({refresh:()=>h(0),loadMore:()=>h(v.value+1,!0),getData:()=>m.value,getSelectedItems:()=>r.value,clearSelected:()=>{r.value=[]},setSelectedItems:e=>{"single"===o.selectionMode&&e.length>1?r.value=[e[0]]:r.value=e},getCategories:()=>i.value,getSelectedCategory:()=>c.value,setSelectedCategory:e=>{c.value=e,h(0)}}),(a,t)=>{const l=we;return te(),ae("div",{class:oe(["sdkwork-api-category-list",d.value])},[e.searchable?(te(),de(ze,{key:0,searchable:e.searchable,onSearch:_},null,8,["searchable"])):ie("",!0),le("div",ga,[w.value?(te(),ae("div",fa,[s.value?(te(),ae("div",ya,[...t[1]||(t[1]=[le("div",{class:"loading-spinner"},null,-1),le("span",null,"加载分类中...",-1)])])):(te(),ae("div",ha,[(te(!0),ae(ue,null,pe(i.value,(t,o)=>(te(),de(va,{key:x(t,o),category:t,index:o,active:C(t),"category-key":e.categoryKey,"category-name-field":e.categoryNameField,"category-count-field":e.categoryCountField,onSelect:I},{default:me(({category:e,index:t})=>[ce(a.$slots,"category",E({ref_for:!0},{category:e,index:t}),void 0,!0)]),_:3},8,["category","index","active","category-key","category-name-field","category-count-field"]))),128))]))])):ie("",!0),le("div",{class:oe(["content-list",{"with-sidebar":w.value}])},[W(l,{modelValue:ve(g),"onUpdate:modelValue":t[0]||(t[0]=e=>ge(g)?g.value=e:null),onRefresh:ve(b)},{default:me(()=>[le("div",{class:"list-content",style:fe(k.value)},[ve(g)&&!ve(m).length?(te(),de(Ie,{key:0},{default:me(({loading:e})=>[ce(a.$slots,"loading",ye(he({loading:e})),void 0,!0)]),_:3})):ve(g)||ve(m).length?(te(),ae("div",ba,[ce(a.$slots,"header",{},void 0,!0),(te(!0),ae(ue,null,pe(ve(m),(t,l)=>(te(),de(_e,{key:S(t,l),item:t,index:l,selectable:e.selectable,deletable:e.deletable,"is-selected":z(t),"item-key":e.itemKey,"item-title-field":e.itemTitleField,"item-description-field":e.itemDescriptionField,"show-border-bottom":o.showBorderBottom,"border-bottom-left-offset":o.borderBottomLeftOffset,onSelect:B,onDelete:R},{default:me(({item:e,index:t,selected:o})=>[ce(a.$slots,"default",{item:e,index:t,selected:o},void 0,!0)]),_:3},8,["item","index","selectable","deletable","is-selected","item-key","item-title-field","item-description-field","show-border-bottom","border-bottom-left-offset"]))),128)),ce(a.$slots,"footer",{},void 0,!0),W(Se,{"has-more":ve(y),"loading-more":ve(f),"data-list":ve(m),ref_key:"loadMoreSectionRef",ref:u},null,8,["has-more","loading-more","data-list"])])):(te(),de(ke,{key:1},{default:me(({empty:e})=>[ce(a.$slots,"empty",ye(he({empty:e})),void 0,!0)]),_:3}))],4)]),_:3},8,["modelValue","onRefresh"])],2)])],2)}}}),[["__scopeId","data-v-9f6a2c55"]]),ka={class:"sdkwork-voice-clone-record"},Sa={class:"text-section"},xa={class:"text-content"},Ca={class:"bottom-section"},za={class:"record-tip-section"},_a={key:0,class:"record-tip"},Ia={key:1,class:"record-tip"},Ba={class:"action-row"},Ra={class:"record-section"},Ma={key:0,class:"upload-section"},Fa=U(Z({__name:"sdkwork-voice-clone-record",props:{text:{default:"请朗读这段文字：欢迎使用语音克隆功能，请清晰地朗读这段文字。"},uploadable:{type:Boolean,default:!0},recordable:{type:Boolean,default:!0},accept:{default:"audio/*"},maxSize:{default:10},disabled:{type:Boolean,default:!1}},emits:["upload","record","clone"],setup(e,{emit:a}){const t=e,o=a,l=N({isRecording:!1,recordDuration:0}),i=new D;K(()=>{(async()=>{try{await i.initialize()}catch(e){$("音频录制器初始化失败")}})()});const s=Y(()=>{const e=Math.floor(l.recordDuration/60),a=l.recordDuration%60;return`${e.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`}),r=e=>{const a=Array.isArray(e)?e[0]:e;return a.file?.type?.startsWith("audio/")?a.file?.size>1024*t.maxSize*1024?($(`文件大小不能超过${t.maxSize}MB`),!1):(o("upload",a.file),$("音频上传成功"),!0):($("请上传音频文件"),!1)},c=async()=>{try{if(!T())return void $("您的浏览器不支持录音功能");await i.startRecordToFile(),l.isRecording=!0;setInterval(()=>{l.recordDuration=i.getRecordDuration()},1e3);$("开始录音...")}catch(e){$("无法访问麦克风，请检查权限设置")}},n=async()=>{try{if(i.getRecordingState()){const e=await i.stopRecord();if(l.isRecording=!1,e){new File([e],"recorded_audio.webm",{type:"audio/webm"});o("record",e),$("录音完成")}}}catch(e){$("停止录音失败")}};return ne(()=>{i.dispose()}),(a,t)=>{const o=V,i=qe;return te(),ae("div",ka,[t[2]||(t[2]=le("div",{class:"instruction-section"},[le("div",{class:"instruction-text"},"请朗读以下文字内容")],-1)),le("div",Sa,[t[0]||(t[0]=le("div",{class:"instruction-tip"},"录制时的语气和情感也会被克隆到，请根据实际情况进行朗读",-1)),le("div",xa,se(e.text),1)]),le("div",Ca,[le("div",za,[l.isRecording?(te(),ae("div",Ia," 正在录音中... "+se(s.value),1)):(te(),ae("div",_a," 点击开始录制您的语音 "))]),le("div",Ba,[le("div",Ra,[l.isRecording?(te(),de(o,{key:1,type:"danger",onClick:n,class:"record-btn recording",round:""},{default:me(()=>[W(ve(j),{icon:"mdi:pause-circle",width:"32",height:"32"})]),_:1})):(te(),de(o,{key:0,type:"primary",disabled:e.disabled,onClick:c,class:"record-btn",round:""},{default:me(()=>[W(ve(j),{icon:"mdi:microphone",width:"32",height:"32"})]),_:1},8,["disabled"]))]),e.uploadable?(te(),ae("div",Ma,[W(i,{disabled:e.disabled,"after-read":r,"max-count":1,accept:e.accept,class:"audio-uploader"},{default:me(()=>[W(o,{type:"default",disabled:e.disabled,class:"upload-btn",plain:""},{default:me(()=>[W(ve(j),{icon:"mdi:upload",width:"16",height:"16"}),t[1]||(t[1]=be(" 上传音频 ",-1))]),_:1},8,["disabled"])]),_:1},8,["disabled","accept"])])):ie("",!0)])])])}}}),[["__scopeId","data-v-fa44bc24"]]),Aa={class:"voice-clone-preview"},Oa={class:"header-section"},Pa={class:"preview-section"},La={class:"preview-buttons"},Ua={class:"naming-section"},Da={class:"privacy-section"},Va={class:"privacy-notice"},ja={class:"action-section"},$a=U(Z({__name:"sdkwork-voice-clone-preview",props:{audioData:{}},emits:["save","back"],setup(e,{emit:a}){const t=e,o=a,l=X(""),i=()=>{$("播放中文试听")},s=()=>{$("播放英文试听")},r=()=>{l.value.trim()?(o("save",l.value.trim(),t.audioData),$("音色保存成功")):$("请输入音色名称")};return(e,a)=>(te(),ae("div",Aa,[le("div",Oa,[W(ve(V),{type:"default",size:"small",onClick:a[0]||(a[0]=a=>e.$emit("back")),class:"back-btn",plain:""},{default:me(()=>[W(ve(j),{icon:"mdi:arrow-left",class:"btn-icon"}),a[2]||(a[2]=be(" 返回录制 ",-1))]),_:1})]),le("div",Pa,[a[5]||(a[5]=le("h3",{class:"section-title"},"试听音色",-1)),le("div",La,[W(ve(V),{type:"primary",size:"large",class:"preview-btn",onClick:i},{default:me(()=>[W(ve(j),{icon:"mdi:volume-high",class:"btn-icon"}),a[3]||(a[3]=be(" 中文试听 ",-1))]),_:1}),W(ve(V),{type:"primary",size:"large",class:"preview-btn",onClick:s},{default:me(()=>[W(ve(j),{icon:"mdi:volume-high",class:"btn-icon"}),a[4]||(a[4]=be(" 英文试听 ",-1))]),_:1})])]),le("div",Ua,[a[6]||(a[6]=le("h3",{class:"section-title"},"音色命名",-1)),W(ve(Fe),{modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value=e),placeholder:"请输入音色名称",clearable:"",class:"name-input"},null,8,["modelValue"])]),le("div",Da,[le("div",Va,[W(ve(j),{icon:"mdi:shield-check",class:"privacy-icon"}),a[7]||(a[7]=le("span",{class:"privacy-text"},"安全和隐私提示：您的音频数据将受到严格保护，仅用于音色克隆目的",-1))])]),le("div",ja,[W(ve(V),{type:"success",size:"large",block:"",disabled:!l.value,onClick:r,class:"save-btn"},{default:me(()=>[W(ve(j),{icon:"mdi:content-save",class:"btn-icon"}),a[8]||(a[8]=be(" 保存音色 ",-1))]),_:1},8,["disabled"])])]))}}),[["__scopeId","data-v-62227006"]]),Ta={class:"sdkwork-voice-clone"},Za=U(Z({__name:"sdkwork-voice-clone",props:{text:{default:"请朗读这段文字：欢迎使用语音克隆功能，请清晰地朗读这段文字。"},uploadable:{type:Boolean,default:!0},recordable:{type:Boolean,default:!0},accept:{default:"audio/*"},maxSize:{default:10},disabled:{type:Boolean,default:!1}},emits:["upload","record","clone","save"],setup(e,{emit:a}){const t=a,o=X("record"),l=X(null),i=e=>{e&&(l.value=e),o.value="preview"},s=()=>{o.value="record",l.value=null},r=(e,a)=>{t("save",e,a),$("音色保存成功")},c=e=>{t("upload",e),i(e)},n=e=>{t("record",e),i(e)};return ne(()=>{l.value&&"string"==typeof l.value&&URL.revokeObjectURL(l.value)}),(a,t)=>(te(),ae("div",Ta,["record"===o.value?(te(),de(Fa,{key:0,text:e.text,uploadable:e.uploadable,recordable:e.recordable,accept:e.accept,"max-size":e.maxSize,disabled:e.disabled,onUpload:c,onRecord:n,onClone:t[0]||(t[0]=e=>a.$emit("clone"))},null,8,["text","uploadable","recordable","accept","max-size","disabled"])):(te(),de($a,{key:1,"audio-data":l.value,onSave:r,onBack:s},null,8,["audio-data"]))]))}}),[["__scopeId","data-v-fa46d075"]]),Na={class:"voice-clone-popup"},Xa={class:"popup-header"},Ya={class:"header-content"},Ha={class:"popup-title"},Wa={class:"popup-content"},Ka=U(Z({__name:"sdkwork-voice-clone-popup",props:{modelValue:{type:Boolean,default:!1},title:{default:"语音克隆"},height:{default:"100dvh"},confirmText:{default:"开始克隆"},text:{default:"请朗读这段文字：欢迎使用语音克隆功能，请清晰地朗读这段文字。"},uploadable:{type:Boolean,default:!0},recordable:{type:Boolean,default:!0},accept:{default:"audio/*"},maxSize:{default:10},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","confirm","close","upload","record","clone"],setup(a,{emit:t}){const o=a,l=t,i=X(o.modelValue),s=X(null),r=X(null);H(()=>o.modelValue,e=>{i.value=e}),H(i,e=>{l("update:modelValue",e),e||l("close")});const c=()=>{i.value=!1,l("close")},n=e=>{s.value=e,r.value=null,l("upload",e)},d=e=>{r.value=e,s.value=null,l("record",e)},u=()=>{l("clone")};return(t,o)=>{const l=x,s=e;return te(),de(s,{show:i.value,"onUpdate:show":o[0]||(o[0]=e=>i.value=e),position:"bottom",style:fe({height:a.height}),round:"","close-on-click-overlay":!1},{default:me(()=>[le("div",Na,[le("div",Xa,[le("div",Ya,[le("h3",Ha,se(a.title),1),W(l,{name:"cross",class:"close-icon",onClick:c})])]),le("div",Wa,[W(Za,{text:a.text,uploadable:a.uploadable,recordable:a.recordable,accept:a.accept,"max-size":a.maxSize,disabled:a.disabled,onUpload:n,onRecord:d,onClone:u},null,8,["text","uploadable","recordable","accept","max-size","disabled"])])])]),_:1},8,["show","style"])}}}),[["__scopeId","data-v-22271de4"]]),Ea=[{id:1,name:"小爱同学",description:"甜美可爱的女声，适合日常对话",avatar:"",category:"female",language:"中文",gender:"female",sampleAudio:""},{id:2,name:"小度",description:"清晰自然的男声，适合播报新闻",avatar:"",category:"male",language:"中文",gender:"male",sampleAudio:""},{id:3,name:"Siri",description:"标准美式英语发音，适合国际交流",avatar:"",category:"female",language:"英语",gender:"female",sampleAudio:""},{id:4,name:"Alex",description:"深沉有力的男声，适合朗读文学作品",avatar:"",category:"male",language:"英语",gender:"male",sampleAudio:""},{id:5,name:"樱花",description:"温柔细腻的女声，适合儿童故事",avatar:"",category:"female",language:"中文",gender:"female",sampleAudio:""},{id:6,name:"晓晓",description:"年轻活力的女声，适合娱乐内容",avatar:"",category:"female",language:"中文",gender:"female",sampleAudio:""},{id:7,name:"云希",description:"知性优雅的女声，适合知识分享",avatar:"",category:"female",language:"中文",gender:"female",sampleAudio:""},{id:8,name:"逍遥",description:"沉稳大气的男声，适合商务场景",avatar:"",category:"male",language:"中文",gender:"male",sampleAudio:""}],qa=[{id:"all",name:"全部",count:Ea.length},{id:"female",name:"女声",count:Ea.filter(e=>"female"===e.gender).length},{id:"male",name:"男声",count:Ea.filter(e=>"male"===e.gender).length},{id:"chinese",name:"中文",count:Ea.filter(e=>"中文"===e.language).length},{id:"english",name:"英语",count:Ea.filter(e=>"英语"===e.language).length}],Ga=async e=>{await new Promise(e=>setTimeout(e,300));let a=Ea;if(e.categoryId&&"all"!==e.categoryId&&(a=Ea.filter(a=>a.category===e.categoryId||a.language===e.categoryId)),e.keyword){const t=e.keyword.toLowerCase();a=a.filter(e=>e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t))}const t=e.page||0,o=e.size||10,l=t*o,i=l+o;return{content:a.slice(l,i),totalElements:a.length,totalPages:Math.ceil(a.length/o),number:t,size:o,first:0===t,last:i>=a.length}},Qa=async()=>(await new Promise(e=>setTimeout(e,200)),qa),Ja={class:"voice-category-item"},et={class:"category-name"},at={class:"voice-empty"},tt={class:"voice-loading"},ot=U(Z({__name:"sdkwork-voice-speaker-category-list",props:{api:{},params:{default:()=>({})},searchable:{type:Boolean,default:!0},selectable:{type:Boolean,default:!0},pageSize:{default:20},categoryApi:{},categorys:{default:()=>[]},categoryKey:{default:"id"},categoryNameField:{default:"name"},categoryCountField:{default:"count"},defaultCategoryId:{},selectedSpeakerId:{},showCloneButton:{type:Boolean,default:!0},themeMode:{default:"auto"}},emits:["select","search","select-category","load","clone"],setup(e,{expose:a,emit:t}){const o=e,l=t,i=Ge(),s=X(!1),r=Y(()=>"dark"===o.themeMode||"light"!==o.themeMode&&(!("undefined"==typeof window||!window.matchMedia)&&window.matchMedia("(prefers-color-scheme: dark)").matches)),c=Y(()=>r.value?"voice-list--dark":"voice-list--light"),d=Y(()=>o.api||Ga),u=Y(()=>o.categoryApi||Qa),p=Y(()=>o.categorys&&o.categorys.length>0?o.categorys:qa),m=e=>{o.selectable&&i.setSelectedSpeaker(e),l("select",e)},v=e=>{l("search",e)},g=e=>{l("select-category",e)},f=e=>{l("load",e)},y=e=>{s.value=!1,l("clone",e)},h=()=>{s.value=!1};return a({refresh:()=>{},getSelectedSpeaker:()=>i.selectedSpeaker,setSelectedSpeaker:e=>{i.setSelectedSpeaker(e)}}),(a,t)=>{const o=da,l=x,i=n;return te(),ae("div",{class:oe(["sdkwork-voice-speaker-category-list",c.value])},[W(wa,{api:d.value,params:e.params,searchable:e.searchable,selectable:e.selectable,"page-size":e.pageSize,"category-api":u.value,categorys:p.value,"category-key":e.categoryKey,"category-name-field":e.categoryNameField,"category-count-field":e.categoryCountField,"default-category-id":e.defaultCategoryId,"theme-mode":e.themeMode,onSelect:m,onSearch:v,onSelectCategory:g,onLoad:f},{default:me(({item:a,selected:l})=>[W(o,{speaker:a,active:l,"theme-mode":e.themeMode,onSelect:t[0]||(t[0]=e=>{(e=>{m(e)})(e)})},null,8,["speaker","active","theme-mode"])]),category:me(({category:e})=>[le("div",Ja,[le("span",et,se(e.name),1)])]),empty:me(()=>[le("div",at,[W(l,{name:"music",size:"48",color:"#ccc"}),t[2]||(t[2]=le("div",{class:"empty-text"},"暂无发音人",-1))])]),loading:me(()=>[le("div",tt,[W(i,{size:"24px"}),t[3]||(t[3]=le("span",null,"加载发音人中...",-1))])]),_:1},8,["api","params","searchable","selectable","page-size","category-api","categorys","category-key","category-name-field","category-count-field","default-category-id","theme-mode"]),W(Ka,{show:s.value,"onUpdate:show":t[1]||(t[1]=e=>s.value=e),onConfirm:y,onClose:h},null,8,["show"])],2)}}}),[["__scopeId","data-v-32037512"]]),lt={class:"voice-list-popup"},it={class:"popup-content"},st={class:"popup-footer"},rt=U(Z({__name:"sdkwork-voice-speaker-category-list-popup",props:{modelValue:{type:Boolean,default:!1},title:{default:"选择发音人"},height:{default:"70vh"},confirmText:{default:"确认"},api:{},params:{default:()=>({})},categoryApi:{},categorys:{default:()=>[]},selectedSpeakerId:{},themeMode:{default:"auto"}},emits:["update:modelValue","confirm","close","select","search","load"],setup(a,{emit:t}){const o=a,l=t,i=X(o.modelValue),s=X(null);H(()=>o.modelValue,e=>{i.value=e}),H(i,e=>{l("update:modelValue",e),e||l("close")});const r=()=>{s.value&&(l("confirm",s.value),i.value=!1)},c=e=>{s.value=e,l("select",e)},n=e=>{l("search",e)},d=e=>{l("load",e)};return(t,o)=>{const l=V,s=e;return te(),de(s,{show:i.value,"onUpdate:show":o[0]||(o[0]=e=>i.value=e),position:"bottom",style:fe({height:a.height}),round:"",closeable:"","close-on-click-overlay":!1,"theme-mode":a.themeMode,title:a.title},{default:me(()=>[le("div",lt,[le("div",it,[W(ot,{api:a.api,params:a.params,"category-api":a.categoryApi,categorys:a.categorys,"selected-speaker-id":a.selectedSpeakerId,"selection-mode":"single",onSelect:c,onSearch:n,onLoad:d},null,8,["api","params","category-api","categorys","selected-speaker-id"])]),le("div",st,[W(l,{type:"primary",size:"large",block:"",onClick:r,class:"confirm-btn"},{default:me(()=>[be(se(a.confirmText),1)]),_:1})])])]),_:1},8,["show","style","theme-mode","title"])}}}),[["__scopeId","data-v-f36c65d4"]]);export{rt as S,qe as U};
