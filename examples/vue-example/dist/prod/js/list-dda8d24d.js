import{I as e,L as t,B as a,_ as s,s as i,d as l,a as o}from"./index-2cafbb5e.js";/* empty css              */import{S as r}from"./sdkwork-api-list-be20b211.js";import{R as c}from"./index-c23b29bf.js";/* empty css              *//* empty css              */import{T as d}from"./index-4f03d337.js";/* empty css              */import{k as p,c as n,Q as u,R as g,S as m,j as v,a0 as h,a4 as y,$ as k,U as x,Z as f,a1 as P,F as b,Y as A,X as I,r as S,w as j,u as w,b as _}from"./vue-vendor-fce65f55.js";import{I as C}from"./index-a5403cf2.js";import{C as M}from"./index-44deb856.js";import"./utils-vendor-b5712723.js";import"./index-ead435a5.js";import"./index-6e9c758b.js";import"./use-tab-status-2f29a6cd.js";import"./shared-9d0b1b96.js";import"./sdkwork-search-bar-a4feada5.js";import"./sdkwork-icon-105dbc30.js";import"./index-17b6a864.js";import"./use-id-bc367f23.js";import"./ListItem-b5deca21.js";import"./use-refs-d05fb49f.js";import"./Checker-30102936.js";const B={class:"product-image"},z={key:0,class:"soldout-overlay"},L={key:1,class:"stock-warning"},D={class:"product-info"},F={class:"product-title"},T={class:"title-text"},$={key:0,class:"product-description"},V={key:1,class:"product-tags"},W={class:"product-meta"},X={key:0,class:"rating"},E={class:"rating-text"},G={key:1,class:"sales"},R={class:"product-price"},U={class:"current-price"},O={key:0,class:"original-price"},Q={key:1,class:"discount"},H={class:"product-actions"},K=s(p({__name:"ProductItem",props:{product:{},index:{},selected:{type:Boolean},selectable:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1}},emits:["select","delete","add-to-cart","click"],setup(s,{emit:i}){const l=s,o=i,r=n({get:()=>l.selected||!1,set:e=>{l.selectable&&o("select",l.product)}}),p=()=>{o("click",l.product)},S=()=>{l.deletable&&o("delete",l.product)},j=()=>{"soldout"!==l.product.status&&o("add-to-cart",l.product)};return(i,l)=>{const o=e,n=t,w=C,_=d,K=M,J=c,N=a;return u(),g("div",{class:I(["product-item",{"product-item--selected":r.value,"product-item--soldout":"soldout"===s.product.status,"product-item--low-stock":s.product.stock>0&&s.product.stock<10}]),onClick:p},[m("div",B,[v(w,{width:"80",height:"80",src:s.product.image||"",fit:"cover",radius:"4"},{error:h(()=>[v(o,{name:"photo-o",size:"24"})]),loading:h(()=>[v(n,{type:"spinner",size:"20"})]),_:1},8,["src"]),"soldout"===s.product.status?(u(),g("div",z,[...l[3]||(l[3]=[m("span",null,"已售罄",-1)])])):s.product.stock>0&&s.product.stock<10?(u(),g("div",L,[v(_,{type:"warning"},{default:h(()=>[y("仅剩"+k(s.product.stock)+"件",1)]),_:1})])):x("",!0)]),m("div",D,[m("div",F,[m("h4",T,k(s.product.name),1),s.selectable?(u(),f(K,{key:0,modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),onClick:l[1]||(l[1]=P(()=>{},["stop"])),class:"select-checkbox"},null,8,["modelValue"])):x("",!0)]),s.product.description?(u(),g("p",$,k(s.product.description),1)):x("",!0),s.product.tags&&s.product.tags.length>0?(u(),g("div",V,[(u(!0),g(b,null,A(s.product.tags,e=>(u(),f(_,{key:e,type:"primary"},{default:h(()=>[y(k(e),1)]),_:2},1024))),128))])):x("",!0),m("div",W,[s.product.rating?(u(),g("div",X,[v(J,{modelValue:s.product.rating,"onUpdate:modelValue":l[2]||(l[2]=e=>s.product.rating=e),readonly:"",size:"12","allow-half":"",color:"#ffd21e","void-color":"#c8c9cc"},null,8,["modelValue"]),m("span",E,k(s.product.rating),1)])):x("",!0),s.product.sales?(u(),g("div",G," 已售"+k(s.product.sales)+"件 ",1)):x("",!0)]),m("div",R,[m("span",U,"¥"+k(s.product.price),1),s.product.originalPrice?(u(),g("span",O," ¥"+k(s.product.originalPrice),1)):x("",!0),s.product.originalPrice?(u(),g("span",Q,k((Y=s.product.price,Z=s.product.originalPrice,(Y/Z*10).toFixed(1)))+"折 ",1)):x("",!0)])]),m("div",H,[s.deletable?(u(),f(N,{key:0,type:"danger",onClick:P(S,["stop"]),class:"delete-btn"},{default:h(()=>[...l[4]||(l[4]=[y(" 删除 ",-1)])]),_:1})):(u(),f(N,{key:1,type:"primary",onClick:P(j,["stop"]),disabled:"soldout"===s.product.status,class:"add-cart-btn"},{default:h(()=>[...l[5]||(l[5]=[y(" 加入购物车 ",-1)])]),_:1},8,["disabled"]))])],2);var Y,Z}}}),[["__scopeId","data-v-f67ba659"]]),J=[{id:1,name:"iPhone 15 Pro",description:"最新款iPhone，搭载A17 Pro芯片，钛金属机身",price:7999,originalPrice:8999,image:"https://via.placeholder.com/200x200?text=iPhone+15+Pro",categoryId:1,stock:50,status:"active",tags:["手机","苹果","旗舰"],rating:4.8,sales:1200,createdAt:"2024-01-15",updatedAt:"2024-01-20"},{id:2,name:"MacBook Air M2",description:"轻薄便携，性能强劲的笔记本电脑",price:8999,originalPrice:9999,image:"https://via.placeholder.com/200x200?text=MacBook+Air+M2",categoryId:2,stock:30,status:"active",tags:["笔记本","苹果","轻薄"],rating:4.7,sales:800,createdAt:"2024-01-10",updatedAt:"2024-01-18"},{id:3,name:"AirPods Pro 2",description:"主动降噪无线耳机，音质出色",price:1899,originalPrice:1999,image:"https://via.placeholder.com/200x200?text=AirPods+Pro+2",categoryId:3,stock:100,status:"active",tags:["耳机","无线","降噪"],rating:4.6,sales:1500,createdAt:"2024-01-12",updatedAt:"2024-01-19"},{id:4,name:"iPad Air 5",description:"性能强大的平板电脑，适合办公和娱乐",price:4399,originalPrice:4799,image:"https://via.placeholder.com/200x200?text=iPad+Air+5",categoryId:4,stock:25,status:"active",tags:["平板","苹果","办公"],rating:4.5,sales:600,createdAt:"2024-01-08",updatedAt:"2024-01-16"},{id:5,name:"Apple Watch Series 9",description:"智能手表，健康监测功能全面",price:2999,originalPrice:3199,image:"https://via.placeholder.com/200x200?text=Apple+Watch+9",categoryId:5,stock:80,status:"active",tags:["手表","智能","健康"],rating:4.4,sales:900,createdAt:"2024-01-05",updatedAt:"2024-01-14"},{id:6,name:"Samsung Galaxy S24",description:"三星旗舰手机，AI功能强大",price:5999,originalPrice:6999,image:"https://via.placeholder.com/200x200?text=Galaxy+S24",categoryId:1,stock:40,status:"active",tags:["手机","三星","AI"],rating:4.3,sales:700,createdAt:"2024-01-20",updatedAt:"2024-01-25"},{id:7,name:"Dell XPS 13",description:"商务轻薄本，性能稳定",price:7999,originalPrice:8999,image:"https://via.placeholder.com/200x200?text=Dell+XPS+13",categoryId:2,stock:20,status:"active",tags:["笔记本","商务","轻薄"],rating:4.2,sales:400,createdAt:"2024-01-18",updatedAt:"2024-01-22"},{id:8,name:"Sony WH-1000XM5",description:"头戴式降噪耳机，音质顶级",price:2299,originalPrice:2599,image:"https://via.placeholder.com/200x200?text=Sony+WH-1000XM5",categoryId:3,stock:60,status:"active",tags:["耳机","降噪","索尼"],rating:4.7,sales:1100,createdAt:"2024-01-16",updatedAt:"2024-01-24"},{id:9,name:"华为MatePad Pro",description:"华为旗舰平板，办公娱乐两相宜",price:3299,originalPrice:3699,image:"https://via.placeholder.com/200x200?text=华为MatePad+Pro",categoryId:4,stock:35,status:"active",tags:["平板","华为","办公"],rating:4.4,sales:500,createdAt:"2024-01-14",updatedAt:"2024-01-21"},{id:10,name:"小米手环8",description:"性价比高的智能手环，功能齐全",price:299,originalPrice:349,image:"https://via.placeholder.com/200x200?text=小米手环8",categoryId:5,stock:200,status:"active",tags:["手环","小米","性价比"],rating:4.1,sales:3e3,createdAt:"2024-01-22",updatedAt:"2024-01-28"},{id:11,name:"iPhone 14",description:"上一代iPhone，性价比之选",price:4999,originalPrice:5999,image:"https://via.placeholder.com/200x200?text=iPhone+14",categoryId:1,stock:15,status:"soldout",tags:["手机","苹果","性价比"],rating:4.6,sales:2e3,createdAt:"2023-12-15",updatedAt:"2024-01-30"},{id:12,name:"MacBook Pro M3",description:"专业级笔记本电脑，性能怪兽",price:12999,originalPrice:14999,image:"https://via.placeholder.com/200x200?text=MacBook+Pro+M3",categoryId:2,stock:10,status:"active",tags:["笔记本","苹果","专业"],rating:4.9,sales:300,createdAt:"2024-01-25",updatedAt:"2024-01-29"},{id:13,name:"Bose QuietComfort 45",description:"舒适的头戴式降噪耳机",price:1999,originalPrice:2299,image:"https://via.placeholder.com/200x200?text=Bose+QC45",categoryId:3,stock:45,status:"active",tags:["耳机","降噪","Bose"],rating:4.5,sales:800,createdAt:"2024-01-17",updatedAt:"2024-01-26"},{id:14,name:"iPad mini 6",description:"小巧便携的平板电脑",price:3799,originalPrice:3999,image:"https://via.placeholder.com/200x200?text=iPad+mini+6",categoryId:4,stock:28,status:"active",tags:["平板","便携","苹果"],rating:4.3,sales:450,createdAt:"2024-01-13",updatedAt:"2024-01-23"},{id:15,name:"Garmin Fenix 7",description:"专业运动手表，户外探险必备",price:4999,originalPrice:5999,image:"https://via.placeholder.com/200x200?text=Garmin+Fenix+7",categoryId:5,stock:12,status:"active",tags:["手表","运动","户外"],rating:4.8,sales:200,createdAt:"2024-01-11",updatedAt:"2024-01-27"}],N=async(e={})=>{await new Promise(e=>setTimeout(e,500));const{keyword:t,categoryId:a,minPrice:s,maxPrice:i,status:l,tags:o,sortBy:r="id",sortOrder:c="asc",page:d=0,size:p=10}=e;let n=[...J];if(t){const e=t.toLowerCase();n=n.filter(t=>t.name.toLowerCase().includes(e)||t.description?.toLowerCase().includes(e))}a&&(n=n.filter(e=>e.categoryId===a)),void 0!==s&&(n=n.filter(e=>e.price>=s)),void 0!==i&&(n=n.filter(e=>e.price<=i)),l&&(n=n.filter(e=>e.status===l)),o&&o.length>0&&(n=n.filter(e=>e.tags?.some(e=>o.includes(e)))),n.sort((e,t)=>{let a=e[r]||0,s=t[r]||0;return"string"==typeof a&&"string"==typeof s&&(a=a.toLowerCase(),s=s.toLowerCase()),"asc"===c?a>s?1:a<s?-1:0:a<s?1:a>s?-1:0});const u=d*p,g=u+p,m=n.slice(u,g);return{content:m,totalElements:n.length,totalPages:Math.ceil(n.length/p),size:p,number:d,first:0===d,last:g>=n.length,numberOfElements:m.length,empty:0===m.length}},Y={class:"empty-product"},Z={class:"loading-product"},q={key:0,class:"list-footer"},ee=s(p({__name:"sdkwork-product-list",props:{selectable:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},pageSize:{default:10},itemKey:{default:"id"},itemTitleField:{default:"name"},itemDescriptionField:{default:"description"},params:{}},emits:["select","delete","search","load","checkout"],setup(s,{expose:o,emit:c}){const d=s,p=c,P=S(),b=S({...d.params}),A=S(0),I=S(0),_=S(0),C=S(0),M=S([]),B=n(()=>M.value.reduce((e,t)=>e+t.price,0)),z=e=>{p("select",e),T(),i(`已选择: ${e.name}`)},L=async e=>{try{await l({title:"确认删除",message:`确定要删除商品"${e.name}"吗？此操作不可撤销。`}),p("delete",e),i("商品删除成功")}catch(t){console.log("取消删除")}},D=e=>{b.value.keyword=e,p("search",e)},F=e=>{A.value=e.total||0,_.value=e.pageable.pageNumber||0,C.value=e.total/(e.pageable.pageSize||10)||0,p("load",e)},T=()=>{const e=P.value?.getSelectedItems()||[];M.value=e,I.value=e.length},$=()=>{0!==M.value.length?l({title:"确认结算",message:`确定要结算 ${M.value.length} 件商品，总金额 ¥${B.value} 吗？`}).then(()=>{p("checkout",M.value),i("结算成功！"),P.value?.clearSelected(),M.value=[],I.value=0}):i("请先选择商品")};return j(I,()=>{T()}),o({refresh:()=>P.value?.refresh(),loadMore:()=>P.value?.loadMore(),getData:()=>P.value?.getData()||[],getSelectedItems:()=>P.value?.getSelectedItems()||[],clearSelected:()=>{P.value?.clearSelected(),M.value=[],I.value=0},setSelectedItems:e=>{P.value?.setSelectedItems(e),M.value=e,I.value=e.length}}),(i,l)=>{const o=e,c=t,d=a;return u(),f(r,{api:w(N),params:b.value,selectable:s.selectable,deletable:s.deletable,searchable:s.searchable,"page-size":s.pageSize,"item-key":s.itemKey,"item-title-field":s.itemTitleField,"item-description-field":s.itemDescriptionField,onSelect:z,onDelete:L,onSearch:D,onLoad:F},{default:h(({item:e,index:t,selected:a})=>[v(K,{product:e,index:t,selected:a,selectable:s.selectable,deletable:s.deletable,onSelect:z,onDelete:L},null,8,["product","index","selected","selectable","deletable"])]),empty:h(()=>[m("div",Y,[v(o,{name:"shopping-cart-o",size:"48"}),l[0]||(l[0]=m("p",null,"暂无商品",-1))])]),loading:h(()=>[m("div",Z,[v(c,{size:"24px"}),l[1]||(l[1]=m("span",null,"加载商品中...",-1))])]),footer:h(()=>[I.value>0?(u(),g("div",q,[v(d,{type:"primary",block:"",onClick:$},{default:h(()=>[y(" 结算选中商品 ("+k(I.value)+") ",1)]),_:1})])):x("",!0)]),_:1},8,["api","params","selectable","deletable","searchable","page-size","item-key","item-title-field","item-description-field"])}}}),[["__scopeId","data-v-fe3bf2bb"]]),te={class:"product-list-logic"},ae=s(p({__name:"list",setup(e,{expose:t}){const a=S(),s=S(!1),l=S(!1),r=S(!0),c=S(5),d=S({keyword:"",categoryId:void 0,minPrice:void 0,maxPrice:void 0,status:void 0,tagsInput:""}),p=S(0),m=S(0),h=S(0),y=S(0),k=S([]),x=n(()=>k.value.reduce((e,t)=>e+t.price,0));_(()=>{i("商品列表已加载")});const f=e=>{console.log("选中商品:",e),j()},P=e=>{console.log("删除商品:",e),o({title:"删除成功",message:`商品"${e.name}"已被删除`})},b=e=>{console.log("搜索关键词:",e),d.value.keyword=e},A=e=>{p.value=e.totalElements||0,h.value=e.number||0,y.value=e.totalPages||0,console.log("加载数据:",e)},I=e=>{o({title:"结算确认",message:`确定要结算 ${e.length} 件商品，总金额 ¥${x.value} 吗？`}).then(()=>{i("结算成功！")})},j=()=>{const e=a.value?.getSelectedItems()||[];k.value=e,m.value=e.length};return t({refreshList:()=>{a.value?.refresh(),i("列表已刷新")},loadMore:()=>{a.value?.loadMore(),i("正在加载更多...")},clearSelected:()=>{a.value?.clearSelected(),k.value=[],m.value=0,i("已清空选择")},applyFilters:()=>{const e=d.value.tagsInput?d.value.tagsInput.split(",").map(e=>e.trim()).filter(e=>e):void 0,t={...d.value,tags:e};Object.keys(t).forEach(e=>{""!==t[e]&&void 0!==t[e]||delete t[e]}),a.value?.refresh(),i("筛选条件已应用")},getSelectedProducts:()=>k.value,getTotalProducts:()=>p.value,getSelectedCount:()=>m.value,getCurrentPage:()=>h.value,getTotalPages:()=>y.value,getTotalAmount:()=>x.value}),(e,t)=>{const i=ee;return u(),g("div",te,[v(i,{ref_key:"productListRef",ref:a,selectable:s.value,deletable:l.value,searchable:r.value,"page-size":c.value,params:d.value,onSelect:f,onDelete:P,onSearch:b,onLoad:A,onCheckout:I},null,8,["selectable","deletable","searchable","page-size","params"])])}}}),[["__scopeId","data-v-c4c2874a"]]);export{ae as default};
