import{a as e,l as t,k as a,r as l,c as n,f as o,w as i,j as r,n as s,b as d,d as c,J as u,s as v,m as f,g as p,R as h,aj as b,V as g,v as m}from"./vue-vendor-CnVaDBlt.js";import{X as x,ay as w,av as y,az as I,ae as k,aA as B,v as C,q as S,n as T,c as R,au as $,a7 as z,U as j,aB as A,E as H,a0 as L,G as W,C as O,z as Z,w as N,a4 as V,T as F,t as M,Q as X,$ as D,b as E,a3 as J,p as q,an as G,aC as P,ad as Q,aD as U,J as Y,V as K,H as _,at as ee,aa as te,Y as ae}from"./index-lnKdqbPs.js";import{u as le}from"./use-id-CkVbEcjv.js";import{u as ne}from"./use-tab-status-CE0k_sEf.js";import{S as oe,a as ie}from"./index-CDC4TuBW.js";import{u as re}from"./use-refs-D3gLi3Li.js";function se(a,l){if(!k||!window.IntersectionObserver)return;const n=new IntersectionObserver(e=>{l(e[0].intersectionRatio>0)},{root:document.body}),o=()=>{a.value&&n.unobserve(a.value)};e(o),t(o),B(()=>{a.value&&n.observe(a.value)})}const[de,ce]=R("sticky");const ue=N(a({name:de,props:{zIndex:T,position:S("top"),container:Object,offsetTop:C(0),offsetBottom:C(0)},emits:["scroll","change"],setup(e,{emit:t,slots:a}){const d=l(),c=$(d),u=n({fixed:!1,width:0,height:0,transform:0}),v=l(!1),f=o(()=>z("top"===e.position?e.offsetTop:e.offsetBottom)),p=o(()=>{if(v.value)return;const{fixed:e,height:t,width:a}=u;return e?{width:`${a}px`,height:`${t}px`}:void 0}),h=o(()=>{if(!u.fixed||v.value)return;const t=j(A(e.zIndex),{width:`${u.width}px`,height:`${u.height}px`,[e.position]:`${f.value}px`});return u.transform&&(t.transform=`translate3d(0, ${u.transform}px, 0)`),t}),b=()=>{if(!d.value||L(d))return;const{container:a,position:l}=e,n=W(d),o=y(window);if(u.width=n.width,u.height=n.height,"top"===l)if(a){const e=W(a),t=e.bottom-f.value-u.height;u.fixed=f.value>n.top&&e.bottom>0,u.transform=t<0?t:0}else u.fixed=f.value>n.top;else{const{clientHeight:e}=document.documentElement;if(a){const t=W(a),l=e-t.top-f.value-u.height;u.fixed=e-f.value<n.bottom&&e>t.top,u.transform=l<0?-l:0}else u.fixed=e-f.value<n.bottom}(e=>{t("scroll",{scrollTop:e,isFixed:u.fixed})})(o)};return i(()=>u.fixed,e=>t("change",e)),H("scroll",b,{target:c,passive:!0}),se(d,b),i([O,Z],()=>{d.value&&!L(d)&&u.fixed&&(v.value=!0,s(()=>{const e=W(d);u.width=e.width,u.height=e.height,v.value=!1}))}),()=>{var e;return r("div",{ref:d,style:p.value},[r("div",{class:ce({fixed:u.fixed&&!v.value}),style:h.value},[null==(e=a.default)?void 0:e.call(a)])])}}})),[ve,fe]=R("tabs");var pe=a({name:ve,props:{count:V(Number),inited:Boolean,animated:Boolean,duration:V(T),swipeable:Boolean,lazyRender:Boolean,currentIndex:V(Number)},emits:["change"],setup(e,{emit:t,slots:a}){const n=l(),o=e=>t("change",e),s=()=>{var t;const l=null==(t=a.default)?void 0:t.call(a);return e.animated||e.swipeable?r(oe,{ref:n,loop:!1,class:fe("track"),duration:1e3*+e.duration,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:o},{default:()=>[l]}):l},c=t=>{const a=n.value;a&&a.state.active!==t&&a.swipeTo(t,{immediate:!e.inited})};return i(()=>e.currentIndex,c),d(()=>{c(e.currentIndex)}),F({swipeRef:n}),()=>r("div",{class:fe("content",{animated:e.animated||e.swipeable})},[s()])}});const[he,be]=R("tabs"),ge={type:S("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:C(0),duration:C(.3),animated:Boolean,ellipsis:M,swipeable:Boolean,scrollspy:Boolean,offsetTop:C(0),background:String,lazyRender:M,showHeader:M,lineWidth:T,lineHeight:T,beforeChange:Function,swipeThreshold:C(5),titleActiveColor:String,titleInactiveColor:String},me=Symbol(he);var xe=a({name:he,props:ge,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:t,slots:a}){let d,u,v,f,p;const h=l(),b=l(),g=l(),m=l(),k=le(),C=$(h),[S,T]=re(),{children:R,linkChildren:j}=X(me),A=n({inited:!1,position:"",lineStyle:{},currentIndex:-1}),Z=o(()=>R.length>+e.swipeThreshold||!e.ellipsis||e.shrink),N=o(()=>({borderColor:e.color,background:e.background})),V=(e,t)=>{var a;return null!=(a=e.name)?a:t},M=o(()=>{const e=R[A.currentIndex];if(e)return V(e,A.currentIndex)}),Y=o(()=>z(e.offsetTop)),K=o(()=>e.sticky?Y.value+d:0),_=t=>{const a=b.value,l=S.value;if(!(Z.value&&a&&l&&l[A.currentIndex]))return;const n=l[A.currentIndex].$el,o=n.offsetLeft-(a.offsetWidth-n.offsetWidth)/2;f&&f(),f=function(e,t,a){let l,n=0;const o=e.scrollLeft,i=0===a?1:Math.round(1e3*a/16);let r=o;return function a(){r+=(t-o)/i,e.scrollLeft=r,++n<i&&(l=x(a))}(),function(){w(l)}}(a,o,t?0:+e.duration)},ee=()=>{const t=A.inited;s(()=>{const a=S.value;if(!a||!a[A.currentIndex]||"line"!==e.type||L(h.value))return;const l=a[A.currentIndex].$el,{lineWidth:n,lineHeight:o}=e,i=l.offsetLeft+l.offsetWidth/2,r={width:E(n),backgroundColor:e.color,transform:`translateX(${i}px) translateX(-50%)`};if(t&&(r.transitionDuration=`${e.duration}s`),J(o)){const e=E(o);r.height=e,r.borderRadius=e}A.lineStyle=r})},te=(a,l)=>{const n=(e=>{const t=e<A.currentIndex?-1:1;for(;e>=0&&e<R.length;){if(!R[e].disabled)return e;e+=t}})(a);if(!J(n))return;const o=R[n],i=V(o,n),r=null!==A.currentIndex;A.currentIndex!==n&&(A.currentIndex=n,l||_(),ee()),i!==e.active&&(t("update:active",i),r&&t("change",i,o.title)),v&&!e.scrollspy&&G(Math.ceil(P(h.value)-Y.value))},ae=(e,t)=>{const a=R.findIndex((t,a)=>V(t,a)===e);te(-1===a?0:a,t)},ne=(t=!1)=>{if(e.scrollspy){const a=R[A.currentIndex].$el;if(a&&C.value){const l=P(a,C.value)-K.value;u=!0,p&&p(),p=function(e,t,a,l){let n,o=y(e);const i=o<t,r=0===a?1:Math.round(1e3*a/16),s=(t-o)/r;return function a(){o+=s,(i&&o>t||!i&&o<t)&&(o=t),I(e,o),i&&o<t||!i&&o>t?n=x(a):l&&(n=x(l))}(),function(){w(n)}}(C.value,l,t?0:+e.duration,()=>{u=!1})}}},oe=(a,l,n)=>{const{title:o,disabled:i}=R[l],r=V(R[l],l);i||(Q(e.beforeChange,{args:[r],done:()=>{te(l),ne()}}),U(a)),t("clickTab",{name:r,title:o,event:n,disabled:i})},ie=e=>{v=e.isFixed,t("scroll",e)},de=()=>{if("line"===e.type&&R.length)return r("div",{class:be("line"),style:A.lineStyle},null)},ce=()=>{var t,l,n;const{type:o,border:i,sticky:s}=e,d=[r("div",{ref:s?void 0:g,class:[be("wrap"),{[q]:"line"===o&&i}]},[r("div",{ref:b,role:"tablist",class:be("nav",[o,{shrink:e.shrink,complete:Z.value}]),style:N.value,"aria-orientation":"horizontal"},[null==(t=a["nav-left"])?void 0:t.call(a),R.map(e=>e.renderTitle(oe)),de(),null==(l=a["nav-right"])?void 0:l.call(a)])]),null==(n=a["nav-bottom"])?void 0:n.call(a)];return s?r("div",{ref:g},[d]):d},ve=()=>{ee(),s(()=>{var e,t;_(!0),null==(t=null==(e=m.value)?void 0:e.swipeRef.value)||t.resize()})};i(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],ee),i(O,ve),i(()=>e.active,e=>{e!==M.value&&ae(e)}),i(()=>R.length,()=>{A.inited&&(ae(e.active),ee(),s(()=>{_(!0)}))});return F({resize:ve,scrollTo:e=>{s(()=>{ae(e),ne(!0)})}}),c(ee),D(ee),B(()=>{ae(e.active,!0),s(()=>{A.inited=!0,g.value&&(d=W(g.value).height),_(!0)})}),se(h,ee),H("scroll",()=>{if(e.scrollspy&&!u){const e=(()=>{for(let e=0;e<R.length;e++){const{top:t}=W(R[e].$el);if(t>K.value)return 0===e?0:e-1}return R.length-1})();te(e)}},{target:C,passive:!0}),j({id:k,props:e,setLine:ee,scrollable:Z,onRendered:(e,a)=>t("rendered",e,a),currentName:M,setTitleRefs:T,scrollIntoView:_}),()=>r("div",{ref:h,class:be([e.type])},[e.showHeader?e.sticky?r(ue,{container:h.value,offsetTop:Y.value,onScroll:ie},{default:()=>[ce()]}):ce():null,r(pe,{ref:m,count:R.length,inited:A.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:A.currentIndex,onChange:te},{default:()=>{var e;return[null==(e=a.default)?void 0:e.call(a)]}})])}});const[we,ye]=R("tab"),Ie=a({name:we,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:T,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:M},setup(e,{slots:t}){const a=o(()=>{const t={},{type:a,color:l,disabled:n,isActive:o,activeColor:i,inactiveColor:r}=e;l&&"card"===a&&(t.borderColor=l,n||(o?t.backgroundColor=l:t.color=l));const s=o?i:r;return s&&(t.color=s),t}),l=()=>{const a=r("span",{class:ye("text",{ellipsis:!e.scrollable})},[t.title?t.title():e.title]);return e.dot||J(e.badge)&&""!==e.badge?r(Y,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[a]}):a};return()=>r("div",{id:e.id,role:"tab",class:[ye([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:a.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls,"data-allow-mismatch":"attribute"},[l()])}}),[ke,Be]=R("tab");const Ce=N(a({name:ke,props:j({},ee,{dot:Boolean,name:T,badge:T,title:String,disabled:Boolean,titleClass:te,titleStyle:[String,Object],showZeroBadge:M}),setup(e,{slots:t}){const a=le(),n=l(!1),d=p(),{parent:c,index:x}=K(me);if(!c)return;const w=()=>{var t;return null!=(t=e.name)?t:x.value},y=o(()=>{const t=w()===c.currentName.value;return t&&!n.value&&(n.value=!0,c.props.lazyRender&&s(()=>{c.onRendered(w(),e.title)})),t}),I=l(""),k=l("");u(()=>{const{titleClass:t,titleStyle:a}=e;I.value=t?h(t):"",k.value=a&&"string"!=typeof a?b(g(a)):a});const B=l(!y.value);return i(y,e=>{e?B.value=!1:ae(()=>{B.value=!0})}),i(()=>e.title,()=>{c.setLine(),c.scrollIntoView()}),ne(y),F({id:a,renderTitle:l=>r(Ie,f({key:a,id:`${c.id}-${x.value}`,ref:c.setTitleRefs(x.value),style:k.value,class:I.value,isActive:y.value,controls:a,scrollable:c.scrollable.value,activeColor:c.props.titleActiveColor,inactiveColor:c.props.titleInactiveColor,onClick:e=>l(d.proxy,x.value,e)},_(c.props,["type","color","shrink"]),_(e,["dot","badge","title","disabled","showZeroBadge"])),{title:t.title})}),()=>{var e;const l=`${c.id}-${x.value}`,{animated:o,swipeable:i,scrollspy:s,lazyRender:d}=c.props;if(!t.default&&!o)return;const u=s||y.value;if(o||i)return r(ie,{id:a,role:"tabpanel",class:Be("panel-wrapper",{inactive:B.value}),tabindex:y.value?0:-1,"aria-hidden":!y.value,"aria-labelledby":l,"data-allow-mismatch":"attribute"},{default:()=>{var e;return[r("div",{class:Be("panel")},[null==(e=t.default)?void 0:e.call(t)])]}});const f=n.value||s||!d?null==(e=t.default)?void 0:e.call(t):null;return v(r("div",{id:a,role:"tabpanel",class:Be("panel"),tabindex:u?0:-1,"aria-labelledby":l,"data-allow-mismatch":"attribute"},[f]),[[m,u]])}}})),Se=N(xe);export{Se as T,Ce as a};
