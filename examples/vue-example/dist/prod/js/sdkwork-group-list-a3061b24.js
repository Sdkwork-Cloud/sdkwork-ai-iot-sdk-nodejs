import{j as e,I as a,B as t,_ as o}from"./index-2cafbb5e.js";import{E as l}from"./index-17b6a864.js";import{D as s,a as i}from"./index-87c43664.js";/* empty css              */import{T as r}from"./index-4f03d337.js";/* empty css              */import{S as p}from"./index-291bb189.js";import{S as u}from"./sdkwork-api-list-be20b211.js";/* empty css              */import{k as n,c as d,Q as c,R as m,S as g,Z as f,j as v,U as h,$ as y,a0 as k,a4 as b,F as w,Y as x,a1 as S,X as j,r as B,W as _}from"./vue-vendor-fce65f55.js";const z={class:"group-avatar"},F=["src","alt"],C={key:2,class:"verified-badge"},D={class:"group-info"},M={class:"group-name-row"},J={class:"group-name"},V={class:"group-description"},$={key:0,class:"group-tags"},I={key:0,class:"more-tags"},L={class:"group-stats"},P={class:"stat-item"},T={key:0,class:"stat-item"},U={class:"stat-item"},H={key:1,class:"stat-item hot"},N={class:"price-section"},K={key:0,class:"price free"},O={key:1,class:"price paid"},R={class:"price-amount"},E={class:"value"},G={key:0,class:"original-price"},Q={class:"value"},W=o(n({__name:"sdkwork-group-item",props:{group:{},showJoinButton:{type:Boolean,default:!0}},emits:["click","join"],setup(o,{emit:l}){const s=o,i=l,{currentTheme:p}=e(),u=d(()=>`theme-${p.value}`),n=()=>{i("click",s.group)},B=()=>{i("join",s.group)},_=e=>e>=1e4?(e/1e4).toFixed(1)+"w":e>=1e3?(e/1e3).toFixed(1)+"k":e.toString();return(e,l)=>{const s=a,i=r,p=t;return c(),m("div",{class:j(["sdkwork-group-item-content",u.value]),onClick:n},[g("div",z,[o.group.avatar?(c(),m("img",{key:0,src:o.group.avatar,alt:o.group.name,class:"avatar-image"},null,8,F)):(c(),f(s,{key:1,name:"friends-o",size:"24",class:"avatar-placeholder"})),o.group.isVerified?(c(),m("div",C,[v(s,{name:"success",size:"12"})])):h("",!0)]),g("div",D,[g("div",M,[g("h3",J,y(o.group.name),1),"official"===o.group.type?(c(),f(i,{key:0,type:"primary",size:"medium",round:""},{default:k(()=>[...l[0]||(l[0]=[b(" 官方 ",-1)])]),_:1})):h("",!0)]),g("p",V,y(o.group.description),1),o.group.tags&&o.group.tags.length?(c(),m("div",$,[(c(!0),m(w,null,x(o.group.tags.slice(0,3),e=>(c(),f(i,{key:e,plain:"",size:"medium",class:"tag-item"},{default:k(()=>[b(y(e),1)]),_:2},1024))),128)),o.group.tags.length>3?(c(),m("span",I," +"+y(o.group.tags.length-3),1)):h("",!0)])):h("",!0),g("div",L,[g("div",P,[v(s,{name:"friends",size:"14"}),g("span",null,y(_(o.group.memberCount))+"人",1)]),o.group.maxMembers?(c(),m("div",T,[g("span",null,"/"+y(o.group.maxMembers),1)])):h("",!0),g("div",U,[v(s,{name:"chat-o",size:"14"}),g("span",null,y(_(o.group.messageCount)),1)]),o.group.isHot?(c(),m("div",H,[v(s,{name:"fire-o",size:"14"}),l[1]||(l[1]=g("span",null,"热门",-1))])):h("",!0)])]),g("div",N,[0===o.group.price?(c(),m("div",K,[v(i,{type:"success",round:""},{default:k(()=>[...l[2]||(l[2]=[b(" 免费 ",-1)])]),_:1})])):(c(),m("div",O,[g("div",R,[l[3]||(l[3]=g("span",{class:"currency"},"¥",-1)),g("span",E,y(o.group.price),1)]),o.group.originalPrice&&o.group.originalPrice>o.group.price?(c(),m("div",G,[l[4]||(l[4]=g("span",{class:"currency"},"¥",-1)),g("span",Q,y(o.group.originalPrice),1)])):h("",!0)])),o.showJoinButton?(c(),f(p,{key:2,type:o.group.isJoined?"default":"primary",size:"small",round:"",loading:o.group.joining,onClick:S(B,["stop"]),class:"join-button"},{default:k(()=>[b(y(o.group.isJoined?"已加入":o.group.price>0?"付费加入":"免费加入"),1)]),_:1},8,["type","loading"])):h("",!0)])],2)}}}),[["__scopeId","data-v-f338cc3f"]]),X={key:0,class:"group-filter-section"},Y={key:0,class:"search-box"},Z={key:1,class:"filter-tags"},q={key:2,class:"sort-section"},A={class:"group-item-wrapper"},ee=o(n({__name:"sdkwork-group-list",props:{api:{},service:{},params:{default:()=>({})},pageableParams:{default:()=>({})},selectable:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},pageSize:{default:20},itemKey:{default:"id"},itemTitleField:{default:"name"},itemDescriptionField:{default:"description"},themeMode:{default:"auto"},showBorderBottom:{type:Boolean,default:!0},borderBottomLeftOffset:{default:0},showNoMoreData:{type:Boolean,default:!0},topSpacing:{default:0},leftSpacing:{default:0},rightSpacing:{default:0},showFilter:{type:Boolean,default:!0},showSort:{type:Boolean,default:!0},showJoinButton:{type:Boolean,default:!0}},emits:["select","delete","search","load","filter","sort","group-click","join"],setup(e,{expose:a,emit:t}){const o=B(),n=e,S=t,j=B(""),z=B("all"),F=B("hot"),C=[{label:"全部",value:"all"},{label:"免费",value:"free"},{label:"付费",value:"paid"},{label:"官方",value:"official"},{label:"热门",value:"hot"},{label:"已加入",value:"joined"}],D=[{text:"热门排序",value:"hot"},{text:"最新创建",value:"newest"},{text:"成员最多",value:"members"},{text:"价格最低",value:"priceLow"},{text:"价格最高",value:"priceHigh"}],M=d(()=>"all"!==z.value?{...n.params,filter:z.value,keyword:j.value,sort:F.value}:j.value?{...n.params,keyword:j.value,sort:F.value}:"hot"!==F.value?{...n.params,sort:F.value}:n.params),J=e=>{S("select",e)},V=e=>{S("delete",e)},$=e=>{j.value=e,S("search",e)},I=()=>{j.value="",S("search","")},L=e=>{S("load",e)},P=e=>{F.value=e,S("sort",e)},T=e=>{S("group-click",e)},U=e=>{S("join",e)};return a({refresh:()=>o.value?.refresh(),loadMore:()=>o.value?.loadMore(),getData:()=>o.value?.getData(),getSelectedItems:()=>o.value?.getSelectedItems(),clearSelected:()=>o.value?.clearSelected()}),(a,t)=>{const n=p,d=r,B=s,H=i,N=l;return c(),f(u,{ref_key:"apiListRef",ref:o,api:e.api,service:e.service,params:M.value,"pageable-params":e.pageableParams,selectable:e.selectable,deletable:e.deletable,searchable:!1,"page-size":e.pageSize,"item-key":e.itemKey,"item-title-field":e.itemTitleField,"item-description-field":e.itemDescriptionField,"theme-mode":e.themeMode,"show-border-bottom":e.showBorderBottom,"border-bottom-left-offset":e.borderBottomLeftOffset,"show-no-more-data":e.showNoMoreData,"top-spacing":e.topSpacing,"left-spacing":e.leftSpacing,"right-spacing":e.rightSpacing,onSelect:J,onDelete:V,onLoad:L},{header:k(()=>[_(a.$slots,"header",{},()=>[e.showFilter||e.showSort?(c(),m("div",X,[e.searchable?(c(),m("div",Y,[v(n,{modelValue:j.value,"onUpdate:modelValue":t[0]||(t[0]=e=>j.value=e),placeholder:"搜索群组名称或描述",onSearch:$,onClear:I,shape:"round",background:"transparent"},null,8,["modelValue"])])):h("",!0),e.showFilter?(c(),m("div",Z,[(c(),m(w,null,x(C,e=>v(d,{key:e.value,type:z.value===e.value?"primary":"default",plain:"",round:"",size:"medium",onClick:a=>{return t=e.value,z.value=t,void S("filter",t);var t}},{default:k(()=>[b(y(e.label),1)]),_:2},1032,["type","onClick"])),64))])):h("",!0),e.showSort?(c(),m("div",q,[v(H,null,{default:k(()=>[v(B,{modelValue:F.value,"onUpdate:modelValue":t[1]||(t[1]=e=>F.value=e),options:D,onChange:P},null,8,["modelValue"])]),_:1})])):h("",!0)])):h("",!0)],!0)]),default:k(({item:t,index:o,selected:l})=>[_(a.$slots,"item",{item:t,index:o,selected:l},()=>[g("div",A,[v(W,{group:t,"show-join-button":e.showJoinButton,onClick:T,onJoin:U},null,8,["group","show-join-button"])])],!0)]),footer:k(()=>[_(a.$slots,"footer",{},void 0,!0)]),empty:k(({empty:e})=>[_(a.$slots,"empty",{empty:e},()=>[v(N,{image:"search",description:j.value?"没有找到相关群组":"暂无群组"},null,8,["description"])],!0)]),_:3},8,["api","service","params","pageable-params","selectable","deletable","page-size","item-key","item-title-field","item-description-field","theme-mode","show-border-bottom","border-bottom-left-offset","show-no-more-data","top-spacing","left-spacing","right-spacing"])}}}),[["__scopeId","data-v-4a263401"]]);export{ee as S};
