import{t as e,n as r,c as o,Q as t,T as a,ap as n,a1 as l,w as s}from"./index-CJyFKuKg.js";import{k as i,j as d}from"./vue-vendor-CnVaDBlt.js";const[m,u]=o("form");const c=s(i({name:m,props:{colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:r,labelAlign:String,inputAlign:String,scrollToError:Boolean,scrollToErrorPosition:String,validateFirst:Boolean,submitOnEnter:e,showErrorMessage:e,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}},emits:["submit","failed"],setup(e,{emit:r,slots:o}){const{children:s,linkChildren:i}=t(n),m=e=>e?s.filter(r=>e.includes(r.name)):s,c=r=>{return"string"==typeof r?(e=>{const r=s.find(r=>r.name===e);return r?new Promise((e,o)=>{r.validate().then(r=>{r?o(r):e()})}):Promise.reject()})(r):e.validateFirst?(o=r,new Promise((e,r)=>{const t=[];m(o).reduce((e,r)=>e.then(()=>{if(!t.length)return r.validate().then(e=>{e&&t.push(e)})}),Promise.resolve()).then(()=>{t.length?r(t):e()})})):(e=>new Promise((r,o)=>{const t=m(e);Promise.all(t.map(e=>e.validate())).then(e=>{(e=e.filter(Boolean)).length?o(e):r()})}))(r);var o},g=(e,r)=>{s.some(o=>o.name===e&&(o.$el.scrollIntoView(r),!0))},h=()=>s.reduce((e,r)=>(void 0!==r.name&&(e[r.name]=r.formValue.value),e),{}),v=()=>{const o=h();c().then(()=>r("submit",o)).catch(t=>{r("failed",{values:o,errors:t});const{scrollToError:a,scrollToErrorPosition:n}=e;a&&t[0].name&&g(t[0].name,n?{block:n}:void 0)})},f=e=>{l(e),v()};return i({props:e}),a({submit:v,validate:c,getValues:h,scrollToField:g,resetValidation:e=>{"string"==typeof e&&(e=[e]);m(e).forEach(e=>{e.resetValidation()})},getValidationStatus:()=>s.reduce((e,r)=>(e[r.name]=r.getValidationStatus(),e),{})}),()=>{var e;return d("form",{class:u(),onSubmit:f},[null==(e=o.default)?void 0:e.call(o)])}}}));export{c as F};
