import{S as e}from"./sdkwork-page-container-5d58390b.js";import{s as t,c as a,B as l,_ as s}from"./index-5affcab4.js";import{L as i}from"./index-56f0d1d3.js";import{E as o}from"./index-ccee2c65.js";/* empty css              */import{D as r,a as n}from"./index-89208972.js";/* empty css              */import{N as u}from"./index-1540f2f5.js";import{k as d,O as m,r as c,c as v,b as p,Q as f,Z as h,a0 as g,j as k,S as y,a4 as x,U as w,R as j,F as D,Y as b,$ as _,a1 as C}from"./vue-vendor-a2672387.js";import"./utils-vendor-b5712723.js";import"./use-tab-status-aca7131d.js";import"./use-id-82312033.js";import"./index-44056be1.js";const V={class:"history-container"},$={class:"history-toolbar"},A={class:"toolbar-actions"},U={key:1,class:"history-list"},I=["onClick"],L={class:"item-content"},M={class:"item-thumb"},T=["src","alt"],z={class:"item-info"},B={class:"item-title"},S={class:"item-desc"},Z={class:"item-meta"},E={class:"item-type"},F={class:"item-time"},H=s(d({__name:"history",setup(s){const d=m(),H=c("all"),J=c("all"),N=[{text:"全部类型",value:"all"},{text:"作品",value:"work"},{text:"智能体",value:"agent"},{text:"声音",value:"voice"},{text:"角色",value:"character"}],O=[{text:"全部时间",value:"all"},{text:"今天",value:"today"},{text:"最近7天",value:"week"},{text:"最近30天",value:"month"}],P=c([]),Q=c(!1),R=c(!1),W=[{id:1,title:"AI绘画作品 - 山水风景",description:"使用AI技术创作的山水风景画",thumb:"/images/placeholder.jpg",type:"work",time:new Date(Date.now()-72e5)},{id:2,title:"智能语音助手",description:"多功能智能语音助手应用",thumb:"/images/placeholder.jpg",type:"agent",time:new Date(Date.now()-864e5)},{id:3,title:"自然语音包",description:"高质量自然语音合成包",thumb:"/images/placeholder.jpg",type:"voice",time:new Date(Date.now()-2592e5)}],Y=v(()=>{let e=P.value;if("all"!==H.value&&(e=e.filter(e=>e.type===H.value)),"all"!==J.value){const t=new Date,a=new Date;switch(J.value){case"today":a.setHours(0,0,0,0);break;case"week":a.setDate(t.getDate()-7);break;case"month":a.setDate(t.getDate()-30)}e=e.filter(e=>e.time>=a)}return e}),q=e=>{const t=(new Date).getTime()-e.getTime();if(t<36e5){return`${Math.floor(t/6e4)}分钟前`}if(t<864e5){return`${Math.floor(t/36e5)}小时前`}return`${Math.floor(t/864e5)}天前`},G=()=>{Q.value=!0,setTimeout(()=>{P.value.length>=W.length?R.value=!0:P.value=[...W],Q.value=!1},500)},K=async()=>{try{await a({title:"确认清空",message:"确定要清空所有浏览记录吗？"}),P.value=[],t("浏览记录已清空")}catch{}},X=()=>{d.push("/")};return p(()=>{}),(a,s)=>{const d=u,m=r,c=n,v=l,p=o,W=i,ee=e;return f(),h(ee,{"safe-area":"",scrollable:"","theme-mode":"auto"},{header:g(()=>[k(d,{title:"浏览记录","left-text":"返回","left-arrow":"",onClickLeft:s[0]||(s[0]=e=>a.$router.back())})]),default:g(()=>[y("div",V,[y("div",$,[k(c,null,{default:g(()=>[k(m,{modelValue:H.value,"onUpdate:modelValue":s[1]||(s[1]=e=>H.value=e),options:N},null,8,["modelValue"]),k(m,{modelValue:J.value,"onUpdate:modelValue":s[2]||(s[2]=e=>J.value=e),options:O},null,8,["modelValue"])]),_:1}),y("div",A,[P.value.length>0?(f(),h(v,{key:0,size:"small",onClick:K},{default:g(()=>[...s[4]||(s[4]=[x(" 清空记录 ",-1)])]),_:1})):w("",!0)])]),0===Y.value.length?(f(),h(p,{key:0,image:"search",description:"暂无浏览记录"},{default:g(()=>[k(v,{round:"",type:"primary",onClick:X},{default:g(()=>[...s[5]||(s[5]=[x(" 去浏览内容 ",-1)])]),_:1})]),_:1})):(f(),j("div",U,[k(W,{loading:Q.value,"onUpdate:loading":s[3]||(s[3]=e=>Q.value=e),finished:R.value,"finished-text":"没有更多了",onLoad:G},{default:g(()=>[(f(!0),j(D,null,b(Y.value,e=>{return f(),j("div",{key:e.id,class:"history-item",onClick:a=>(e=>{t(`查看：${e.title}`)})(e)},[y("div",L,[y("div",M,[y("img",{src:e.thumb,alt:e.title},null,8,T)]),y("div",z,[y("div",B,_(e.title),1),y("div",S,_(e.description),1),y("div",Z,[y("span",E,_((a=e.type,{work:"作品",agent:"智能体",voice:"声音",character:"角色"}[a]||"未知")),1),y("span",F,_(q(e.time)),1)])])]),k(v,{size:"small",type:"danger",plain:"",onClick:C(a=>{return l=e.id,P.value=P.value.filter(e=>e.id!==l),void t("记录已删除");var l},["stop"])},{default:g(()=>[...s[6]||(s[6]=[x(" 删除 ",-1)])]),_:1},8,["onClick"])],8,I);var a}),128))]),_:1},8,["loading","finished"])]))])]),_:1})}}}),[["__scopeId","data-v-38d85496"]]);export{H as default};
