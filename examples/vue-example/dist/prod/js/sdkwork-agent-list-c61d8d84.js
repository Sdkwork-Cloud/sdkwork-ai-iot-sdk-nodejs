import{I as e,B as t,_ as a,L as s}from"./index-34815b62.js";import{E as l}from"./index-3ae7521b.js";import{S as i}from"./sdkwork-api-list-7d9e01ff.js";/* empty css              *//* empty css              *//* empty css              */import{I as o}from"./index-89cf3eae.js";import{k as d,c as n,Q as c,R as r,S as m,W as g,j as p,a0 as u,X as f,a1 as k,U as v,$ as b,r as h,b as w,Z as S,a4 as y}from"./vue-vendor-905d75e5.js";import{C as _}from"./index-bb873dec.js";const x={class:"sdkwork-agents-list-item__content"},B={class:"default-agent-item"},z={class:"agent-avatar"},M={class:"avatar-placeholder"},$={key:0,class:"selection-checkbox"},j={class:"agent-info"},C={class:"agent-header"},D={class:"agent-name"},I={class:"agent-description"},L={class:"agent-footer"},A={class:"time-info"},F={class:"time-text"},N={class:"usage-info"},U={class:"count-text"},K={class:"action-section"},R={key:0,class:"delete-section"},T={class:"agent-action"},E=a(d({__name:"sdkwork-agents-list-item",props:{agent:{},index:{},selectable:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},showBorderBottom:{type:Boolean,default:!0},themeMode:{default:"auto"}},emits:["click","select","delete"],setup(a,{expose:s,emit:l}){const i=a,d=l,h=n(()=>"dark"===i.themeMode||"light"!==i.themeMode&&(!("undefined"==typeof window||!window.matchMedia)&&window.matchMedia("(prefers-color-scheme: dark)").matches)),w=n(()=>h.value?"sdkwork-agents-list-item--dark":"sdkwork-agents-list-item--light"),S=e=>{i.selectable&&d("select",i.agent)},y=()=>{i.disabled||(i.selectable?S(i.isSelected):d("click",i.agent))},E=()=>{i.deletable&&d("delete",i.agent)},O=e=>{const t=window.$date.parse(e),a=(new Date).getTime()-t.getTime();return a<6e4?"刚刚更新":a<36e5?`${Math.floor(a/6e4)}分钟前`:a<864e5?`${Math.floor(a/36e5)}小时前`:a<6048e5?`${Math.floor(a/864e5)}天前`:t.toLocaleDateString()};return s({getName:()=>i.agent.name,getDescription:()=>i.agent.description,getUsageCount:()=>i.agent.usageCount,formatLastUpdate:O,isSelected:()=>i.isSelected}),(s,l)=>{const i=e,d=o,n=_,h=t;return c(),r("div",{class:f(["sdkwork-agents-list-item",[{"sdkwork-agents-list-item--selected":a.isSelected,"sdkwork-agents-list-item--selectable":a.selectable,"sdkwork-agents-list-item--deletable":a.deletable,"sdkwork-agents-list-item--disabled":a.disabled,"sdkwork-agents-list-item--border-bottom":a.showBorderBottom},w.value]]),onClick:y},[m("div",x,[g(s.$slots,"default",{agent:a.agent,index:a.index,selected:a.isSelected},()=>[m("div",B,[m("div",z,[p(d,{src:a.agent.faceImage?.url,width:"48",height:"48",radius:"8",fit:"cover",alt:a.agent.name},{error:u(()=>[m("div",M,[p(i,{name:"user-circle-o",size:"24"})])]),_:1},8,["src","alt"]),m("div",{class:f(["status-indicator",`status-${a.agent.status}`])},null,2),a.selectable?(c(),r("div",$,[p(n,{"model-value":a.isSelected,"onUpdate:modelValue":S,onClick:l[0]||(l[0]=k(()=>{},["stop"]))},null,8,["model-value"])])):v("",!0)]),m("div",j,[m("div",C,[m("div",D,b(a.agent.name),1)]),m("div",I,b(a.agent.description||"暂无描述"),1),m("div",L,[m("div",A,[p(i,{name:"clock-o",size:"12"}),m("span",F,b(O(a.agent.updatedAt)),1)]),m("div",N,[p(i,{name:"play-circle",size:"12"}),m("span",U,b(a.agent.usageCount)+"次使用",1)])])]),m("div",K,[a.deletable?(c(),r("div",R,[p(h,{type:"danger",round:"",onClick:k(E,["stop"]),class:"delete-button"},{default:u(()=>[p(i,{name:"delete",size:"14"})]),_:1})])):v("",!0),m("div",T,[p(i,{name:"arrow",size:"16"})])])])],!0)])],2)}}}),[["__scopeId","data-v-7af63f9f"]]),O=a(d({__name:"sdkwork-agent-list",props:{api:{},params:{default:()=>({})},selectable:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},pageSize:{default:10},agentKey:{default:"id"},agentNameField:{default:"name"},agentDescriptionField:{default:"description"}},emits:["select","delete","click","search","load"],setup(e,{expose:t,emit:a}){const o=e,d=a,r=h(),f=h(!1);w(()=>{(()=>{const e=navigator.userAgent.toLowerCase();f.value=/micromessenger/.test(e)})()});const k=n(()=>({pageNumber:0,pageSize:o.pageSize,filters:o.params})),v=e=>{d("select",e)},b=e=>{d("delete",e)},_=e=>{d("search",e)},x=e=>{d("load",e)},B=e=>{d("select",e)},z=e=>{d("click",e)};return t({refresh:()=>r.value?.refresh(),loadMore:()=>r.value?.loadMore(),getAgents:()=>r.value?.getData()||[],getSelectedAgents:()=>r.value?.getSelectedItems()||[],clearSelected:()=>r.value?.clearSelected(),setSelectedAgents:e=>r.value?.setSelectedItems(e)}),(t,a)=>{const o=l,d=s;return c(),S(i,{api:e.api,params:k.value,selectable:e.selectable,deletable:e.deletable,searchable:e.searchable,"page-size":e.pageSize,"item-key":e.agentKey,"item-title-field":e.agentNameField,"item-description-field":e.agentDescriptionField,"left-spacing":0,"right-spacing":0,onSelect:v,onDelete:b,onSearch:_,onLoad:x,ref_key:"apiListRef",ref:r,showBorderBottom:"",borderBottomLeftOffset:70},{default:u(({item:e,index:t,selected:a})=>[p(E,{agent:e,"is-selected":a,"show-border-bottom":!0,onClick:z,onSelect:B},null,8,["agent","is-selected"])]),empty:u(()=>[g(t.$slots,"empty",{},()=>[p(o,{description:"暂无智能体",image:"search"},{description:u(()=>[...a[0]||(a[0]=[m("div",{class:"empty-description"},[m("p",null,"暂时没有智能体"),m("p",{class:"empty-tip"},"您可以创建新的智能体或调整搜索条件")],-1)])]),_:1})],!0)]),loading:u(()=>[g(t.$slots,"loading",{},()=>[p(d,{size:"24px",vertical:""},{default:u(()=>[...a[1]||(a[1]=[y("加载智能体数据...",-1)])]),_:1})],!0)]),header:u(()=>[g(t.$slots,"header",{},void 0,!0)]),footer:u(()=>[g(t.$slots,"footer",{},void 0,!0)]),_:3},8,["api","params","selectable","deletable","searchable","page-size","item-key","item-title-field","item-description-field"])}}}),[["__scopeId","data-v-4cbb9c59"]]);export{O as _};
