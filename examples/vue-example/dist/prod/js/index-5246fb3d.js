import{S as e}from"./sdkwork-page-container-390f5fca.js";import{m as a,r as t,t as l,o,n as s,p as i,x as n,H as u,y as d,z as r,C as c,D as m,E as v,F as p,G as g,w as h,B as b,_ as f,I as y,P as k}from"./index-2cafbb5e.js";/* empty css              */import{k as w,r as x,c as C,w as V,j as I,t as _,v as P,q as j,n as S,Q as U,Z as A,a0 as F,S as T,R as D,Y as G,X as z,$ as L,F as B,U as $,a4 as R,V as M,u as E,O as N}from"./vue-vendor-fce65f55.js";import{C as W}from"./index-6f80587d.js";/* empty css              *//* empty css              */import{_ as J}from"./sdkwork-popup-e3bba593.js";import{E as O}from"./index-17b6a864.js";import{S as H}from"./index-291bb189.js";import{S as q}from"./sdkwork-voice-speaker-category-list-popup-afa84c58.js";import{P as Q}from"./index-7a802429.js";import{S as X}from"./sdkwork-uploader-image-89853cd2.js";import{F as Y}from"./index-155d12c9.js";import{C as Z}from"./index-fa16672a.js";import"./utils-vendor-b5712723.js";import"./use-id-bc367f23.js";import"./sdkwork-pull-refresh-40508387.js";import"./index-ead435a5.js";import"./shared-9d0b1b96.js";import"./sdkwork-search-bar-a4feada5.js";import"./sdkwork-icon-105dbc30.js";import"./ListItem-b5deca21.js";import"./LoadingSection-b8ff1efc.js";import"./LoadMoreSection-86866234.js";import"./sdkwork-voice-clone-5aab00fb.js";/* empty css              *//* empty css              */import"./index-cd7a61a2.js";import"./index-6ac85e31.js";import"./index-4ce57344.js";import"./index-a5403cf2.js";const[K,ee]=a("stepper"),ae=(e,a)=>String(e)===String(a);const te=h(w({name:K,props:{min:t(1),max:t(1/0),name:t(""),step:t(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:l,showMinus:l,showInput:l,longPress:l,autoFixed:l,allowEmpty:Boolean,modelValue:o,inputWidth:o,buttonSize:o,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:t(1),decimalLength:o},emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(e,{emit:a}){const t=(a,t=!0)=>{const{min:l,max:o,allowEmpty:s,decimalLength:i}=e;return s&&""===a||(a=""===(a=d(String(a),!e.integer))?0:+a,a=Number.isNaN(a)?+l:a,a=t?Math.max(Math.min(+o,a),+l):a,r(i)&&(a=a.toFixed(+i))),a};let l;const o=x(),h=x((()=>{var l;const o=null!=(l=e.modelValue)?l:e.defaultValue,s=t(o);return ae(s,e.modelValue)||a("update:modelValue",s),s})()),b=C(()=>e.disabled||e.disableMinus||+h.value<=+e.min),f=C(()=>e.disabled||e.disablePlus||+h.value>=+e.max),y=C(()=>({width:s(e.inputWidth),height:s(e.buttonSize)})),k=C(()=>i(e.buttonSize)),w=a=>{e.beforeChange?v(e.beforeChange,{args:[a],done(){h.value=a}}):h.value=a},U=()=>{if("plus"===l&&f.value||"minus"===l&&b.value)return void a("overlimit",l);const o="minus"===l?-e.step:+e.step,s=t(p(+h.value,o));w(s),a(l)},A=a=>{const t=a.target,{value:l}=t,{decimalLength:o}=e;let s=d(String(l),!e.integer);if(r(o)&&s.includes(".")){const e=s.split(".");s=`${e[0]}.${e[1].slice(0,+o)}`}e.beforeChange?t.value=String(h.value):ae(l,s)||(t.value=s);const i=s===String(+s);w(i?+s:s)},F=t=>{var l;e.disableInput?null==(l=o.value)||l.blur():a("focus",t)},T=l=>{const o=l.target,s=t(o.value,e.autoFixed);o.value=String(s),h.value=s,S(()=>{a("blur",l),c()})};let D,G;const z=()=>{G=setTimeout(()=>{U(),z()},200)},L=a=>{e.longPress&&(clearTimeout(G),D&&m(a))},B=a=>{e.disableInput&&m(a)},$=a=>({onClick:e=>{m(e),l=a,U()},onTouchstartPassive:()=>{l=a,e.longPress&&(D=!1,clearTimeout(G),G=setTimeout(()=>{D=!0,U(),z()},g))},onTouchend:L,onTouchcancel:L});return V(()=>[e.max,e.min,e.integer,e.decimalLength],()=>{const e=t(h.value);ae(e,h.value)||(h.value=e)}),V(()=>e.modelValue,e=>{ae(e,h.value)||(h.value=t(e))}),V(h,t=>{a("update:modelValue",t),a("change",t,{name:e.name})}),n(()=>e.modelValue),()=>I("div",{role:"group",class:ee([e.theme])},[_(I("button",j({type:"button",style:k.value,class:[ee("minus",{disabled:b.value}),{[u]:!b.value}],"aria-disabled":b.value||void 0},$("minus")),null),[[P,e.showMinus]]),_(I("input",{ref:o,type:e.integer?"tel":"text",role:"spinbutton",class:ee("input"),value:h.value,style:y.value,disabled:e.disabled,readonly:e.disableInput,inputmode:e.integer?"numeric":"decimal",placeholder:e.placeholder,autocomplete:"off","aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":h.value,onBlur:T,onInput:A,onFocus:F,onMousedown:B},null),[[P,e.showInput]]),_(I("button",j({type:"button",style:k.value,class:[ee("plus",{disabled:f.value}),{[u]:!f.value}],"aria-disabled":f.value||void 0},$("plus")),null),[[P,e.showPlus]])])}})),le={class:"cameos-list-popup"},oe={class:"search-section"},se={class:"popup-content"},ie={class:"cameos-grid"},ne=["onClick"],ue={class:"cameo-avatar"},de=["src","alt"],re={class:"cameo-info"},ce={class:"cameo-name"},me={class:"cameo-tags"},ve={key:0,class:"selected-icon"},pe={key:0,class:"empty-state"},ge={class:"popup-footer"},he=f(w({__name:"sdkwork-cameos-list-popup",props:{modelValue:{type:Boolean,default:!1},title:{default:"é€‰æ‹©è§’è‰²"},height:{default:"70vh"},confirmText:{default:"ç¡®è®¤é€‰æ‹©"},api:{},params:{default:()=>({})},selectedCameoId:{},themeMode:{default:"auto"}},emits:["update:modelValue","confirm","close","select","search"],setup(e,{emit:a}){const t=e,l=a,o=x(t.modelValue),s=x(null),i=x(""),n=x([{id:"char1",name:"å•†åŠ¡ç²¾è‹±",avatar:"https://example.com/avatar1.jpg",tags:["å•†åŠ¡","ä¸“ä¸š"],description:"ä¸“ä¸šçš„å•†åŠ¡å½¢è±¡",type:"character",cameoCount:0,remixCount:0,viewCount:0,likeCount:0,rating:0,createdAt:"",updatedAt:""},{id:"char2",name:"ç”œç¾ä¸»æ’­",avatar:"https://example.com/avatar2.jpg",tags:["ä¸»æ’­","ç”œç¾"],description:"æ¸©æŸ”ç”œç¾çš„å½¢è±¡",type:"character",cameoCount:0,remixCount:0,viewCount:0,likeCount:0,rating:0,createdAt:"",updatedAt:""},{id:"char3",name:"çŸ¥è¯†è®²å¸ˆ",avatar:"https://example.com/avatar3.jpg",tags:["æ•™è‚²","è®²å¸ˆ"],description:"çŸ¥è¯†æ¸Šåšçš„è®²å¸ˆå½¢è±¡",type:"character",cameoCount:0,remixCount:0,viewCount:0,likeCount:0,rating:0,createdAt:"",updatedAt:""},{id:"char4",name:"å¯çˆ±å„¿ç«¥",avatar:"https://example.com/avatar4.jpg",tags:["å„¿ç«¥","å¯çˆ±"],description:"æ´»æ³¼å¯çˆ±çš„å„¿ç«¥å½¢è±¡",type:"character",cameoCount:0,remixCount:0,viewCount:0,likeCount:0,rating:0,createdAt:"",updatedAt:""},{id:"char5",name:"æ´»åŠ›é’å¹´",avatar:"https://example.com/avatar5.jpg",tags:["é’å¹´","æ´»åŠ›"],description:"å……æ»¡æ´»åŠ›çš„é’å¹´å½¢è±¡",type:"character",cameoCount:0,remixCount:0,viewCount:0,likeCount:0,rating:0,createdAt:"",updatedAt:""},{id:"char6",name:"æƒå¨ä¸“å®¶",avatar:"https://example.com/avatar6.jpg",tags:["ä¸“å®¶","æƒå¨"],description:"ä¸“ä¸šæƒå¨çš„ä¸“å®¶å½¢è±¡",type:"character",cameoCount:0,remixCount:0,viewCount:0,likeCount:0,rating:0,createdAt:"",updatedAt:""}]),u=C(()=>i.value?n.value.filter(e=>e.name.toLowerCase().includes(i.value.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(i.value.toLowerCase()))):n.value);V(()=>t.modelValue,e=>{o.value=e}),V(o,e=>{l("update:modelValue",e),e||l("close")}),V(()=>t.selectedCameoId,e=>{if(e){const a=n.value.find(a=>a.id===e);a&&(s.value=a)}});const d=()=>{s.value&&(l("confirm",s.value),o.value=!1)},r=()=>{l("search",i.value)};return(a,t)=>{const n=H,c=O,m=b,v=J;return U(),A(v,{show:o.value,"onUpdate:show":t[1]||(t[1]=e=>o.value=e),position:"bottom",style:M({height:e.height}),round:"",closeable:"","close-on-click-overlay":!1,"theme-mode":e.themeMode,title:e.title},{default:F(()=>[T("div",le,[T("div",oe,[I(n,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),placeholder:"æœç´¢è§’è‰²",onSearch:r,shape:"round",background:"transparent"},null,8,["modelValue"])]),T("div",se,[T("div",ie,[(U(!0),D(B,null,G(u.value,e=>(U(),D("div",{key:e.id,class:z(["cameo-card",{selected:s.value?.id===e.id}]),onClick:a=>(e=>{s.value=e,l("select",e)})(e)},[T("div",ue,[T("img",{src:e.avatar,alt:e.name},null,8,de)]),T("div",re,[T("div",ce,L(e.name),1),T("div",me,[(U(!0),D(B,null,G(e.tags,e=>(U(),D("span",{key:e,class:"tag"},L(e),1))),128))])]),s.value?.id===e.id?(U(),D("div",ve,"âœ“")):$("",!0)],10,ne))),128))]),0===u.value.length?(U(),D("div",pe,[I(c,{description:"æš‚æ— åŒ¹é…è§’è‰²",image:"search"},{description:F(()=>[...t[2]||(t[2]=[T("p",null,"æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„è§’è‰²",-1),T("p",{class:"empty-tip"},"è¯·å°è¯•å…¶ä»–æœç´¢å…³é”®è¯",-1)])]),_:1})])):$("",!0)]),T("div",ge,[I(m,{type:"primary",size:"large",block:"",onClick:d,disabled:!s.value,class:"confirm-btn"},{default:F(()=>[R(L(e.confirmText),1)]),_:1},8,["disabled"])])])]),_:1},8,["show","style","theme-mode","title"])}}}),[["__scopeId","data-v-27629d9d"]]),be={class:"generate-button"},fe={key:0,class:"points-cost"},ye={key:0,class:"generate-hint"},ke=f(w({__name:"GenerateButton",props:{disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},pointsCost:{default:100}},emits:["click"],setup(e,{emit:a}){const t=e,l=a,o=C(()=>t.disabled?"default":"primary"),s=C(()=>t.disabled?"è¯·å¡«å†™å®Œæ•´ä¿¡æ¯":"ç”Ÿæˆå£æ’­è§†é¢‘"),i=C(()=>"æ­£åœ¨ç”Ÿæˆè§†é¢‘..."),n=C(()=>t.disabled&&!t.loading),u=C(()=>t.disabled?"è¯·å¡«å†™æç¤ºè¯å’Œå¿…è¦ä¿¡æ¯":""),d=()=>{t.disabled||t.loading||l("click")};return(a,t)=>{const l=y,r=b;return U(),D("div",be,[I(r,{type:o.value,loading:e.loading,disabled:e.disabled,"loading-text":i.value,block:"",round:"",size:"large",onClick:d,class:"generate-btn"},{default:F(()=>[e.loading?$("",!0):(U(),D(B,{key:0},[I(l,{name:"play",class:"btn-icon"}),R(" "+L(s.value)+" ",1),!e.disabled&&e.pointsCost>0?(U(),D("span",fe," æ¶ˆè€— "+L(e.pointsCost)+" ç§¯åˆ† ",1)):$("",!0)],64))]),_:1},8,["type","loading","disabled","loading-text"]),n.value?(U(),D("div",ye,[I(l,{name:"info",class:"hint-icon"}),T("span",null,L(u.value),1)])):$("",!0)])}}}),[["__scopeId","data-v-4e3da444"]]),we={class:"sdkwork-segmented"},xe=["onClick"],Ce=f(w({__name:"sdkwork-segmented",props:{modelValue:{type:[String,Number,Boolean]},options:{}},emits:["update:modelValue"],setup(e,{emit:a}){const t=a;return(a,l)=>(U(),D("div",we,[(U(!0),D(B,null,G(e.options,(a,l)=>(U(),D("div",{key:a.value,class:z(["segmented-item",{active:e.modelValue===a.value}]),onClick:e=>{return l=a.value,void t("update:modelValue",l);var l}},L(a.text),11,xe))),128))]))}}),[["__scopeId","data-v-5ee286e6"]]),Ve=[{text:"å¹³é™",value:"neutral"},{text:"æ„‰å¿«",value:"happy"},{text:"å…´å¥‹",value:"excited"},{text:"ä¸¥è‚ƒ",value:"serious"}],Ie=[{text:"å•å›¾æ¨¡å¼",value:"single"},{text:"é¦–å°¾å¸§æ¨¡å¼",value:"frames"}],_e={class:"video-scene-item"},Pe={class:"scene-header"},je={class:"scene-title"},Se={class:"scene-actions"},Ue={class:"scene-content"},Ae={class:"image-preview-section"},Fe={class:"preview-modes"},Te={key:0,class:"single-image-preview"},De={class:"image-uploader-section"},Ge={key:1,class:"frames-preview"},ze={class:"frame-container"},Le={class:"frame-container"},Be={class:"scene-description-section"},$e={class:"dialogue-section"},Re={class:"voice-section"},Me={class:"voice-controls"},Ee={class:"voice-duration"},Ne={class:"voice-emotion"},We={class:"smart-generation-section"},Je={class:"smart-generation-buttons"},Oe={key:0,class:"smart-generation-progress"},He={class:"progress-info"},qe={class:"step-text"},Qe={class:"video-generation-section"},Xe={class:"video-container"},Ye={key:0,class:"video-placeholder"},Ze={class:"placeholder-content"},Ke={key:0,class:"disabled-tip"},ea={key:1,class:"video-player"},aa=["src"],ta={class:"video-actions"},la={key:0,class:"video-progress"},oa={class:"progress-info"},sa={class:"progress-text"},ia={key:1,class:"quick-actions"},na={class:"action-buttons"},ua=f(w({__name:"VideoSceneItem",props:{shot:{},index:{},showDelete:{type:Boolean,default:!0},shotsLength:{}},emits:["update:shot","delete","generate-image","generate-video"],setup(e,{emit:a}){const t=e,l=a,o=x("single");x(!1);const s=x(!1);x(!1);const i=x(!1),n=x(!1),u=x(!1),d=x(!1),r=x(!1),c=x(0),m=x(""),v=x(0),p=x(""),g=x([]),h=x([]),f=x([]),k=Ie,w=Ve,_=x(t.shot.prompt||""),P=x(t.shot.startPrompt||""),j=x(t.shot.endPrompt||"");C(()=>{const e=t.shot.image||t.shot.startFrame||t.shot.endFrame,a=_.value.trim()||P.value.trim()||j.value.trim(),l=t.shot.videoDescription?.trim(),o=t.shot.dialogue?.trim();return e||a||l||o});const S=C(()=>{const e=t.shot.image||t.shot.startFrame||t.shot.endFrame,a=_.value.trim()||P.value.trim()||j.value.trim(),l=t.shot.videoDescription?.trim(),o=t.shot.dialogue?.trim();return{hasImages:e,hasPrompts:a,hasDescription:l,hasDialogue:o,isComplete:e&&a&&l&&o}});V(()=>t.shot,e=>{_.value=e.prompt||"",P.value=e.startPrompt||"",j.value=e.endPrompt||"",e.image?o.value="single":(e.startFrame||e.endFrame)&&(o.value="frames")},{deep:!0}),V(_,e=>{l("update:shot",{...t.shot,prompt:e})}),V(P,e=>{l("update:shot",{...t.shot,startPrompt:e})}),V(j,e=>{l("update:shot",{...t.shot,endPrompt:e})});const G=(e,a)=>{const o=a.url||URL.createObjectURL(e);l("update:shot",{...t.shot,image:o}),g.value=[]},z=e=>{l("update:shot",{...t.shot,image:void 0})},B=(e,a)=>{console.log("é¢„è§ˆå›¾ç‰‡:",a)},M=(e,a)=>{const o=a.url||URL.createObjectURL(e);l("update:shot",{...t.shot,startFrame:o}),h.value=[]},N=e=>{l("update:shot",{...t.shot,startFrame:void 0})},W=(e,a)=>{console.log("é¢„è§ˆé¦–å¸§:",a)},J=(e,a)=>{const o=a.url||URL.createObjectURL(e);l("update:shot",{...t.shot,endFrame:o}),f.value=[]},O=e=>{l("update:shot",{...t.shot,endFrame:void 0})},H=(e,a)=>{console.log("é¢„è§ˆå°¾å¸§:",a)},q=e=>{const a=e.toString();l("update:shot",{...t.shot,emotion:a})},Z=e=>{_.value=e},K=e=>{P.value=e},ee=e=>{j.value=e},ae=e=>{s.value=!0,l("generate-image",t.shot.id,"single",e),setTimeout(()=>{s.value=!1},2e3)},le=e=>{i.value=!0,l("generate-image",t.shot.id,"start",e),setTimeout(()=>{i.value=!1},2e3)},oe=e=>{n.value=!0,l("generate-image",t.shot.id,"end",e),setTimeout(()=>{n.value=!1},2e3)},se=e=>{s.value=!0,l("generate-image",t.shot.id,"single","",e),setTimeout(()=>{s.value=!1},2e3)},ie=e=>{i.value=!0,l("generate-image",t.shot.id,"start","",e),setTimeout(()=>{i.value=!1},2e3)},ne=e=>{n.value=!0,l("generate-image",t.shot.id,"end","",e),setTimeout(()=>{n.value=!1},2e3)},ue=()=>{if("single"===o.value&&!t.shot.image)return;if(!("frames"!==o.value||t.shot.startFrame&&t.shot.endFrame))return;u.value=!0,c.value=0,m.value="æ­£åœ¨å‡†å¤‡è§†é¢‘ç”Ÿæˆ...",l("generate-video",t.shot.id);const e=setInterval(()=>{c.value+=10,c.value<=30?m.value="æ­£åœ¨åˆ†æå›¾åƒå†…å®¹...":c.value<=60?m.value="æ­£åœ¨ç”Ÿæˆè§†é¢‘å¸§...":c.value<90?m.value="æ­£åœ¨æ¸²æŸ“è§†é¢‘...":c.value>=90&&(m.value="å³å°†å®Œæˆ..."),c.value>=100&&(clearInterval(e),m.value="è§†é¢‘ç”Ÿæˆå®Œæˆï¼",setTimeout(()=>{u.value=!1,m.value="",l("update:shot",{...t.shot,video:"https://example.com/video.mp4"})},1e3))},500)},de=()=>{d.value=!0,c.value=0,m.value="æ­£åœ¨é‡æ–°ç”Ÿæˆè§†é¢‘...",l("generate-video",t.shot.id);const e=setInterval(()=>{c.value+=15,c.value<=30?m.value="æ­£åœ¨åˆ†æå›¾åƒå†…å®¹...":c.value<=60?m.value="æ­£åœ¨ç”Ÿæˆè§†é¢‘å¸§...":c.value<90?m.value="æ­£åœ¨æ¸²æŸ“è§†é¢‘...":c.value>=90&&(m.value="å³å°†å®Œæˆ..."),c.value>=100&&(clearInterval(e),m.value="è§†é¢‘é‡æ–°ç”Ÿæˆå®Œæˆï¼",setTimeout(()=>{d.value=!1,m.value="",l("update:shot",{...t.shot,video:"https://example.com/video-regenerated.mp4"})},1e3))},400)},re=()=>{if(!t.shot.video)return;const e=document.createElement("a");e.href=t.shot.video,e.download=`scene-${t.index+1}-video.mp4`,document.body.appendChild(e),e.click(),document.body.removeChild(e)},ce=async()=>{r.value=!0,v.value=0,p.value="å‡†å¤‡ç”Ÿæˆ...";const e=[{progress:10,step:"åˆ†æåœºæ™¯éœ€æ±‚..."},{progress:25,step:"ç”Ÿæˆåœºæ™¯æè¿°..."},{progress:40,step:"ç¼–å†™å°è¯å†…å®¹..."},{progress:60,step:"ç”Ÿæˆåœºæ™¯å›¾ç‰‡..."},{progress:80,step:"å¤„ç†å›¾ç‰‡èµ„æº..."},{progress:100,step:"ç”Ÿæˆå®Œæˆï¼"}];for(let a=0;a<e.length;a++){const s=e[a];if(p.value=s.step,v.value=s.progress,25===s.progress){const e=`é•œå¤´${t.index+1}çš„è‡ªåŠ¨ç”Ÿæˆæè¿°ï¼ŒåŒ…å«åœºæ™¯åŠ¨ä½œå’Œå˜åŒ–`;l("update:shot",{...t.shot,videoDescription:e})}else if(40===s.progress){const e=`è¿™æ˜¯é•œå¤´${t.index+1}çš„è‡ªåŠ¨ç”Ÿæˆå°è¯å†…å®¹`;l("update:shot",{...t.shot,dialogue:e})}else 60===s.progress&&("single"===o.value?l("generate-image",t.shot.id,"single",`é•œå¤´${t.index+1}çš„åœºæ™¯å›¾ç‰‡`):(l("generate-image",t.shot.id,"start",`é•œå¤´${t.index+1}çš„é¦–å¸§å›¾ç‰‡`),setTimeout(()=>{l("generate-image",t.shot.id,"end",`é•œå¤´${t.index+1}çš„å°¾å¸§å›¾ç‰‡`)},1e3)));await new Promise(e=>setTimeout(e,800))}setTimeout(()=>{r.value=!1,v.value=0,p.value=""},500)};return(a,t)=>{const l=b,s=Ce,i=Y,n=te,x=y,C=Q;return U(),D("div",_e,[T("div",Pe,[T("div",je,"é•œå¤´ "+L(e.index+1),1),T("div",Se,[e.showDelete&&e.shotsLength>1?(U(),A(l,{key:0,type:"danger",size:"mini",onClick:t[0]||(t[0]=t=>a.$emit("delete",e.shot.id)),class:"action-btn"},{default:F(()=>[...t[8]||(t[8]=[R(" åˆ é™¤ ",-1)])]),_:1})):$("",!0)])]),T("div",Ue,[T("div",Ae,[T("div",Fe,[I(s,{modelValue:o.value,"onUpdate:modelValue":t[1]||(t[1]=e=>o.value=e),options:E(k)},null,8,["modelValue","options"])]),"single"===o.value?(U(),D("div",Te,[T("div",De,[I(X,{modelValue:g.value,"onUpdate:modelValue":t[2]||(t[2]=e=>g.value=e),multiple:!1,"auto-upload":!0,"max-count":1,title:"ä¸Šä¼ æˆ–ç”Ÿæˆå›¾ç‰‡",subtitle:"æ”¯æŒ JPGã€PNGã€GIFã€WEBP ç­‰æ ¼å¼ï¼Œæˆ–ä½¿ç”¨AIç”Ÿæˆ","show-prompt":!0,"ai-generate":!0,"prompt-value":_.value,"onUpdate:prompt":Z,onAiGenerate:ae,onImageAiGenerate:se,onUploadSuccess:G,onImageRemove:z,onImagePreview:B,class:"image-uploader"},null,8,["modelValue","prompt-value"])])])):(U(),D("div",Ge,[T("div",ze,[t[9]||(t[9]=T("div",{class:"frame-title"},"é¦–å¸§",-1)),I(X,{modelValue:h.value,"onUpdate:modelValue":t[3]||(t[3]=e=>h.value=e),multiple:!1,"auto-upload":!0,"max-count":1,title:"ä¸Šä¼ é¦–å¸§",subtitle:"æ”¯æŒ JPGã€PNGã€GIFã€WEBP ç­‰æ ¼å¼ï¼Œæˆ–ä½¿ç”¨AIç”Ÿæˆ","show-prompt":!0,"ai-generate":!0,"prompt-value":P.value,"onUpdate:prompt":K,onAiGenerate:le,onImageAiGenerate:ie,onUploadSuccess:M,onImageRemove:N,onImagePreview:W,class:"frame-uploader-component"},null,8,["modelValue","prompt-value"])]),T("div",Le,[t[10]||(t[10]=T("div",{class:"frame-title"},"å°¾å¸§",-1)),I(X,{modelValue:f.value,"onUpdate:modelValue":t[4]||(t[4]=e=>f.value=e),multiple:!1,"auto-upload":!0,"max-count":1,title:"ä¸Šä¼ å°¾å¸§",subtitle:"æ”¯æŒ JPGã€PNGã€GIFã€WEBP ç­‰æ ¼å¼ï¼Œæˆ–ä½¿ç”¨AIç”Ÿæˆ","show-prompt":!0,"ai-generate":!0,"prompt-value":j.value,"onUpdate:prompt":ee,onAiGenerate:oe,onImageAiGenerate:ne,onUploadSuccess:J,onImageRemove:O,onImagePreview:H,class:"frame-uploader-component"},null,8,["modelValue","prompt-value"])])]))]),T("div",Be,[t[11]||(t[11]=T("div",{class:"section-label"},"é•œå¤´æè¿°ï¼ˆè§†é¢‘ç”Ÿæˆï¼‰",-1)),I(i,{"model-value":e.shot.videoDescription,"onUpdate:modelValue":t[5]||(t[5]=t=>a.$emit("update:shot",{...e.shot,videoDescription:t})),type:"textarea",rows:2,autosize:"",maxlength:"200",placeholder:"æè¿°è¯¥é•œå¤´çš„è§†é¢‘å†…å®¹ï¼ˆåŠ¨ä½œã€åœºæ™¯å˜åŒ–ã€é•œå¤´è¿åŠ¨ç­‰ï¼‰",class:"scene-field"},null,8,["model-value"])]),T("div",$e,[t[12]||(t[12]=T("div",{class:"section-label"},"å°è¯å†…å®¹",-1)),I(i,{"model-value":e.shot.dialogue,"onUpdate:modelValue":t[6]||(t[6]=t=>a.$emit("update:shot",{...e.shot,dialogue:t})),type:"textarea",rows:2,autosize:"",maxlength:"200","show-word-limit":"",placeholder:"è¯¥é•œå¤´çš„å°è¯å†…å®¹",class:"scene-field"},null,8,["model-value"])]),T("div",Re,[t[15]||(t[15]=T("div",{class:"section-label"},"é…éŸ³è®¾ç½®",-1)),T("div",Me,[T("div",Ee,[t[13]||(t[13]=T("span",{class:"duration-label"},"æ—¶é•¿ï¼ˆç§’ï¼‰:",-1)),I(n,{"model-value":e.shot.duration,"onUpdate:modelValue":t[7]||(t[7]=t=>a.$emit("update:shot",{...e.shot,duration:t})),min:1,max:30,integer:"",class:"duration-stepper"},null,8,["model-value"])]),T("div",Ne,[t[14]||(t[14]=T("span",{class:"emotion-label"},"æƒ…æ„Ÿ:",-1)),I(s,{"model-value":e.shot.emotion||"neutral","onUpdate:modelValue":q,options:E(w),class:"emotion-selector"},null,8,["model-value","options"])])])]),T("div",We,[t[18]||(t[18]=T("div",{class:"section-label"},"æ™ºèƒ½ç”Ÿæˆ",-1)),T("div",Je,[I(l,{type:"primary",size:"small",onClick:ce,loading:r.value,class:"smart-generate-btn"},{default:F(()=>[I(x,{name:"play-circle"}),t[16]||(t[16]=R(" ä¸€é”®ç”Ÿæˆæ‰€æœ‰å†…å®¹ ",-1))]),_:1},8,["loading"]),t[17]||(t[17]=T("div",{class:"generation-tips"},[T("span",null,"è‡ªåŠ¨ç”Ÿæˆå›¾ç‰‡ã€æè¿°å’Œå°è¯")],-1))]),r.value?(U(),D("div",Oe,[I(C,{percentage:v.value,"show-pivot":!1,"stroke-width":"4"},null,8,["percentage"]),T("div",He,[I(x,{name:"passed"}),T("span",qe,L(p.value),1)])])):$("",!0)]),T("div",Qe,[t[28]||(t[28]=T("div",{class:"section-label"},"è§†é¢‘ç”Ÿæˆ",-1)),T("div",Xe,[e.shot.video?(U(),D("div",ea,[T("video",{src:e.shot.video,controls:"",class:"scene-video"},null,8,aa),T("div",ta,[I(l,{type:"primary",size:"mini",onClick:de,loading:d.value,class:"video-regenerate-btn"},{default:F(()=>[I(x,{name:"replay"}),t[22]||(t[22]=R(" é‡æ–°ç”Ÿæˆ ",-1))]),_:1},8,["loading"]),I(l,{type:"default",size:"mini",onClick:re,class:"video-download-btn"},{default:F(()=>[I(x,{name:"down"}),t[23]||(t[23]=R(" ä¸‹è½½ ",-1))]),_:1})])])):(U(),D("div",Ye,[T("div",Ze,[I(x,{name:"play-circle-o",size:"48"}),t[21]||(t[21]=T("span",{class:"placeholder-text"},"å‡†å¤‡å¥½åç‚¹å‡»ç”Ÿæˆè§†é¢‘",-1)),I(l,{type:"primary",size:"small",onClick:ue,loading:u.value,disabled:!S.value.hasImages,class:"generate-video-btn"},{default:F(()=>[I(x,{name:"video-o"}),t[19]||(t[19]=R(" ç”Ÿæˆè§†é¢‘ ",-1))]),_:1},8,["loading","disabled"]),S.value.hasImages?$("",!0):(U(),D("div",Ke,[I(x,{name:"info-o"}),t[20]||(t[20]=T("span",null,"è¯·å…ˆæ·»åŠ å›¾ç‰‡æˆ–ä½¿ç”¨AIç”Ÿæˆå›¾ç‰‡",-1))]))])]))]),u.value||d.value?(U(),D("div",la,[I(C,{percentage:c.value,"show-pivot":!1,"stroke-width":"4"},null,8,["percentage"]),T("div",oa,[I(x,{name:"passed"}),T("span",sa,L(m.value),1)])])):$("",!0),e.shot.video||S.value.isComplete?(U(),D("div",ia,[t[27]||(t[27]=T("div",{class:"action-title"},"å¿«é€Ÿæ“ä½œ",-1)),T("div",na,[!e.shot.video&&S.value.isComplete?(U(),A(l,{key:0,type:"primary",size:"small",onClick:ue,loading:u.value,class:"action-btn"},{default:F(()=>[I(x,{name:"play"}),t[24]||(t[24]=R(" æ’­æ”¾ç”Ÿæˆ ",-1))]),_:1},8,["loading"])):$("",!0),e.shot.video?(U(),A(l,{key:1,type:"success",size:"small",onClick:re,class:"action-btn"},{default:F(()=>[I(x,{name:"download"}),t[25]||(t[25]=R(" å¯¼å‡ºè§†é¢‘ ",-1))]),_:1})):$("",!0),e.shot.video?(U(),A(l,{key:2,type:"warning",size:"small",onClick:de,loading:d.value,class:"action-btn"},{default:F(()=>[I(x,{name:"replay"}),t[26]||(t[26]=R(" é‡æ–°ç”Ÿæˆ ",-1))]),_:1},8,["loading"])):$("",!0)])])):$("",!0)])])])}}}),[["__scopeId","data-v-a2b07d0c"]]),da={class:"storyboard-popup"},ra={class:"popup-header"},ca={class:"popup-content"},ma={class:"shot-list-section"},va={class:"section-header"},pa={class:"shot-list"},ga=w({__name:"StoryboardPopup",props:{modelValue:{type:Boolean},selectedStoryboard:{}},emits:["update:modelValue","confirm"],setup(e,{emit:a}){const t=e,l=a,o=x(t.modelValue),s=x(""),i=x([{id:u(),content:"",dialogue:"",duration:3,startFrame:"",endFrame:"",image:"",prompt:"",startPrompt:"",endPrompt:"",videoDescription:"",emotion:"neutral"}]);x(!1);const n=C(()=>s.value.trim().length>0&&i.value.length>0&&i.value.every(e=>e.content.trim().length>0&&e.dialogue.trim().length>0));function u(){return Date.now().toString()+Math.random().toString(36).slice(2,11)}V(()=>t.modelValue,e=>{o.value=e,e&&t.selectedStoryboard&&(s.value=t.selectedStoryboard.videoDescription,i.value=[...t.selectedStoryboard.shots])}),V(o,e=>{l("update:modelValue",e),e||setTimeout(()=>{s.value="",i.value=[{id:u(),content:"",dialogue:"",duration:3,startFrame:"",endFrame:"",image:"",prompt:"",startPrompt:"",endPrompt:"",videoDescription:"",emotion:"neutral"}]},300)});const d=()=>{i.value.push({id:u(),content:"",dialogue:"",duration:3,startFrame:"",endFrame:"",image:"",prompt:"",startPrompt:"",endPrompt:"",videoDescription:"",emotion:"neutral"})},r=e=>{const a=i.value.findIndex(a=>a.id===e);-1!==a&&i.value.splice(a,1)},c=(e,a,t)=>{const l=i.value.find(a=>a.id===e);l&&setTimeout(()=>{const e=`https://picsum.photos/seed/${Date.now()}-${Math.random().toString(36).slice(2,9)}/400/300.jpg`;"single"===a?l.image=e:"start"===a?l.startFrame=e:"end"===a&&(l.endFrame=e),"single"===a?l.prompt=t:"start"===a?l.startPrompt=t:"end"===a&&(l.endPrompt=t),!l.videoDescription&&t&&(l.videoDescription=t)},1500)},m=()=>{o.value=!1},v=()=>{if(n.value){const e={videoDescription:s.value,shots:i.value.map(e=>({...e}))};l("confirm",e),o.value=!1}};return(e,a)=>{const t=b,l=k;return U(),A(l,{show:o.value,"onUpdate:show":a[0]||(a[0]=e=>o.value=e),position:"bottom",style:{height:"100%"},round:""},{default:F(()=>[T("div",da,[T("div",ra,[I(t,{type:"default",size:"small",onClick:m,class:"cancel-btn"},{default:F(()=>[...a[1]||(a[1]=[R(" å–æ¶ˆ ",-1)])]),_:1}),a[3]||(a[3]=T("div",{class:"header-title"},"åˆ†é•œè®¾ç½®",-1)),I(t,{type:"primary",size:"small",onClick:v,disabled:!n.value,class:"confirm-btn"},{default:F(()=>[...a[2]||(a[2]=[R(" ç¡®è®¤è®¾ç½® ",-1)])]),_:1},8,["disabled"])]),T("div",ca,[T("div",ma,[T("div",va,[a[5]||(a[5]=T("div",{class:"section-title"},"é•œå¤´è®¾ç½®",-1)),I(t,{type:"primary",size:"mini",onClick:d},{default:F(()=>[...a[4]||(a[4]=[R(" æ·»åŠ é•œå¤´ ",-1)])]),_:1})]),T("div",pa,[(U(!0),D(B,null,G(i.value,(e,a)=>(U(),A(ua,{key:e.id,shot:e,index:a,"shots-length":i.value.length,"onUpdate:shot":e=>((e,a)=>{i.value[e]=a})(a,e),onDelete:r,onGenerateImage:c},null,8,["shot","index","shots-length","onUpdate:shot"]))),128))])])])])]),_:1},8,["show"])}}}),ha=f(ga,[["__scopeId","data-v-f81ef830"]]),ba={class:"minimal-dubbing-generation"},fa={class:"image-section"},ya={class:"text-section"},ka={class:"ai-suggestion"},wa=f(w({__name:"sdkwork-generation-dubbing",emits:["showHelp"],setup(e,{emit:a}){const t=x(null),l=x([]),o=x(""),s=x(""),i=x(!1),n=x(null),u=x(!1),d=x(null),r=x(!1),c=x(null),m=x(!1),v=x(""),p=x(!1),g=x(!1),h=C(()=>(null!==t.value||null!==n.value)&&null!==d.value&&null!==c.value&&v.value.trim().length>0),f=e=>{const a=e.file||e;t.value=a;const l=new FileReader;l.onload=e=>{o.value=e.target?.result},l.readAsDataURL(a)},k=()=>{t.value=null,o.value=""},w=e=>{console.log("Preview image:",e)},_=e=>{s.value=e},P=e=>{s.value=e,S(e)},j=()=>{s.value.trim()||(s.value="ç”Ÿæˆä¸€ä¸ªé€‚åˆå£æ’­è§†é¢‘çš„è§’è‰²å½¢è±¡ï¼Œè¡¨æƒ…è‡ªç„¶ï¼ŒèƒŒæ™¯ç®€æ´"),S(s.value)},S=async e=>{if(!i.value){i.value=!0;try{await new Promise(e=>setTimeout(e,3e3));const a=`https://picsum.photos/seed/${Date.now()}/400/300.jpg`;fetch(a).then(e=>e.blob()).then(e=>{const s=new File([e],"ai-generated.jpg",{type:"image/jpeg"});l.value=[s],t.value=s,o.value=a}),console.log("AIå›¾ç‰‡ç”ŸæˆæˆåŠŸ:",e)}catch(a){console.error("AIå›¾ç‰‡ç”Ÿæˆå¤±è´¥:",a)}finally{i.value=!1}}},A=async()=>{if(!p.value){p.value=!0;try{await new Promise(e=>setTimeout(e,2e3)),v.value="è¿™æ˜¯ä¸€æ®µç”±AIç”Ÿæˆçš„å£æ’­æ–‡å­—ç¤ºä¾‹ï¼Œå¯ä»¥æ ¹æ®æ‚¨çš„éœ€æ±‚è¿›è¡Œä¿®æ”¹ã€‚AIç”Ÿæˆçš„æ–‡å­—èƒ½å¤Ÿæ›´å¥½åœ°åŒ¹é…è¯­éŸ³èŠ‚å¥å’Œæƒ…æ„Ÿè¡¨è¾¾ã€‚"}catch(e){console.error("AIç”Ÿæˆå¤±è´¥:",e)}finally{p.value=!1}}},G=e=>{n.value=e},z=e=>{n.value=e},L=e=>{d.value=e},B=e=>{d.value=e},$=e=>{c.value=e},M=e=>{c.value=e};V(t,e=>{e?l.value.includes(e)||(l.value=[e]):l.value=[]});const E=async()=>{if(h.value&&!g.value){g.value=!0;try{const e={character:t.value?"uploaded":n.value?.id,voice:d.value?.id,storyboard:c.value?.id,script:v.value};console.log("ç”Ÿæˆå£æ’­è§†é¢‘å‚æ•°:",e),await new Promise(e=>setTimeout(e,3e3)),console.log("å£æ’­è§†é¢‘ç”ŸæˆæˆåŠŸ!")}catch(e){console.error("å£æ’­è§†é¢‘ç”Ÿæˆå¤±è´¥:",e)}finally{g.value=!1}}};return(e,a)=>{const t=Y,o=y,i=b,x=Z,C=W;return U(),D("div",ba,[T("div",fa,[I(X,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e),multiple:!1,"auto-upload":!0,"max-count":1,title:"ä¸Šä¼ æˆ–ç”Ÿæˆè§’è‰²å›¾ç‰‡",subtitle:"æ”¯æŒ JPGã€PNGã€GIFã€WEBP ç­‰æ ¼å¼ï¼Œæˆ–ä½¿ç”¨AIç”Ÿæˆ","show-prompt":!0,"ai-generate":!0,"prompt-value":s.value,"onUpdate:prompt":_,onAiGenerate:P,onImageAiGenerate:j,onUploadSuccess:f,onImageRemove:k,onImagePreview:w,class:"image-uploader"},null,8,["modelValue","prompt-value"])]),T("div",ya,[a[9]||(a[9]=T("div",{class:"section-header"},[T("span",{class:"section-title"},"å£æ’­æ–‡å­—"),T("span",{class:"char-count"})],-1)),I(t,{modelValue:v.value,"onUpdate:modelValue":a[1]||(a[1]=e=>v.value=e),type:"textarea",rows:4,autosize:"",maxlength:"1000","show-word-limit":"",placeholder:"è¯·è¾“å…¥å£æ’­æ–‡å­—å†…å®¹...",class:"script-field"},null,8,["modelValue"]),T("div",ka,[I(i,{size:"small",onClick:A,loading:p.value,class:"ai-btn"},{default:F(()=>[I(o,{name:"magic"}),a[8]||(a[8]=R(" AIç”Ÿæˆ ",-1))]),_:1},8,["loading"])])]),I(C,{class:"core-section"},{default:F(()=>[I(x,{title:c.value?`åˆ†é•œè®¾ç½® (${c.value.shots.length}ä¸ªé•œå¤´)`:"é€‰æ‹©åˆ†é•œ",label:c.value?c.value.videoDescription:"ç‚¹å‡»è®¾ç½®åˆ†é•œ",icon:"photo-o","is-link":"",onClick:a[2]||(a[2]=e=>m.value=!0),class:"option-cell"},{icon:F(()=>[...a[10]||(a[10]=[T("div",{class:"cell-icon"},"ğŸ¬",-1)])]),_:1},8,["title","label"]),I(x,{title:n.value?.name||"é€‰æ‹©è§’è‰²",label:n.value?n.value.description:"ç‚¹å‡»é€‰æ‹©è§’è‰²",icon:"user-o","is-link":"",onClick:a[3]||(a[3]=e=>u.value=!0),class:"option-cell"},{icon:F(()=>[...a[11]||(a[11]=[T("div",{class:"cell-icon"},"ğŸ‘¤",-1)])]),_:1},8,["title","label"]),I(x,{title:d.value?.name||"é€‰æ‹©è¯­éŸ³",label:d.value?d.value.description:"ç‚¹å‡»é€‰æ‹©è¯­éŸ³",icon:"volume-o","is-link":"",onClick:a[4]||(a[4]=e=>r.value=!0),class:"option-cell"},{icon:F(()=>[...a[12]||(a[12]=[T("div",{class:"cell-icon"},"ğŸ¤",-1)])]),_:1},8,["title","label"])]),_:1}),I(ke,{disabled:g.value||!h.value,loading:g.value,onClick:E},null,8,["disabled","loading"]),I(he,{modelValue:u.value,"onUpdate:modelValue":a[5]||(a[5]=e=>u.value=e),title:"é€‰æ‹©è§’è‰²",height:"100vh","confirm-text":"ç¡®è®¤é€‰æ‹©","selected-cameo-id":n.value?.id,onConfirm:z,onSelect:G},null,8,["modelValue","selected-cameo-id"]),I(q,{modelValue:r.value,"onUpdate:modelValue":a[6]||(a[6]=e=>r.value=e),title:"é€‰æ‹©è¯­éŸ³",height:"100vh","confirm-text":"ç¡®è®¤é€‰æ‹©","selected-speaker-id":d.value?.id,onConfirm:B,onSelect:L},null,8,["modelValue","selected-speaker-id"]),I(ha,{modelValue:m.value,"onUpdate:modelValue":a[7]||(a[7]=e=>m.value=e),"selected-storyboard":c.value,onConfirm:M,onSelect:$},null,8,["modelValue","selected-storyboard"])])}}}),[["__scopeId","data-v-8099f96f"]]),xa={class:"help-content"},Ca=f(w({__name:"index",setup(a){N();const t=x(!1),l=()=>{t.value=!0};return(a,o)=>{const s=b,i=k,n=e;return U(),A(n,{"safe-area":"",scrollable:"","theme-mode":"auto",backgroundColor:"black !important",contentBackgroundColor:"black !important"},{default:F(()=>[I(wa,{onShowHelp:l}),I(i,{show:t.value,"onUpdate:show":o[1]||(o[1]=e=>t.value=e),position:"bottom",round:"",class:"help-panel"},{default:F(()=>[T("div",xa,[o[3]||(o[3]=T("h3",null,"ä½¿ç”¨å¸®åŠ©",-1)),o[4]||(o[4]=T("div",{class:"help-section"},[T("h4",null,"åŠŸèƒ½è¯´æ˜"),T("p",null,"è§†é¢‘å£æ’­ç”Ÿæˆå™¨å¯ä»¥å¸®åŠ©æ‚¨å¿«é€Ÿåˆ›å»ºä¸“ä¸šçš„å£æ’­è§†é¢‘ï¼Œæ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š"),T("ul",null,[T("li",null,"ğŸ“¸ ä¸Šä¼ å›¾ç‰‡æˆ–é€‰æ‹©è§’è‰²åº“ä¸­çš„è§’è‰²"),T("li",null,"ğŸ—£ï¸ é€‰æ‹©å¤šç§å‘éŸ³äººï¼ˆä¸­è‹±æ–‡æ”¯æŒï¼‰"),T("li",null,"âœï¸ è¾“å…¥å£æ’­æ–‡å­—ï¼Œæ”¯æŒAIæ™ºèƒ½ç”Ÿæˆ"),T("li",null,"ğŸ¬ é€‰æ‹©ä¸åŒçš„åœºæ™¯å’Œé£æ ¼"),T("li",null,"âš™ï¸ è‡ªå®šä¹‰è§†é¢‘å‚æ•°é…ç½®")])],-1)),o[5]||(o[5]=T("div",{class:"help-section"},[T("h4",null,"ä½¿ç”¨æ­¥éª¤"),T("ol",null,[T("li",null,"é€‰æ‹©è§’è‰²æˆ–ä¸Šä¼ å›¾ç‰‡"),T("li",null,"é€‰æ‹©å‘éŸ³äºº"),T("li",null,"è¾“å…¥å£æ’­æ–‡å­—ï¼ˆå¯ä½¿ç”¨AIç”Ÿæˆï¼‰"),T("li",null,"é€‰æ‹©åœºæ™¯å’Œé£æ ¼"),T("li",null,"é…ç½®è§†é¢‘å‚æ•°"),T("li",null,"ç‚¹å‡»ç”ŸæˆæŒ‰é’®")])],-1)),I(s,{type:"primary",size:"large",onClick:o[0]||(o[0]=e=>t.value=!1),class:"close-help-btn"},{default:F(()=>[...o[2]||(o[2]=[R(" çŸ¥é“äº† ",-1)])]),_:1})])]),_:1},8,["show"])]),_:1})}}}),[["__scopeId","data-v-d79aee51"]]);export{Ca as default};
