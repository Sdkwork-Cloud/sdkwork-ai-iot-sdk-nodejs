import{c as e,r as a,q as i,t as r,aq as o,y as s,X as t,Z as n,ap as l,L as d,w as c}from"./index-34815b62.js";import{u}from"./use-tab-status-c1e0ad5e.js";import{k as f,r as g,c as p,w as v,ah as h,b as m,j as b,n as x}from"./vue-vendor-905d75e5.js";const[T,j,k]=e("list");const w=c(f({name:T,props:{error:Boolean,offset:a(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:i("down"),loadingText:String,finishedText:String,immediateCheck:r},emits:["load","update:error","update:loading"],setup(e,{emit:a,slots:i}){const r=g(e.loading),c=g(),f=g(),T=u(),w=o(c),B=p(()=>e.scroller||w.value),C=()=>{x(()=>{if(r.value||e.finished||e.disabled||e.error||!1===(null==T?void 0:T.value))return;const{direction:i}=e,o=+e.offset,s=n(B);if(!s.height||l(c))return;let t=!1;const d=n(f);t="up"===i?s.top-d.top<=o:d.bottom-s.bottom<=o,t&&(r.value=!0,a("update:loading",!0),a("load"))})},S=()=>{if(e.finished){const a=i.finished?i.finished():e.finishedText;if(a)return b("div",{class:j("finished-text")},[a])}},q=()=>{a("update:error",!1),C()},y=()=>{if(e.error){const a=i.error?i.error():e.errorText;if(a)return b("div",{role:"button",class:j("error-text"),tabindex:0,onClick:q},[a])}},L=()=>{if(r.value&&!e.finished&&!e.disabled)return b("div",{class:j("loading")},[i.loading?i.loading():b(d,{class:j("loading-icon")},{default:()=>[e.loadingText||k("loading")]})])};return v(()=>[e.loading,e.finished,e.error],C),T&&v(T,e=>{e&&C()}),h(()=>{r.value=e.loading}),m(()=>{e.immediateCheck&&C()}),s({check:C}),t("scroll",C,{target:B,passive:!0}),()=>{var a;const o=null==(a=i.default)?void 0:a.call(i),s=b("div",{ref:f,class:j("placeholder")},null);return b("div",{ref:c,role:"feed",class:j(),"aria-busy":r.value},["down"===e.direction?o:s,L(),S(),y(),"up"===e.direction?o:s])}}}));export{w as L};
