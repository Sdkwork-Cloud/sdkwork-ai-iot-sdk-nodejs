import{z as e,k as a,r as t,p as o,w as i,c as n,b as l,o as s,Q as d,R as r,S as c,W as u,X as m,V as f,i as v,O as b,g as p,U as h,F as k,a4 as g,$ as w,j as y,a0 as _,Y as I,Z as C,u as B}from"./vue-vendor-a2672387.js";import{_ as x,q as V,a as A}from"./index-5affcab4.js";import{a as M}from"./chat-76669d74.js";const O=e("notification",{state:()=>({notifications:[],unreadCount:0}),getters:{unreadNotifications:e=>e.notifications.filter(e=>!e.read),readNotifications:e=>e.notifications.filter(e=>e.read),getNotificationsByType:e=>a=>e.notifications.filter(e=>e.type===a)},actions:{addNotification(e){const a={...e,id:Date.now().toString(),timestamp:new Date,read:!1};this.notifications.unshift(a),this.unreadCount++},markAsRead(e){const a=this.notifications.find(a=>a.id===e);a&&!a.read&&(a.read=!0,this.unreadCount--)},markAllAsRead(){this.notifications.forEach(e=>{e.read||(e.read=!0)}),this.unreadCount=0},removeNotification(e){const a=this.notifications.find(a=>a.id===e);a&&!a.read&&this.unreadCount--,this.notifications=this.notifications.filter(a=>a.id!==e)},clearAll(){this.notifications=[],this.unreadCount=0},initializeSampleNotifications(){this.notifications=[{id:"1",title:"设备离线提醒",message:"智能灯泡已离线超过2小时",type:"warning",timestamp:new Date(Date.now()-18e5),read:!1},{id:"2",title:"固件更新可用",message:"智能门锁有新版本固件v2.2.0可用",type:"info",timestamp:new Date(Date.now()-72e5),read:!0},{id:"3",title:"温度异常",message:"客厅温度超过设定阈值",type:"error",timestamp:new Date(Date.now()-36e5),read:!1}],this.unreadCount=this.notifications.filter(e=>!e.read).length}}}),D={class:"sdkwork-tabbar__content"},N=x(a({__name:"sdkwork-tabbar",props:{modelValue:{default:""},fixed:{type:Boolean,default:!1},border:{type:Boolean,default:!0},zIndex:{default:1},activeColor:{default:"#1989fa"},inactiveColor:{default:"#7d7e80"},route:{type:Boolean,default:!1},placeholder:{type:Boolean,default:!1},safeAreaInsetBottom:{type:Boolean,default:!0},iconOnly:{type:Boolean,default:!1},themeMode:{default:"auto"}},emits:["update:modelValue","change"],setup(e,{emit:a}){const v=e,b=a,p=t(v.modelValue),h=t(!1),k={activeName:p,setActive:e=>{p.value!==e&&(p.value=e,b("update:modelValue",e),b("change",e))},activeColor:v.activeColor,inactiveColor:v.inactiveColor,route:v.route,iconOnly:v.iconOnly,isDarkMode:h};o("sdkwork-tabbar",k),i(()=>v.modelValue,e=>{e!==p.value&&(p.value=e)}),i(p,e=>{e!==v.modelValue&&(b("update:modelValue",e),b("change",e))});const g=()=>{"dark"===v.themeMode?h.value=!0:"light"===v.themeMode?h.value=!1:"auto"===v.themeMode&&(h.value=!("undefined"==typeof window||!window.matchMedia)&&window.matchMedia("(prefers-color-scheme: dark)").matches)};i(()=>v.themeMode,g);const w=n(()=>h.value?"sdkwork-tabbar--dark":"sdkwork-tabbar--light");let y=null;return l(()=>{if(g(),"auto"===v.themeMode&&"undefined"!=typeof window&&window.matchMedia){y=window.matchMedia("(prefers-color-scheme: dark)");const e=()=>{"auto"===v.themeMode&&(h.value=y?.matches||!1)};y.addEventListener("change",e),s(()=>{y&&y.removeEventListener("change",e)})}}),(a,t)=>(d(),r("div",{class:m(["sdkwork-tabbar",[{"sdkwork-tabbar--fixed":e.fixed,"sdkwork-tabbar--border":e.border,"sdkwork-tabbar--safe-area-inset-bottom":e.safeAreaInsetBottom},w.value]]),style:f({zIndex:e.zIndex})},[c("div",D,[u(a.$slots,"default",{},void 0,!0)])],6))}}),[["__scopeId","data-v-e5daa083"]]),z={class:"sdkwork-tabbar-item__icon"},j={key:0,class:"sdkwork-tabbar-item__icon-wrapper"},W=["src"],S={key:0,class:"sdkwork-tabbar-item__badge-wrapper"},$={key:0,class:"sdkwork-tabbar-item__text"},R=x(a({__name:"sdkwork-tabbar-item",props:{name:{default:""},icon:{default:""},dot:{type:Boolean,default:!1},badge:{type:[String,Number,Boolean],default:""},url:{default:""},to:{default:""},replace:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},iconOnly:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:a}){const o=e,i=a,l=v("sdkwork-tabbar",{activeName:t(""),setActive:e=>{},activeColor:"#1989fa",inactiveColor:"#7d7e80",route:!1,iconOnly:!1,isDarkMode:t(!1)}),s=b();p();const y=n(()=>l.activeName.value===o.name),_=n(()=>o.dot||""!==o.badge),I=n(()=>l.activeColor),C=n(()=>l.inactiveColor),B=n(()=>void 0!==o.iconOnly?o.iconOnly:l.iconOnly),x=n(()=>l.isDarkMode?.value||!1),V=n(()=>x.value?"sdkwork-tabbar-item--dark":"sdkwork-tabbar-item--light"),A=e=>{if(!o.disabled)if(i("click"),!y.value&&o.name&&l.setActive(o.name),o.to&&l.route){const e="string"==typeof o.to?{path:o.to}:o.to;o.replace?s.replace(e):s.push(e)}else o.url&&(o.replace?window.location.replace(o.url):window.location.href=o.url)};return(a,t)=>(d(),r("div",{class:m(["sdkwork-tabbar-item",[{"sdkwork-tabbar-item--active":y.value,"sdkwork-tabbar-item--disabled":e.disabled},V.value]]),style:f({color:y.value?I.value:C.value}),onClick:A},[c("div",z,[u(a.$slots,"icon",{active:y.value},()=>[e.icon?(d(),r("div",j,["string"==typeof e.icon&&(e.icon.endsWith(".png")||e.icon.endsWith(".jpg")||e.icon.endsWith(".jpeg")||e.icon.endsWith(".svg")||e.icon.endsWith(".gif"))?(d(),r("img",{key:0,src:e.icon,class:"sdkwork-tabbar-item__icon-img"},null,8,W)):"string"==typeof e.icon?(d(),r("i",{key:1,class:m([e.icon,"sdkwork-tabbar-item__icon-class"])},null,2)):h("",!0)])):h("",!0)],!0),_.value?(d(),r("div",S,[u(a.$slots,"badge",{},()=>[c("div",{class:m(["sdkwork-tabbar-item__badge",{"sdkwork-tabbar-item__badge--dot":""===e.badge||!0===e.badge}])},[""!==e.badge&&!0!==e.badge?(d(),r(k,{key:0},[g(w(e.badge),1)],64)):h("",!0)],2)],!0)])):h("",!0)]),B.value?h("",!0):(d(),r("div",$,[u(a.$slots,"default",{active:y.value},()=>[g(w(e.name),1)],!0)]))],6))}}),[["__scopeId","data-v-acac58ef"]]),E={class:"app-bottom-tabbar"},L={key:0,class:"sdkwork-badge"},T=x(a({__name:"app-bottom-tabbar",props:{modelValue:{default:"home"},fixed:{type:Boolean,default:!0},border:{type:Boolean,default:!0},zIndex:{default:1},activeColor:{default:"#1989fa"},inactiveColor:{default:"#7d7e80"},route:{type:Boolean,default:!0},placeholder:{type:Boolean,default:!1},safeAreaInsetBottom:{type:Boolean,default:!0},iconOnly:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{expose:a,emit:o}){const l=e,s=o;a({setActive:e=>{u.value=e,s("update:modelValue",e),s("change",e)},getActiveTab:()=>u.value});const c=b(),u=t(l.modelValue);M();const f=V(),v=O();i(()=>l.modelValue,e=>{e!==u.value&&(u.value=e)}),i(u,e=>{e!==l.modelValue&&(s("update:modelValue",e),s("change",e))});const p={list:[{name:"home",label:"对话",activeIcon:"mingcute:message-3-fill",inactiveIcon:"mingcute:message-3-line",route:"/home"},{name:"agents",label:"智能体",activeIcon:"mdi:robot",inactiveIcon:"mdi:robot-outline",route:"/agents"},{name:"generations",label:"创作",activeIcon:"mdi:creation",inactiveIcon:"mdi:creation-outline",route:"/generations"},{name:"mall",label:"商城",activeIcon:"mdi:shopping",inactiveIcon:"mdi:shopping-outline",route:"/mall"},{name:"profile",label:"我的",activeIcon:"mdi:account",inactiveIcon:"mdi:account-outline",route:"/profile"}]},x=n(()=>0);n(()=>f.deviceList.filter(e=>"offline"===e.status).length);const D=n(()=>v.notifications.filter(e=>!e.read).length),z=n(()=>3),j=e=>{switch(e){case"home":return x.value;case"mall":return z.value;case"notifications":return D.value;default:return 0}};i(()=>c.currentRoute.value.path,e=>{const a=p.list.find(a=>a.route===e);a&&(u.value=a.name)},{immediate:!0});const W=e=>{const a=String(e),t=p.list.find(e=>e.name===a);t&&c.replace(t.route)};return(a,t)=>{const o=R,i=N;return d(),r("div",E,[y(i,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),fixed:e.fixed,border:e.border,"z-index":e.zIndex,"active-color":e.activeColor,"inactive-color":e.inactiveColor,route:e.route,placeholder:e.placeholder,"safe-area-inset-bottom":e.safeAreaInsetBottom,"icon-only":e.iconOnly,onChange:W},{default:_(()=>[(d(!0),r(k,null,I(p.list,a=>(d(),C(o,{key:a.name,name:a.name,"icon-only":e.iconOnly},{icon:_(({active:e})=>[y(B(A),{icon:e?a.activeIcon:a.inactiveIcon,width:"24",height:"24",class:m({"active-icon":e})},null,8,["icon","class"])]),badge:_(()=>[j(a.name)>0?(d(),r("div",L,w(j(a.name)),1)):h("",!0)]),default:_(()=>[g(" "+w(a.label)+" ",1)]),_:2},1032,["name","icon-only"]))),128))]),_:1},8,["modelValue","fixed","border","z-index","active-color","inactive-color","route","placeholder","safe-area-inset-bottom","icon-only"])])}}}),[["__scopeId","data-v-61b38cbb"]]);export{T as A};
