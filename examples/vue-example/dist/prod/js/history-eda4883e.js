import{S as e}from"./sdkwork-page-container-ebfa2fb2.js";import{s as t,f as a,B as l,_ as s}from"./index-34815b62.js";import{L as i}from"./index-7b99c785.js";import{E as o}from"./index-3ae7521b.js";/* empty css              */import{D as r,a as n}from"./index-e6b500be.js";/* empty css              */import{N as u}from"./index-9f02df9f.js";import{k as d,O as m,r as c,c as v,b as p,Q as f,Z as h,a0 as g,j as k,S as y,a4 as x,U as j,R as w,F as D,Y as b,$ as _,a1 as C}from"./vue-vendor-905d75e5.js";import"./utils-vendor-b5712723.js";import"./use-tab-status-c1e0ad5e.js";import"./use-id-350fcd7b.js";import"./index-a966f53b.js";const $={class:"history-container"},V={class:"history-toolbar"},M={class:"toolbar-actions"},U={key:1,class:"history-list"},z=["onClick"],A={class:"item-content"},I={class:"item-thumb"},L=["src","alt"],T={class:"item-info"},N={class:"item-title"},S={class:"item-desc"},q={class:"item-meta"},B={class:"item-type"},E={class:"item-time"},F=s(d({__name:"history",setup(s){const d=m(),F=c("all"),G=c("all"),H=[{text:"全部类型",value:"all"},{text:"作品",value:"work"},{text:"智能体",value:"agent"},{text:"声音",value:"voice"},{text:"角色",value:"character"}],O=[{text:"全部时间",value:"all"},{text:"今天",value:"today"},{text:"最近7天",value:"week"},{text:"最近30天",value:"month"}],Q=c([]),R=c(!1),Y=c(!1),Z=[{id:1,title:"AI绘画作品 - 山水风景",description:"使用AI技术创作的山水风景画",thumb:"/images/placeholder.jpg",type:"work",time:new Date(Date.now()-72e5)},{id:2,title:"智能语音助手",description:"多功能智能语音助手应用",thumb:"/images/placeholder.jpg",type:"agent",time:new Date(Date.now()-864e5)},{id:3,title:"自然语音包",description:"高质量自然语音合成包",thumb:"/images/placeholder.jpg",type:"voice",time:new Date(Date.now()-2592e5)}],J=v(()=>{let e=Q.value;if("all"!==F.value&&(e=e.filter(e=>e.type===F.value)),"all"!==G.value){const t=new Date,a=new Date;switch(G.value){case"today":a.setHours(0,0,0,0);break;case"week":a.setDate(t.getDate()-7);break;case"month":a.setDate(t.getDate()-30)}e=e.filter(e=>e.time>=a)}return e}),K=e=>{const t=(new Date).getTime()-e.getTime();if(t<36e5){return`${Math.floor(t/6e4)}分钟前`}if(t<864e5){return`${Math.floor(t/36e5)}小时前`}return`${Math.floor(t/864e5)}天前`},P=()=>{R.value=!0,setTimeout(()=>{Q.value.length>=Z.length?Y.value=!0:Q.value=[...Z],R.value=!1},500)},W=async()=>{try{await a({title:"确认清空",message:"确定要清空所有浏览记录吗？"}),Q.value=[],t("浏览记录已清空")}catch{}},X=()=>{d.push("/")};return p(()=>{}),(a,s)=>{const d=u,m=r,c=n,v=l,p=o,Z=i,ee=e;return f(),h(ee,{"safe-area":"",scrollable:"","theme-mode":"auto"},{header:g(()=>[k(d,{title:"浏览记录","left-text":"返回","left-arrow":"",onClickLeft:s[0]||(s[0]=e=>a.$router.back())})]),default:g(()=>[y("div",$,[y("div",V,[k(c,null,{default:g(()=>[k(m,{modelValue:F.value,"onUpdate:modelValue":s[1]||(s[1]=e=>F.value=e),options:H},null,8,["modelValue"]),k(m,{modelValue:G.value,"onUpdate:modelValue":s[2]||(s[2]=e=>G.value=e),options:O},null,8,["modelValue"])]),_:1}),y("div",M,[Q.value.length>0?(f(),h(v,{key:0,size:"small",onClick:W},{default:g(()=>[...s[4]||(s[4]=[x(" 清空记录 ",-1)])]),_:1})):j("",!0)])]),0===J.value.length?(f(),h(p,{key:0,image:"search",description:"暂无浏览记录"},{default:g(()=>[k(v,{round:"",type:"primary",onClick:X},{default:g(()=>[...s[5]||(s[5]=[x(" 去浏览内容 ",-1)])]),_:1})]),_:1})):(f(),w("div",U,[k(Z,{loading:R.value,"onUpdate:loading":s[3]||(s[3]=e=>R.value=e),finished:Y.value,"finished-text":"没有更多了",onLoad:P},{default:g(()=>[(f(!0),w(D,null,b(J.value,e=>{return f(),w("div",{key:e.id,class:"history-item",onClick:a=>(e=>{t(`查看：${e.title}`)})(e)},[y("div",A,[y("div",I,[y("img",{src:e.thumb,alt:e.title},null,8,L)]),y("div",T,[y("div",N,_(e.title),1),y("div",S,_(e.description),1),y("div",q,[y("span",B,_((a=e.type,{work:"作品",agent:"智能体",voice:"声音",character:"角色"}[a]||"未知")),1),y("span",E,_(K(e.time)),1)])])]),k(v,{size:"small",type:"danger",plain:"",onClick:C(a=>{return l=e.id,Q.value=Q.value.filter(e=>e.id!==l),void t("记录已删除");var l},["stop"])},{default:g(()=>[...s[6]||(s[6]=[x(" 删除 ",-1)])]),_:1},8,["onClick"])],8,z);var a}),128))]),_:1},8,["loading","finished"])]))])]),_:1})}}}),[["__scopeId","data-v-38d85496"]]);export{F as default};
