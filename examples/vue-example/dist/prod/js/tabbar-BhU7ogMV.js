import{_ as e}from"./app-header-BEBNJPI5.js";import{y as a,k as t,r as o,w as i,f as n,b as l,o as s,P as d,Q as c,V as r,R as u,S as m,U as f,p as v,e as p,O as b,W as k,F as h,a4 as g,$ as y,j as w,a0 as _,u as C,a3 as B,a2 as x,Z as V}from"./vue-vendor-CnVaDBlt.js";import{_ as O,x as M,d as j}from"./index-lnKdqbPs.js";import{a as A}from"./chat-DFKG83Wm.js";import{u as I}from"./usePageTitle-BKLzANGn.js";import"./sdkwork-navbar-DwW_7iE2.js";import"./sdkwork-icon-Bi8Wd4F1.js";import"./utils-vendor-WEzSe-CR.js";import"./conversation-ELJPpu2X.js";import"./sdkwork_stream_player-FoYgLiDc.js";const D=a("notification",{state:()=>({notifications:[],unreadCount:0}),getters:{unreadNotifications:e=>e.notifications.filter(e=>!e.read),readNotifications:e=>e.notifications.filter(e=>e.read),getNotificationsByType:e=>a=>e.notifications.filter(e=>e.type===a)},actions:{addNotification(e){const a={...e,id:Date.now().toString(),timestamp:new Date,read:!1};this.notifications.unshift(a),this.unreadCount++},markAsRead(e){const a=this.notifications.find(a=>a.id===e);a&&!a.read&&(a.read=!0,this.unreadCount--)},markAllAsRead(){this.notifications.forEach(e=>{e.read||(e.read=!0)}),this.unreadCount=0},removeNotification(e){const a=this.notifications.find(a=>a.id===e);a&&!a.read&&this.unreadCount--,this.notifications=this.notifications.filter(a=>a.id!==e)},clearAll(){this.notifications=[],this.unreadCount=0},initializeSampleNotifications(){this.notifications=[{id:"1",title:"设备离线提醒",message:"智能灯泡已离线超过2小时",type:"warning",timestamp:new Date(Date.now()-18e5),read:!1},{id:"2",title:"固件更新可用",message:"智能门锁有新版本固件v2.2.0可用",type:"info",timestamp:new Date(Date.now()-72e5),read:!0},{id:"3",title:"温度异常",message:"客厅温度超过设定阈值",type:"error",timestamp:new Date(Date.now()-36e5),read:!1}],this.unreadCount=this.notifications.filter(e=>!e.read).length}}}),N={class:"sdkwork-tabbar__content"},z=O(t({__name:"sdkwork-tabbar",props:{modelValue:{default:""},fixed:{type:Boolean,default:!1},border:{type:Boolean,default:!0},zIndex:{default:1},activeColor:{default:"#1989fa"},inactiveColor:{default:"#7d7e80"},route:{type:Boolean,default:!1},placeholder:{type:Boolean,default:!1},safeAreaInsetBottom:{type:Boolean,default:!0},iconOnly:{type:Boolean,default:!1},themeMode:{default:"auto"}},emits:["update:modelValue","change"],setup(e,{emit:a}){const t=e,p=a,b=o(t.modelValue),k=o(!1),h={activeName:b,setActive:e=>{b.value!==e&&(b.value=e,p("update:modelValue",e),p("change",e))},activeColor:t.activeColor,inactiveColor:t.inactiveColor,route:t.route,iconOnly:t.iconOnly,isDarkMode:k};v("sdkwork-tabbar",h),i(()=>t.modelValue,e=>{e!==b.value&&(b.value=e)}),i(b,e=>{e!==t.modelValue&&(p("update:modelValue",e),p("change",e))});const g=()=>{"dark"===t.themeMode?k.value=!0:"light"===t.themeMode?k.value=!1:"auto"===t.themeMode&&(k.value=!("undefined"==typeof window||!window.matchMedia)&&window.matchMedia("(prefers-color-scheme: dark)").matches)};i(()=>t.themeMode,g);const y=n(()=>k.value?"sdkwork-tabbar--dark":"sdkwork-tabbar--light");let w=null;return l(()=>{if(g(),"auto"===t.themeMode&&"undefined"!=typeof window&&window.matchMedia){w=window.matchMedia("(prefers-color-scheme: dark)");const e=()=>{"auto"===t.themeMode&&(k.value=w?.matches||!1)};w.addEventListener("change",e),s(()=>{w&&w.removeEventListener("change",e)})}}),(a,t)=>(c(),d("div",{class:u(["sdkwork-tabbar",[{"sdkwork-tabbar--fixed":e.fixed,"sdkwork-tabbar--border":e.border,"sdkwork-tabbar--safe-area-inset-bottom":e.safeAreaInsetBottom},y.value]]),style:r({zIndex:e.zIndex})},[m("div",N,[f(a.$slots,"default",{},void 0,!0)])],6))}}),[["__scopeId","data-v-e5daa083"]]),W={class:"sdkwork-tabbar-item__icon"},S={key:0,class:"sdkwork-tabbar-item__icon-wrapper"},T=["src"],$={key:0,class:"sdkwork-tabbar-item__badge-wrapper"},R={key:0,class:"sdkwork-tabbar-item__text"},E=O(t({__name:"sdkwork-tabbar-item",props:{name:{default:""},icon:{default:""},dot:{type:Boolean,default:!1},badge:{type:[String,Number,Boolean],default:""},url:{default:""},to:{default:""},replace:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},iconOnly:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:a}){const t=e,i=a,l=p("sdkwork-tabbar",{activeName:o(""),setActive:e=>{},activeColor:"#1989fa",inactiveColor:"#7d7e80",route:!1,iconOnly:!1,isDarkMode:o(!1)}),s=b(),v=n(()=>l.activeName.value===t.name),w=n(()=>t.dot||""!==t.badge),_=n(()=>l.activeColor),C=n(()=>l.inactiveColor),B=n(()=>void 0!==t.iconOnly?t.iconOnly:l.iconOnly),x=n(()=>l.isDarkMode?.value||!1),V=n(()=>x.value?"sdkwork-tabbar-item--dark":"sdkwork-tabbar-item--light"),O=e=>{if(!t.disabled)if(i("click"),!v.value&&t.name&&l.setActive(t.name),t.to&&l.route){const e="string"==typeof t.to?{path:t.to}:t.to;t.replace?s.replace(e):s.push(e)}else t.url&&(t.replace?window.location.replace(t.url):window.location.href=t.url)};return(a,t)=>(c(),d("div",{class:u(["sdkwork-tabbar-item",[{"sdkwork-tabbar-item--active":v.value,"sdkwork-tabbar-item--disabled":e.disabled},V.value]]),style:r({color:v.value?_.value:C.value}),onClick:O},[m("div",W,[f(a.$slots,"icon",{active:v.value},()=>[e.icon?(c(),d("div",S,["string"==typeof e.icon&&(e.icon.endsWith(".png")||e.icon.endsWith(".jpg")||e.icon.endsWith(".jpeg")||e.icon.endsWith(".svg")||e.icon.endsWith(".gif"))?(c(),d("img",{key:0,src:e.icon,class:"sdkwork-tabbar-item__icon-img"},null,8,T)):"string"==typeof e.icon?(c(),d("i",{key:1,class:u([e.icon,"sdkwork-tabbar-item__icon-class"])},null,2)):k("",!0)])):k("",!0)],!0),w.value?(c(),d("div",$,[f(a.$slots,"badge",{},()=>[m("div",{class:u(["sdkwork-tabbar-item__badge",{"sdkwork-tabbar-item__badge--dot":""===e.badge||!0===e.badge}])},[""!==e.badge&&!0!==e.badge?(c(),d(h,{key:0},[g(y(e.badge),1)],64)):k("",!0)],2)],!0)])):k("",!0)]),B.value?k("",!0):(c(),d("div",R,[f(a.$slots,"default",{active:v.value},()=>[g(y(e.name),1)],!0)]))],6))}}),[["__scopeId","data-v-acac58ef"]]),L={class:"app-bottom-tabbar"},P={key:0,class:"sdkwork-badge"},U={key:0,class:"sdkwork-badge"},q={key:0,class:"sdkwork-badge"},F=O(t({__name:"app-bottom-tabbar",props:{modelValue:{default:"home"},fixed:{type:Boolean,default:!0},border:{type:Boolean,default:!0},zIndex:{default:1},activeColor:{default:"#1989fa"},inactiveColor:{default:"#7d7e80"},route:{type:Boolean,default:!0},placeholder:{type:Boolean,default:!1},safeAreaInsetBottom:{type:Boolean,default:!0},iconOnly:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{expose:a,emit:t}){const l=e,s=t;a({setActive:e=>{m.value=e,s("update:modelValue",e),s("change",e)},getActiveTab:()=>m.value});const r=b(),m=o(l.modelValue);A();const f=M(),v=D();i(()=>l.modelValue,e=>{e!==m.value&&(m.value=e)}),i(m,e=>{e!==l.modelValue&&(s("update:modelValue",e),s("change",e))});const p=n(()=>0);n(()=>f.deviceList.filter(e=>"offline"===e.status).length);const h=n(()=>v.notifications.filter(e=>!e.read).length),B=n(()=>3);i(()=>r.currentRoute.value.path,e=>{"/home"===e?m.value="home":"/agents"===e?m.value="agents":"/devices"===e?m.value="devices":"/mall"===e?m.value="mall":"/notifications"===e?m.value="notifications":"/profile"===e&&(m.value="profile")},{immediate:!0});const x=e=>{switch(String(e)){case"home":r.replace("/home");break;case"agents":r.replace("/agents");break;case"devices":r.replace("/devices");break;case"mall":r.replace("/mall");break;case"notifications":r.replace("/notifications");break;case"profile":r.replace("/profile")}};return(e,a)=>{const t=E,o=z;return c(),d("div",L,[w(o,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=e=>m.value=e),fixed:l.fixed,border:l.border,"z-index":l.zIndex,"active-color":l.activeColor,"inactive-color":l.inactiveColor,route:l.route,placeholder:l.placeholder,"safe-area-inset-bottom":l.safeAreaInsetBottom,"icon-only":l.iconOnly,onChange:x},{default:_(()=>[w(t,{name:"home","icon-only":l.iconOnly},{icon:_(({active:e})=>[w(C(j),{icon:e?"mingcute:message-3-fill":"mingcute:message-3-line",width:"24",height:"24",class:u({"active-icon":e})},null,8,["icon","class"])]),badge:_(()=>[p.value>0?(c(),d("div",P,y(p.value),1)):k("",!0)]),default:_(()=>[a[1]||(a[1]=g(" 对话 ",-1))]),_:1},8,["icon-only"]),w(t,{name:"agents","icon-only":l.iconOnly},{icon:_(({active:e})=>[w(C(j),{icon:e?"mdi:robot":"mdi:robot-outline",width:"24",height:"24",class:u({"active-icon":e})},null,8,["icon","class"])]),default:_(()=>[a[2]||(a[2]=g(" 智能体 ",-1))]),_:1},8,["icon-only"]),w(t,{name:"mall","icon-only":l.iconOnly},{icon:_(({active:e})=>[w(C(j),{icon:e?"mdi:shopping":"mdi:shopping-outline",width:"24",height:"24",class:u({"active-icon":e})},null,8,["icon","class"])]),badge:_(()=>[B.value>0?(c(),d("div",U,y(B.value),1)):k("",!0)]),default:_(()=>[a[3]||(a[3]=g(" 商城 ",-1))]),_:1},8,["icon-only"]),w(t,{name:"notifications","icon-only":l.iconOnly},{icon:_(({active:e})=>[w(C(j),{icon:e?"mdi:bell":"mdi:bell-outline",width:"24",height:"24",class:u({"active-icon":e})},null,8,["icon","class"])]),badge:_(()=>[h.value>0?(c(),d("div",q,y(h.value),1)):k("",!0)]),default:_(()=>[a[4]||(a[4]=g(" 通知 ",-1))]),_:1},8,["icon-only"]),w(t,{name:"profile","icon-only":l.iconOnly},{icon:_(({active:e})=>[w(C(j),{icon:e?"mdi:account":"mdi:account-outline",width:"24",height:"24",class:u({"active-icon":e})},null,8,["icon","class"])]),default:_(()=>[a[5]||(a[5]=g(" 我的 ",-1))]),_:1},8,["icon-only"])]),_:1},8,["modelValue","fixed","border","z-index","active-color","inactive-color","route","placeholder","safe-area-inset-bottom","icon-only"])])}}}),[["__scopeId","data-v-8e61deb8"]]),H={class:"tabbar-layout"},Q={class:"layout-content"},X=O(t({__name:"tabbar",setup(a){const t=B(),{pageTitle:o,setPageTitle:i}=I(),s=n(()=>t.meta.hideHeader||!1);return l(()=>{i()}),(a,t)=>{const i=e,n=x("router-view");return c(),d("div",H,[s.value?k("",!0):(c(),V(i,{key:0,title:C(o)},null,8,["title"])),m("main",Q,[w(n)]),w(F)])}}}),[["__scopeId","data-v-8125c3b2"]]);export{X as default};
