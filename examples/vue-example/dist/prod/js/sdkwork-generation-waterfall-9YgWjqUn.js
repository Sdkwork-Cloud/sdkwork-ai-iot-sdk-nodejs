import{I as e,B as t,_ as a,L as i}from"./index-cvC_tnhK.js";import{E as s}from"./index-D-Jc6MLP.js";/* empty css              */import{S as l}from"./sdkwork-api-waterfall-sDHpewau.js";import{T as o}from"./index-BaE3Hzvl.js";import{k as d,f as m,P as n,Q as c,R as r,S as p,W as u,U as f,j as v,a0 as y,a4 as h,$ as k,Z as g,a1 as w,r as x,b,w as $,a9 as S}from"./vue-vendor-Caw1HGjZ.js";const B={class:"item-preview"},_={class:"preview-image"},M=["src","alt"],T={key:1,class:"preview-placeholder"},z={key:0,class:"status-badge"},j={class:"item-content"},C={class:"item-title"},D={key:0,class:"item-description"},I={key:1,class:"item-meta"},F={class:"meta-info"},L={class:"meta-type"},A={class:"meta-time"},E={key:2,class:"item-stats"},K={class:"stats-info"},R={class:"stat"},G={class:"stat"},P={class:"item-actions"},Q={key:0,class:"selected-indicator"},U=a(d({__name:"sdkwork-generation-waterfall-item",props:{item:{},index:{},selected:{type:Boolean,default:!1},themeMode:{default:"auto"},showStats:{type:Boolean,default:!0},showMeta:{type:Boolean,default:!0},showStatus:{type:Boolean,default:!0},clickable:{type:Boolean,default:!0}},emits:["click"],setup(a,{emit:i}){const s=a,l=i;m(()=>`theme-${s.themeMode}`);const d=e=>({image:"photo-o",video:"video-o",music:"music-o",voice:"volume-o"}[e]||"file-o"),x=e=>({pending:"等待中",processing:"生成中",completed:"已完成",failed:"失败"}[e]||e),b=e=>{if(!e)return"";const t=new Date(e),a=(new Date).getTime()-t.getTime();return a<6e4?"刚刚":a<36e5?`${Math.floor(a/6e4)}分钟前`:a<864e5?`${Math.floor(a/36e5)}小时前`:a<6048e5?`${Math.floor(a/864e5)}天前`:t.toLocaleDateString()},$=e=>{e.target.style.display="none"},S=()=>{s.clickable&&l("click",s.item,s.index)},U=()=>{l("click",s.item,s.index)};return(i,s)=>{const l=e,m=o,W=t;return c(),n("div",{class:r(["sdkwork-generation-waterfall-item",[`theme-${a.themeMode}`,{"is-selected":a.selected},{"is-clickable":a.clickable}]]),onClick:S},[p("div",B,[f(i.$slots,"image",{item:a.item,index:a.index},()=>[p("div",_,[a.item.result?.thumbnail||a.item.result?.url?(c(),n("img",{key:0,src:a.item.result?.thumbnail||a.item.result?.url,alt:a.item.title,onError:$},null,40,M)):(c(),n("div",T,[v(l,{name:d(a.item.type),size:"32"},null,8,["name"])]))])],!0),a.showStatus?(c(),n("div",z,[v(m,{type:(Z=a.item.status,{pending:"primary",processing:"warning",completed:"success",failed:"danger"}[Z]||"default")},{default:y(()=>[h(k(x(a.item.status)),1)]),_:1},8,["type"])])):u("",!0)]),p("div",j,[p("div",C,[f(i.$slots,"title",{item:a.item,index:a.index},()=>[p("h3",null,k(a.item.title),1)],!0)]),a.item.description?(c(),n("div",D,[f(i.$slots,"description",{item:a.item,index:a.index},()=>[p("p",null,k(a.item.description),1)],!0)])):u("",!0),a.showMeta?(c(),n("div",I,[f(i.$slots,"meta",{item:a.item,index:a.index},()=>{return[p("div",F,[p("span",L,[v(l,{name:d(a.item.type),size:"12"},null,8,["name"]),h(" "+k((e=a.item.type,{image:"图片",video:"视频",music:"音乐",voice:"语音"}[e]||"作品")),1)]),p("span",A,k(b(a.item.createdAt)),1)])];var e},!0)])):u("",!0),a.showStats?(c(),n("div",E,[f(i.$slots,"stats",{item:a.item,index:a.index},()=>[p("div",K,[p("span",R,[v(l,{name:"eye-o",size:"12"}),h(" "+k(a.item.viewCount||0),1)]),p("span",G,[v(l,{name:"good-job-o",size:"12"}),h(" "+k(a.item.likeCount||0),1)])])],!0)])):u("",!0),p("div",P,[f(i.$slots,"actions",{item:a.item,index:a.index},()=>[a.clickable?(c(),g(W,{key:0,size:"mini",type:"primary",plain:"",onClick:w(U,["stop"])},{default:y(()=>[...s[0]||(s[0]=[h(" 查看详情 ",-1)])]),_:1})):u("",!0)],!0)])]),a.selected?(c(),n("div",Q,[v(l,{name:"success",size:"16"})])):u("",!0)],2);var Z}}}),[["__scopeId","data-v-cfb492cd"]]),W={class:"empty-state"},Z={class:"empty-description"},q={key:0,class:"empty-tip"},H={class:"loading-state"},J=a(d({__name:"sdkwork-generation-waterfall",props:{api:{},params:{default:()=>({})},selectable:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},pageSize:{default:12},itemKey:{default:"id"},itemTitleField:{default:"title"},itemDescriptionField:{default:"description"},columns:{default:2},gap:{default:16},themeMode:{default:"auto"},showStats:{type:Boolean,default:!0},showMeta:{type:Boolean,default:!0},showStatus:{type:Boolean,default:!0},clickable:{type:Boolean,default:!0},emptyText:{default:"暂无作品"},emptyTip:{default:"开始创作您的第一个作品吧！"},showCreateButton:{type:Boolean,default:!0},createButtonText:{default:"开始创作"},loadingText:{default:"加载作品中..."}},emits:["search","load","select","delete","item-click","create","refresh"],setup(e,{expose:a,emit:o}){const d=x(),w=e,B=o,_=m(()=>`theme-${w.themeMode}`),M=m(()=>({...w.params})),T=e=>{B("search",e)},z=e=>{B("load",e)},j=e=>{B("select",e)},C=e=>{B("delete",e)},D=(e,t)=>{B("item-click",e,t)},I=()=>{B("create")};return b(()=>{d.value&&d.value.refresh()}),$(()=>w.params,()=>{d.value&&d.value.refresh()},{deep:!0}),a({refresh:()=>d.value?.refresh(),loadMore:()=>d.value?.loadMore(),getData:()=>d.value?.getData()||[],getSelectedItems:()=>d.value?.getSelectedItems()||[],clearSelected:()=>d.value?.clearSelected(),setSelectedItems:e=>d.value?.setSelectedItems(e)}),(a,o)=>{const m=t,w=s,x=i;return c(),n("div",{class:r(["sdkwork-generation-waterfall",_.value])},[v(l,{api:e.api,params:M.value,selectable:e.selectable,deletable:e.deletable,searchable:e.searchable,"page-size":e.pageSize,"item-key":e.itemKey,"item-title-field":e.itemTitleField,"item-description-field":e.itemDescriptionField,columns:e.columns,gap:e.gap,"left-spacing":"0px","right-spacing":"0px",onSearch:T,onLoad:z,onSelect:j,onDelete:C,ref_key:"waterfallRef",ref:d},{default:y(({item:t,index:i,selected:s})=>[v(U,{item:t,index:i,selected:s,"theme-mode":e.themeMode,"show-stats":e.showStats,"show-meta":e.showMeta,"show-status":e.showStatus,clickable:e.clickable,onClick:D},S({_:2},[a.$slots["item-image"]?{name:"image",fn:y(()=>[f(a.$slots,"item-image",{item:t,index:i},void 0,!0)]),key:"0"}:void 0,a.$slots["item-title"]?{name:"title",fn:y(()=>[f(a.$slots,"item-title",{item:t,index:i},void 0,!0)]),key:"1"}:void 0,a.$slots["item-description"]?{name:"description",fn:y(()=>[f(a.$slots,"item-description",{item:t,index:i},void 0,!0)]),key:"2"}:void 0,a.$slots["item-meta"]?{name:"meta",fn:y(()=>[f(a.$slots,"item-meta",{item:t,index:i},void 0,!0)]),key:"3"}:void 0,a.$slots["item-actions"]?{name:"actions",fn:y(()=>[f(a.$slots,"item-actions",{item:t,index:i},void 0,!0)]),key:"4"}:void 0]),1032,["item","index","selected","theme-mode","show-stats","show-meta","show-status","clickable"])]),empty:y(()=>[p("div",W,[f(a.$slots,"empty",{},()=>[v(w,{description:e.emptyText,image:"search"},{description:y(()=>[p("div",Z,[p("p",null,k(e.emptyText),1),e.emptyTip?(c(),n("p",q,k(e.emptyTip),1)):u("",!0)])]),default:y(()=>[e.showCreateButton?(c(),g(m,{key:0,type:"primary",size:"small",onClick:I},{default:y(()=>[h(k(e.createButtonText),1)]),_:1})):u("",!0)]),_:1},8,["description"])],!0)])]),loading:y(()=>[p("div",H,[f(a.$slots,"loading",{},()=>[v(x,{size:"24px",vertical:""},{default:y(()=>[h(k(e.loadingText),1)]),_:1})],!0)])]),header:y(()=>[f(a.$slots,"header",{},void 0,!0)]),footer:y(()=>[f(a.$slots,"footer",{},void 0,!0)]),_:3},8,["api","params","selectable","deletable","searchable","page-size","item-key","item-title-field","item-description-field","columns","gap"])],2)}}}),[["__scopeId","data-v-4b423c4f"]]);export{J as _};
