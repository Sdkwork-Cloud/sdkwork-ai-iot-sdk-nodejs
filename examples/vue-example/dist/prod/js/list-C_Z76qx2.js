import{L as e,I as t,B as a,_ as s,s as i,h as l,a as o}from"./index-lnKdqbPs.js";/* empty css              */import{S as r}from"./sdkwork-api-list-uN_E6OVt.js";import{R as c}from"./index-BqycyaHA.js";/* empty css              *//* empty css              */import{T as d}from"./index-DKoT3PkP.js";import{I as p}from"./index-BIHZGPcc.js";import{k as n,f as u,P as g,Q as m,S as v,j as h,W as y,a0 as k,a4 as f,$ as P,Z as x,a1 as b,F as A,Y as I,R as S,r as w,w as _,u as j,b as C}from"./vue-vendor-CnVaDBlt.js";import{C as M}from"./index-n5hbPLH5.js";import"./utils-vendor-WEzSe-CR.js";import"./shared-DUTVD2z0.js";import"./sdkwork-search-bar-D_sv8zGc.js";import"./sdkwork-icon-Bi8Wd4F1.js";import"./ListItem-B_CUZCa5.js";import"./use-refs-D3gLi3Li.js";import"./Checker-DfOWVhid.js";const z={class:"product-image"},B={key:0,class:"soldout-overlay"},L={key:1,class:"stock-warning"},F={class:"product-info"},D={class:"product-title"},$={class:"title-text"},T={key:0,class:"product-description"},V={key:1,class:"product-tags"},G={class:"product-meta"},W={key:0,class:"rating"},E={class:"rating-text"},X={key:1,class:"sales"},H={class:"product-price"},O={class:"current-price"},Q={key:0,class:"original-price"},R={key:1,class:"discount"},K={class:"product-actions"},U=s(n({__name:"ProductItem",props:{product:{},index:{},selected:{type:Boolean},selectable:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1}},emits:["select","delete","add-to-cart","click"],setup(s,{emit:i}){const l=s,o=i,r=u({get:()=>l.selected||!1,set:e=>{l.selectable&&o("select",l.product)}}),n=()=>{o("click",l.product)},w=()=>{l.deletable&&o("delete",l.product)},_=()=>{"soldout"!==l.product.status&&o("add-to-cart",l.product)};return(i,l)=>{const o=t,u=e,j=p,C=d,U=M,q=c,J=a;return m(),g("div",{class:S(["product-item",{"product-item--selected":r.value,"product-item--soldout":"soldout"===s.product.status,"product-item--low-stock":s.product.stock>0&&s.product.stock<10}]),onClick:n},[v("div",z,[h(j,{width:"80",height:"80",src:s.product.image||"",fit:"cover",radius:"4"},{error:k(()=>[h(o,{name:"photo-o",size:"24"})]),loading:k(()=>[h(u,{type:"spinner",size:"20"})]),_:1},8,["src"]),"soldout"===s.product.status?(m(),g("div",B,[...l[3]||(l[3]=[v("span",null,"已售罄",-1)])])):s.product.stock>0&&s.product.stock<10?(m(),g("div",L,[h(C,{type:"warning"},{default:k(()=>[f("仅剩"+P(s.product.stock)+"件",1)]),_:1})])):y("",!0)]),v("div",F,[v("div",D,[v("h4",$,P(s.product.name),1),s.selectable?(m(),x(U,{key:0,modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),onClick:l[1]||(l[1]=b(()=>{},["stop"])),class:"select-checkbox"},null,8,["modelValue"])):y("",!0)]),s.product.description?(m(),g("p",T,P(s.product.description),1)):y("",!0),s.product.tags&&s.product.tags.length>0?(m(),g("div",V,[(m(!0),g(A,null,I(s.product.tags,e=>(m(),x(C,{key:e,type:"primary"},{default:k(()=>[f(P(e),1)]),_:2},1024))),128))])):y("",!0),v("div",G,[s.product.rating?(m(),g("div",W,[h(q,{modelValue:s.product.rating,"onUpdate:modelValue":l[2]||(l[2]=e=>s.product.rating=e),readonly:"",size:"12","allow-half":"",color:"#ffd21e","void-color":"#c8c9cc"},null,8,["modelValue"]),v("span",E,P(s.product.rating),1)])):y("",!0),s.product.sales?(m(),g("div",X," 已售"+P(s.product.sales)+"件 ",1)):y("",!0)]),v("div",H,[v("span",O,"¥"+P(s.product.price),1),s.product.originalPrice?(m(),g("span",Q," ¥"+P(s.product.originalPrice),1)):y("",!0),s.product.originalPrice?(m(),g("span",R,P((N=s.product.price,Y=s.product.originalPrice,(N/Y*10).toFixed(1)))+"折 ",1)):y("",!0)])]),v("div",K,[s.deletable?(m(),x(J,{key:0,type:"danger",onClick:b(w,["stop"]),class:"delete-btn"},{default:k(()=>[...l[4]||(l[4]=[f(" 删除 ",-1)])]),_:1})):(m(),x(J,{key:1,type:"primary",onClick:b(_,["stop"]),disabled:"soldout"===s.product.status,class:"add-cart-btn"},{default:k(()=>[...l[5]||(l[5]=[f(" 加入购物车 ",-1)])]),_:1},8,["disabled"]))])],2);var N,Y}}}),[["__scopeId","data-v-f67ba659"]]),q=[{id:1,name:"iPhone 15 Pro",description:"最新款iPhone，搭载A17 Pro芯片，钛金属机身",price:7999,originalPrice:8999,image:"https://via.placeholder.com/200x200?text=iPhone+15+Pro",categoryId:1,stock:50,status:"active",tags:["手机","苹果","旗舰"],rating:4.8,sales:1200,createdAt:"2024-01-15",updatedAt:"2024-01-20"},{id:2,name:"MacBook Air M2",description:"轻薄便携，性能强劲的笔记本电脑",price:8999,originalPrice:9999,image:"https://via.placeholder.com/200x200?text=MacBook+Air+M2",categoryId:2,stock:30,status:"active",tags:["笔记本","苹果","轻薄"],rating:4.7,sales:800,createdAt:"2024-01-10",updatedAt:"2024-01-18"},{id:3,name:"AirPods Pro 2",description:"主动降噪无线耳机，音质出色",price:1899,originalPrice:1999,image:"https://via.placeholder.com/200x200?text=AirPods+Pro+2",categoryId:3,stock:100,status:"active",tags:["耳机","无线","降噪"],rating:4.6,sales:1500,createdAt:"2024-01-12",updatedAt:"2024-01-19"},{id:4,name:"iPad Air 5",description:"性能强大的平板电脑，适合办公和娱乐",price:4399,originalPrice:4799,image:"https://via.placeholder.com/200x200?text=iPad+Air+5",categoryId:4,stock:25,status:"active",tags:["平板","苹果","办公"],rating:4.5,sales:600,createdAt:"2024-01-08",updatedAt:"2024-01-16"},{id:5,name:"Apple Watch Series 9",description:"智能手表，健康监测功能全面",price:2999,originalPrice:3199,image:"https://via.placeholder.com/200x200?text=Apple+Watch+9",categoryId:5,stock:80,status:"active",tags:["手表","智能","健康"],rating:4.4,sales:900,createdAt:"2024-01-05",updatedAt:"2024-01-14"},{id:6,name:"Samsung Galaxy S24",description:"三星旗舰手机，AI功能强大",price:5999,originalPrice:6999,image:"https://via.placeholder.com/200x200?text=Galaxy+S24",categoryId:1,stock:40,status:"active",tags:["手机","三星","AI"],rating:4.3,sales:700,createdAt:"2024-01-20",updatedAt:"2024-01-25"},{id:7,name:"Dell XPS 13",description:"商务轻薄本，性能稳定",price:7999,originalPrice:8999,image:"https://via.placeholder.com/200x200?text=Dell+XPS+13",categoryId:2,stock:20,status:"active",tags:["笔记本","商务","轻薄"],rating:4.2,sales:400,createdAt:"2024-01-18",updatedAt:"2024-01-22"},{id:8,name:"Sony WH-1000XM5",description:"头戴式降噪耳机，音质顶级",price:2299,originalPrice:2599,image:"https://via.placeholder.com/200x200?text=Sony+WH-1000XM5",categoryId:3,stock:60,status:"active",tags:["耳机","降噪","索尼"],rating:4.7,sales:1100,createdAt:"2024-01-16",updatedAt:"2024-01-24"},{id:9,name:"华为MatePad Pro",description:"华为旗舰平板，办公娱乐两相宜",price:3299,originalPrice:3699,image:"https://via.placeholder.com/200x200?text=华为MatePad+Pro",categoryId:4,stock:35,status:"active",tags:["平板","华为","办公"],rating:4.4,sales:500,createdAt:"2024-01-14",updatedAt:"2024-01-21"},{id:10,name:"小米手环8",description:"性价比高的智能手环，功能齐全",price:299,originalPrice:349,image:"https://via.placeholder.com/200x200?text=小米手环8",categoryId:5,stock:200,status:"active",tags:["手环","小米","性价比"],rating:4.1,sales:3e3,createdAt:"2024-01-22",updatedAt:"2024-01-28"},{id:11,name:"iPhone 14",description:"上一代iPhone，性价比之选",price:4999,originalPrice:5999,image:"https://via.placeholder.com/200x200?text=iPhone+14",categoryId:1,stock:15,status:"soldout",tags:["手机","苹果","性价比"],rating:4.6,sales:2e3,createdAt:"2023-12-15",updatedAt:"2024-01-30"},{id:12,name:"MacBook Pro M3",description:"专业级笔记本电脑，性能怪兽",price:12999,originalPrice:14999,image:"https://via.placeholder.com/200x200?text=MacBook+Pro+M3",categoryId:2,stock:10,status:"active",tags:["笔记本","苹果","专业"],rating:4.9,sales:300,createdAt:"2024-01-25",updatedAt:"2024-01-29"},{id:13,name:"Bose QuietComfort 45",description:"舒适的头戴式降噪耳机",price:1999,originalPrice:2299,image:"https://via.placeholder.com/200x200?text=Bose+QC45",categoryId:3,stock:45,status:"active",tags:["耳机","降噪","Bose"],rating:4.5,sales:800,createdAt:"2024-01-17",updatedAt:"2024-01-26"},{id:14,name:"iPad mini 6",description:"小巧便携的平板电脑",price:3799,originalPrice:3999,image:"https://via.placeholder.com/200x200?text=iPad+mini+6",categoryId:4,stock:28,status:"active",tags:["平板","便携","苹果"],rating:4.3,sales:450,createdAt:"2024-01-13",updatedAt:"2024-01-23"},{id:15,name:"Garmin Fenix 7",description:"专业运动手表，户外探险必备",price:4999,originalPrice:5999,image:"https://via.placeholder.com/200x200?text=Garmin+Fenix+7",categoryId:5,stock:12,status:"active",tags:["手表","运动","户外"],rating:4.8,sales:200,createdAt:"2024-01-11",updatedAt:"2024-01-27"}],J=async(e={})=>{await new Promise(e=>setTimeout(e,500));const{keyword:t,categoryId:a,minPrice:s,maxPrice:i,status:l,tags:o,sortBy:r="id",sortOrder:c="asc",page:d=0,size:p=10}=e;let n=[...q];if(t){const e=t.toLowerCase();n=n.filter(t=>t.name.toLowerCase().includes(e)||t.description?.toLowerCase().includes(e))}a&&(n=n.filter(e=>e.categoryId===a)),void 0!==s&&(n=n.filter(e=>e.price>=s)),void 0!==i&&(n=n.filter(e=>e.price<=i)),l&&(n=n.filter(e=>e.status===l)),o&&o.length>0&&(n=n.filter(e=>e.tags?.some(e=>o.includes(e)))),n.sort((e,t)=>{let a=e[r]||0,s=t[r]||0;return"string"==typeof a&&"string"==typeof s&&(a=a.toLowerCase(),s=s.toLowerCase()),"asc"===c?a>s?1:a<s?-1:0:a<s?1:a>s?-1:0});const u=d*p,g=u+p,m=n.slice(u,g);return{content:m,totalElements:n.length,totalPages:Math.ceil(n.length/p),size:p,number:d,first:0===d,last:g>=n.length,numberOfElements:m.length,empty:0===m.length}},N={class:"empty-product"},Y={class:"loading-product"},Z={key:0,class:"list-footer"},ee=s(n({__name:"sdkwork-product-list",props:{selectable:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},pageSize:{default:10},itemKey:{default:"id"},itemTitleField:{default:"name"},itemDescriptionField:{default:"description"},params:{}},emits:["select","delete","search","load","checkout"],setup(s,{expose:o,emit:c}){const d=s,p=c,n=w(),b=w({...d.params}),A=w(0),I=w(0),S=w(0),C=w(0),M=w([]),z=u(()=>M.value.reduce((e,t)=>e+t.price,0)),B=e=>{p("select",e),$(),i(`已选择: ${e.name}`)},L=async e=>{try{await l({title:"确认删除",message:`确定要删除商品"${e.name}"吗？此操作不可撤销。`}),p("delete",e),i("商品删除成功")}catch(t){}},F=e=>{b.value.keyword=e,p("search",e)},D=e=>{A.value=e.total||0,S.value=e.pageable.pageNumber||0,C.value=e.total/(e.pageable.pageSize||10)||0,p("load",e)},$=()=>{const e=n.value?.getSelectedItems()||[];M.value=e,I.value=e.length},T=()=>{0!==M.value.length?l({title:"确认结算",message:`确定要结算 ${M.value.length} 件商品，总金额 ¥${z.value} 吗？`}).then(()=>{p("checkout",M.value),i("结算成功！"),n.value?.clearSelected(),M.value=[],I.value=0}):i("请先选择商品")};return _(I,()=>{$()}),o({refresh:()=>n.value?.refresh(),loadMore:()=>n.value?.loadMore(),getData:()=>n.value?.getData()||[],getSelectedItems:()=>n.value?.getSelectedItems()||[],clearSelected:()=>{n.value?.clearSelected(),M.value=[],I.value=0},setSelectedItems:e=>{n.value?.setSelectedItems(e),M.value=e,I.value=e.length}}),(i,l)=>{const o=t,c=e,d=a;return m(),x(r,{api:j(J),params:b.value,selectable:s.selectable,deletable:s.deletable,searchable:s.searchable,"page-size":s.pageSize,"item-key":s.itemKey,"item-title-field":s.itemTitleField,"item-description-field":s.itemDescriptionField,onSelect:B,onDelete:L,onSearch:F,onLoad:D},{default:k(({item:e,index:t,selected:a})=>[h(U,{product:e,index:t,selected:a,selectable:s.selectable,deletable:s.deletable,onSelect:B,onDelete:L},null,8,["product","index","selected","selectable","deletable"])]),empty:k(()=>[v("div",N,[h(o,{name:"shopping-cart-o",size:"48"}),l[0]||(l[0]=v("p",null,"暂无商品",-1))])]),loading:k(()=>[v("div",Y,[h(c,{size:"24px"}),l[1]||(l[1]=v("span",null,"加载商品中...",-1))])]),footer:k(()=>[I.value>0?(m(),g("div",Z,[h(d,{type:"primary",block:"",onClick:T},{default:k(()=>[f(" 结算选中商品 ("+P(I.value)+") ",1)]),_:1})])):y("",!0)]),_:1},8,["api","params","selectable","deletable","searchable","page-size","item-key","item-title-field","item-description-field"])}}}),[["__scopeId","data-v-fe3bf2bb"]]),te={class:"product-list-logic"},ae=s(n({__name:"list",setup(e,{expose:t}){const a=w(),s=w(!1),l=w(!1),r=w(!0),c=w(5),d=w({keyword:"",categoryId:void 0,minPrice:void 0,maxPrice:void 0,status:void 0,tagsInput:""}),p=w(0),n=w(0),v=w(0),y=w(0),k=w([]),f=u(()=>k.value.reduce((e,t)=>e+t.price,0));C(()=>{i("商品列表已加载")});const P=e=>{S()},x=e=>{o({title:"删除成功",message:`商品"${e.name}"已被删除`})},b=e=>{d.value.keyword=e},A=e=>{p.value=e.totalElements||0,v.value=e.number||0,y.value=e.totalPages||0},I=e=>{o({title:"结算确认",message:`确定要结算 ${e.length} 件商品，总金额 ¥${f.value} 吗？`}).then(()=>{i("结算成功！")})},S=()=>{const e=a.value?.getSelectedItems()||[];k.value=e,n.value=e.length};return t({refreshList:()=>{a.value?.refresh(),i("列表已刷新")},loadMore:()=>{a.value?.loadMore(),i("正在加载更多...")},clearSelected:()=>{a.value?.clearSelected(),k.value=[],n.value=0,i("已清空选择")},applyFilters:()=>{const e=d.value.tagsInput?d.value.tagsInput.split(",").map(e=>e.trim()).filter(e=>e):void 0,t={...d.value,tags:e};Object.keys(t).forEach(e=>{""!==t[e]&&void 0!==t[e]||delete t[e]}),a.value?.refresh(),i("筛选条件已应用")},getSelectedProducts:()=>k.value,getTotalProducts:()=>p.value,getSelectedCount:()=>n.value,getCurrentPage:()=>v.value,getTotalPages:()=>y.value,getTotalAmount:()=>f.value}),(e,t)=>{const i=ee;return m(),g("div",te,[h(i,{ref_key:"productListRef",ref:a,selectable:s.value,deletable:l.value,searchable:r.value,"page-size":c.value,params:d.value,onSelect:P,onDelete:x,onSearch:b,onLoad:A,onCheckout:I},null,8,["selectable","deletable","searchable","page-size","params"])])}}}),[["__scopeId","data-v-c4c2874a"]]);export{ae as default};
