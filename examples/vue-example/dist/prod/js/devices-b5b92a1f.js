import{_ as e,a as t}from"./sdkwork-col-acf72cbb.js";import{k as a,c as s,Q as i,R as o,S as l,j as d,a0 as c,X as r,$ as n,U as m,a4 as v,a1 as p,V as u,r as k,W as f,O as h,Z as _}from"./vue-vendor-905d75e5.js";import{S as w}from"./sdkwork-page-container-ebfa2fb2.js";import{I as y,B as b,_ as g,L as S,s as j}from"./index-34815b62.js";import{E as z}from"./index-3ae7521b.js";import{S as B}from"./sdkwork-api-list-7d9e01ff.js";/* empty css              */import{I as x}from"./index-89cf3eae.js";import{b as C}from"./route-block-83d24a4e.js";import"./utils-vendor-b5712723.js";import"./use-id-350fcd7b.js";import"./index-8ec85bf4.js";import"./index-7b99c785.js";import"./use-tab-status-c1e0ad5e.js";import"./shared-f3996f0d.js";import"./sdkwork-search-bar-d9125bb7.js";import"./sdkwork-icon-79456167.js";import"./ListItem-b2f4f4bf.js";const I={class:"sdkwork-device-item__avatar"},L={class:"sdkwork-device-item__avatar-placeholder"},M={class:"sdkwork-device-item__content"},D={class:"sdkwork-device-item__header"},U={class:"sdkwork-device-item__name"},$={class:"sdkwork-device-item__time"},F={class:"sdkwork-device-item__info"},N={class:"sdkwork-device-item__location"},O={key:0,class:"sdkwork-device-item__sensor"},E={key:1,class:"sdkwork-device-item__sensor"},K={class:"sdkwork-device-item__actions"},R={key:0,class:"sdkwork-device-item__selected-indicator"},P=g(a({__name:"sdkwork-device-item",props:{device:{},isSelected:{type:Boolean,default:!1},clickable:{type:Boolean,default:!0},showBorderBottom:{type:Boolean,default:!0},customStyle:{},themeMode:{default:"auto"}},emits:["click-item","select-item"],setup(e,{expose:t,emit:a}){const k=e,f=a,h=s(()=>"dark"===k.themeMode||"light"!==k.themeMode&&(!("undefined"==typeof window||!window.matchMedia)&&window.matchMedia("(prefers-color-scheme: dark)").matches)),_=s(()=>h.value?"sdkwork-device-item--dark":"sdkwork-device-item--light"),w=s(()=>({...k.customStyle,cursor:k.clickable?"pointer":"default"})),g=e=>({online:"控制",offline:"重连",error:"修复"}[e]||"查看"),S=e=>{k.clickable&&(f("click-item",k.device),f("select-item",k.device))},j=()=>{console.log("执行快速操作",k.device)};return t({getDevice:()=>k.device,isSelected:()=>k.isSelected}),(t,a)=>{const s=y,k=x,f=b;return i(),o("div",{class:r(["sdkwork-device-item",[{"sdkwork-device-item--selected":e.isSelected,"sdkwork-device-item--clickable":e.clickable,"sdkwork-device-item--bordered":e.showBorderBottom},_.value]]),style:u(w.value),onClick:S},[l("div",I,[d(k,{src:e.device.avatar,width:"48",height:"48",radius:"8",fit:"cover"},{error:c(()=>{return[l("div",L,[d(s,{name:(t=e.device.type,{"air-conditioner":"air-conditioner","door-lock":"lock",light:"bulb-o",sensor:"bar-chart-o",camera:"video-o",default:"setting-o"}[t]||"setting-o"),size:"20"},null,8,["name"])])];var t}),_:1},8,["src"]),l("div",{class:r(["sdkwork-device-item__status",e.device.status])},null,2)]),l("div",M,[l("div",D,[l("div",U,n(e.device.name),1),l("div",$,n(e.device.lastUpdate),1)]),l("div",F,[l("div",N,[d(s,{name:"location-o",size:"12"}),l("span",null,n(e.device.location||"未知位置"),1)]),void 0!==e.device.temperature?(i(),o("div",O,[d(s,{name:"fire-o",size:"12"}),l("span",null,n(e.device.temperature)+"°C",1)])):m("",!0),void 0!==e.device.humidity?(i(),o("div",E,[d(s,{name:"water-o",size:"12"}),l("span",null,n(e.device.humidity)+"%",1)])):m("",!0)])]),l("div",K,[d(f,{type:(h=e.device.status,{online:"success",offline:"warning",error:"danger"}[h]||"default"),onClick:p(j,["stop"])},{default:c(()=>[v(n(g(e.device.status)),1)]),_:1},8,["type"])]),e.isSelected?(i(),o("div",R,[d(s,{name:"success",size:"16"})])):m("",!0)],6);var h}}}),[["__scopeId","data-v-1082ac8f"]]),T={class:"sdkwork-device-list"},Z=a({__name:"sdkwork-device-list",props:{api:{},params:{default:()=>({})},selectable:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},pageSize:{default:10},deviceKey:{default:"id"},deviceNameField:{default:"name"},deviceDescriptionField:{default:"description"},themeMode:{default:"auto"}},emits:["select","delete","click","search","load"],setup(e,{expose:t,emit:a}){const r=e,n=a,m=k(),p=s(()=>({pageNumber:0,pageSize:r.pageSize,filters:r.params})),u=e=>{n("select",e)},h=e=>{n("delete",e)},_=e=>{n("search",e)},w=e=>{n("load",e)};return t({refresh:()=>m.value?.refresh(),loadMore:()=>m.value?.loadMore(),getDevices:()=>m.value?.getData()||[],getSelectedDevices:()=>m.value?.getSelectedItems()||[],clearSelected:()=>m.value?.clearSelected(),setSelectedDevices:e=>m.value?.setSelectedItems(e)}),(t,a)=>{const s=z,r=S;return i(),o("div",T,[d(B,{api:e.api,params:p.value,selectable:e.selectable,deletable:e.deletable,searchable:e.searchable,"page-size":e.pageSize,"item-key":e.deviceKey,"item-title-field":e.deviceNameField,"item-description-field":e.deviceDescriptionField,"left-spacing":0,"right-spacing":0,onSelect:u,onDelete:h,onSearch:_,onLoad:w,ref_key:"apiListRef",ref:m,showBorderBottom:"",borderBottomLeftOffset:70},{default:c(({item:e,index:t,selected:s})=>[d(P,{device:e,"is-selected":s,"show-border-bottom":!0,onClickItem:a[0]||(a[0]=e=>{(e=>{n("click",e)})(e)}),onSelectItem:a[1]||(a[1]=e=>{(e=>{n("select",e)})(e)})},null,8,["device","is-selected"])]),empty:c(()=>[f(t.$slots,"empty",{},()=>[d(s,{description:"暂无设备",image:"search"},{description:c(()=>[...a[2]||(a[2]=[l("div",{class:"empty-description"},[l("p",null,"暂时没有设备"),l("p",{class:"empty-tip"},"您可以添加新设备或调整搜索条件")],-1)])]),_:1})],!0)]),loading:c(()=>[f(t.$slots,"loading",{},()=>[d(r,{size:"24px",vertical:""},{default:c(()=>[...a[3]||(a[3]=[v("加载设备数据...",-1)])]),_:1})],!0)]),header:c(()=>[f(t.$slots,"header",{},void 0,!0)]),footer:c(()=>[f(t.$slots,"footer",{},void 0,!0)]),_:3},8,["api","params","selectable","deletable","searchable","page-size","item-key","item-title-field","item-description-field"])])}}}),q=g(Z,[["__scopeId","data-v-9e866b52"]]),H={class:"stats-section"},J={class:"stat-card online"},Q={class:"stat-number"},V={class:"stat-card offline"},W={class:"stat-number"},X={class:"stat-card total"},A={class:"stat-number"},G=a({__name:"devices",setup(a){const o=k(""),r=k([]),m=h(),v=s(()=>({keyword:o.value,category:"all"})),p=async e=>{console.log("获取设备列表参数:",e),await new Promise(e=>setTimeout(e,500));const t=[{id:"1",name:"智能空调",type:"air-conditioner",status:"online",avatar:"https://via.placeholder.com/40",lastUpdate:"2分钟前",location:"客厅",temperature:25,humidity:45},{id:"2",name:"智能门锁",type:"door-lock",status:"online",avatar:"https://via.placeholder.com/40",lastUpdate:"5分钟前",location:"大门"},{id:"3",name:"智能灯泡",type:"light",status:"offline",avatar:"https://via.placeholder.com/40",lastUpdate:"1小时前",location:"卧室"},{id:"4",name:"温度传感器",type:"sensor",status:"online",avatar:"https://via.placeholder.com/40",lastUpdate:"刚刚",location:"书房",temperature:23,humidity:50},{id:"5",name:"智能摄像头",type:"camera",status:"error",avatar:"https://via.placeholder.com/40",lastUpdate:"30分钟前",location:"走廊"}];let a=t;return e.keyword&&(a=t.filter(t=>t.name.toLowerCase().includes(e.keyword.toLowerCase())||t.location?.toLowerCase().includes(e.keyword.toLowerCase()))),{content:a,totalElements:a.length,totalPages:1,number:0,last:!0,size:e.size||10,first:!0,numberOfElements:a.length,empty:0===a.length}},u=s(()=>3),f=s(()=>1),y=s(()=>5),b=e=>{r.value=[e],console.log("选中设备:",e)},g=e=>{m.push(`/devices/${e.id}`)},S=e=>{o.value=e,console.log("搜索关键词:",e)},z=()=>{j("刷新成功")};return(a,s)=>{const r=e,m=t;return i(),_(w,{"safe-area":"",scrollable:"","theme-mode":"auto"},{default:c(()=>[d(q,{api:p,params:v.value,"search-keyword":o.value,searchable:!1,selectable:"","theme-mode":"auto",onSelect:b,onClick:g,onSearch:S,onRefresh:z},{header:c(()=>[l("div",H,[d(m,{gutter:"12"},{default:c(()=>[d(r,{span:"8"},{default:c(()=>[l("div",J,[l("div",Q,n(u.value),1),s[0]||(s[0]=l("div",{class:"stat-label"},"在线",-1))])]),_:1}),d(r,{span:"8"},{default:c(()=>[l("div",V,[l("div",W,n(f.value),1),s[1]||(s[1]=l("div",{class:"stat-label"},"离线",-1))])]),_:1}),d(r,{span:"8"},{default:c(()=>[l("div",X,[l("div",A,n(y.value),1),s[2]||(s[2]=l("div",{class:"stat-label"},"总数",-1))])]),_:1})]),_:1})])]),_:1},8,["params","search-keyword"])]),_:1})}}});"function"==typeof C&&C(G);const Y=g(G,[["__scopeId","data-v-912db5f3"]]);export{Y as default};
