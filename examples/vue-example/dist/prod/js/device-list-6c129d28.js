import{k as a,l as e,n as t,w as s,m as l,o as r,p as o,t as n,q as i,I as d,_ as u}from"./index-5affcab4.js";import{F as c}from"./index-072ccf86.js";import{a as v,_ as p}from"./sdkwork-cell-group-c8f6555d.js";import{E as m}from"./index-ccee2c65.js";import{_ as h}from"./sdkwork-search-bar-4d747e22.js";import{k as f,j as k,q as y,F as w,O as S,r as j,c as W,b as _,Q as g,R as x,S as b,Z as z,a0 as A,a4 as B,Y as I}from"./vue-vendor-a2672387.js";import{b as V}from"./route-block-83d24a4e.js";import"./utils-vendor-b5712723.js";import"./sdkwork-icon-2d6efb98.js";import"./use-id-82312033.js";const[C,U]=a("skeleton-title");var q=s(f({name:C,props:{round:Boolean,titleWidth:t},setup:a=>()=>k("h3",{class:U([{round:a.round}]),style:{width:e(a.titleWidth)}},null)}));const[D,F]=a("skeleton-avatar");var L=s(f({name:D,props:{avatarSize:t,avatarShape:r("round")},setup:a=>()=>k("div",{class:F([a.avatarShape]),style:l(a.avatarSize)},null)}));const Q="100%",E={round:Boolean,rowWidth:{type:t,default:Q}},[N,O]=a("skeleton-paragraph");var R=s(f({name:N,props:E,setup:a=>()=>k("div",{class:O([{round:a.round}]),style:{width:a.rowWidth}},null)}));const[Y,Z]=a("skeleton");var $=f({name:Y,inheritAttrs:!1,props:{row:o(0),round:Boolean,title:Boolean,titleWidth:t,avatar:Boolean,avatarSize:t,avatarShape:r("round"),loading:n,animate:n,rowWidth:{type:[Number,String,Array],default:Q}},setup(a,{slots:t,attrs:s}){const l=()=>{if(a.avatar)return k(L,{avatarShape:a.avatarShape,avatarSize:a.avatarSize},null)},r=()=>{if(a.title)return k(q,{round:a.round,titleWidth:a.titleWidth},null)},o=e=>{const{rowWidth:t}=a;return t===Q&&e===+a.row-1?"60%":Array.isArray(t)?t[e]:t};return()=>{var n;return a.loading?k("div",y({class:Z({animate:a.animate,round:a.round})},s),[t.template?t.template():k(w,null,[l(),k("div",{class:Z("content")},[r(),Array(+a.row).fill("").map((t,s)=>k(R,{key:s,round:a.round,rowWidth:e(o(s))},null))])])]):null==(n=t.default)?void 0:n.call(t)}}});const G=s($),H={class:"device-list-page"},J={class:"search-section"},K={class:"device-list-container"},M=f({__name:"device-list",setup(a){const e=S(),t=i(),s=j(""),l=j(!1),r=j({x:0,y:200}),o=W(()=>s.value?t.deviceList.filter(a=>a.name.includes(s.value)||a.id.includes(s.value)):t.deviceList),n=()=>{console.log("搜索关键词:",s.value)},u=()=>{e.push("/device/add")},f=a=>{r.value=a};return _(async()=>{l.value=!0;try{await t.fetchDevices()}catch(a){console.error("加载设备列表失败:",a)}finally{l.value=!1}}),(a,t)=>{const i=h,y=G,S=m,j=d,W=v,_=p,V=c;return g(),x("div",H,[b("div",J,[k(i,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=a=>s.value=a),placeholder:"搜索设备名称或ID",onSearch:n},null,8,["modelValue"])]),b("div",K,[l.value?(g(),z(y,{key:0,rows:"3",animated:""},{default:A(()=>[...t[1]||(t[1]=[B("加载中...",-1)])]),_:1})):0===o.value.length?(g(),z(S,{key:1,description:"暂无设备",image:"search"})):(g(),z(_,{key:2},{default:A(()=>[(g(!0),x(w,null,I(o.value,a=>(g(),z(W,{key:a.id,title:a.name,value:a.status,label:a.type,"is-link":"",onClick:t=>{return s=a.id,void e.push(`/device/detail/${s}`);var s}},{icon:A(()=>[k(j,{name:"online"===a.status?"success":"cross",color:"online"===a.status?"#07c160":"#ee0a24"},null,8,["name","color"])]),_:2},1032,["title","value","label","onClick"]))),128))]),_:1}))]),k(V,{axis:"xy",magnetic:"x",offset:r.value,"onUpdate:offset":f,onClick:u},{default:A(()=>[k(j,{name:"plus",size:"20"})]),_:1},8,["offset"])])}}});"function"==typeof V&&V(M);const P=u(M,[["__scopeId","data-v-8de325ad"]]);export{P as default};
