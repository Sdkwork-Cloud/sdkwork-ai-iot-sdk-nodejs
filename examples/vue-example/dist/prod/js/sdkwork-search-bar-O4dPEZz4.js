import{k as e,r as a,f as o,w as l,b as s,o as t,P as d,W as r,S as u,U as n,s as c,ag as i,x as h,R as p,a1 as k,V as m,n as v,Q as f,j as w,a4 as b,$ as y}from"./vue-vendor-CnVaDBlt.js";import{S as _}from"./sdkwork-icon-CaOXi-u0.js";import{_ as g}from"./index-CJyFKuKg.js";const M={key:0,class:"sdkwork-search-bar__left"},V={class:"sdkwork-search-bar__content"},x={class:"sdkwork-search-bar__icon"},B={class:"sdkwork-search-bar__field"},$=["type","placeholder","disabled","readonly","maxlength","autofocus"],E=g(e({__name:"sdkwork-search-bar",props:{modelValue:{default:""},type:{default:"text"},placeholder:{default:"搜索"},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},maxlength:{default:void 0},autofocus:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},showAction:{type:Boolean,default:!1},actionText:{default:"取消"},shape:{default:"square"},background:{default:""},themeMode:{default:"auto"},align:{default:"left"},hideActionWhenEmpty:{type:Boolean,default:!1}},emits:["update:modelValue","search","cancel","input","focus","blur","clear","keypress"],setup(e,{expose:g,emit:E}){const A=e,j=E,L=a(A.modelValue),I=a(!1),T=a(null),W=a(!1),q=()=>{"dark"===A.themeMode?W.value=!0:"light"===A.themeMode?W.value=!1:"auto"===A.themeMode&&(W.value=!("undefined"==typeof window||!window.matchMedia)&&window.matchMedia("(prefers-color-scheme: dark)").matches)},K=o(()=>W.value?"sdkwork-search-bar--dark":"sdkwork-search-bar--light"),R=o(()=>A.showAction?!(A.hideActionWhenEmpty&&!L.value):I.value);l(()=>A.themeMode,(e,a)=>{q(),"auto"===a&&"auto"!==e&&S&&(S.removeEventListener("change",U),S=null),"auto"===e&&"auto"!==a&&"undefined"!=typeof window&&window.matchMedia&&(S=window.matchMedia("(prefers-color-scheme: dark)"),S.addEventListener("change",U),U())});let S=null;const U=()=>{"auto"===A.themeMode&&(W.value=S?.matches||!1)};s(()=>{q(),"auto"===A.themeMode&&"undefined"!=typeof window&&window.matchMedia&&(S=window.matchMedia("(prefers-color-scheme: dark)"),U(),S.addEventListener("change",U))}),t(()=>{S&&S.removeEventListener("change",U)}),l(()=>A.modelValue,e=>{e!==L.value&&(L.value=e)}),l(L,e=>{e!==A.modelValue&&(j("update:modelValue",e),j("input",e))});const C=e=>{I.value=!0,j("focus",e)},F=e=>{I.value=!1,j("blur",e)},P=e=>{const a=e.target;L.value=a.value},Q=e=>{j("keypress",e)},z=()=>{j("search",L.value)},D=()=>{L.value="",I.value=!1,j("cancel"),j("update:modelValue","")},G=()=>{L.value="",j("clear"),j("update:modelValue",""),v(()=>{T.value?.focus()})};return g({focus:()=>{T.value?.focus()},blur:()=>{T.value?.blur()},getInput:()=>T.value,getValue:()=>L.value,setValue:e=>{L.value=e},clear:G,cancel:D}),q(),(a,o)=>(f(),d("div",{class:p(["sdkwork-search-bar",[{"sdkwork-search-bar--disabled":e.disabled,"sdkwork-search-bar--readonly":e.readonly,"sdkwork-search-bar--show-action":e.showAction,"sdkwork-search-bar--round":"round"===e.shape},K.value]]),style:m({background:e.background})},[a.$slots.left?(f(),d("div",M,[n(a.$slots,"left",{},void 0,!0)])):r("",!0),u("div",V,[u("div",x,[n(a.$slots,"left-icon",{},()=>[w(_,{icon:"material-symbols:search-rounded",width:"16",height:"16"})],!0)]),u("div",B,[c(u("input",{ref_key:"inputRef",ref:T,"onUpdate:modelValue":o[0]||(o[0]=e=>L.value=e),type:e.type,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,maxlength:e.maxlength,autofocus:e.autofocus,class:p([[`sdkwork-search-bar__input--${e.align}`],"sdkwork-search-bar__input"]),onFocus:C,onBlur:F,onInput:P,onKeypress:Q,onKeyup:[h(z,["enter"]),h(D,["esc"])]},null,42,$),[[i,L.value]]),e.clearable&&L.value&&!e.disabled?(f(),d("div",{key:0,class:"sdkwork-search-bar__clear",onMousedown:k(G,["prevent"]),onTouchstart:k(G,["prevent"])},[n(a.$slots,"clear-icon",{},()=>[w(_,{icon:"material-symbols:close-rounded",width:"16",height:"16"})],!0)],32)):r("",!0)])]),R.value?(f(),d("div",{key:1,class:"sdkwork-search-bar__action",onClick:D},[n(a.$slots,"action",{},()=>[b(y(e.actionText),1)],!0)])):r("",!0)],6))}}),[["__scopeId","data-v-0947f3a8"]]);export{E as _};
