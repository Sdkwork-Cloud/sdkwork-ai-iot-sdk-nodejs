import{S as e}from"./sdkwork-page-container-390f5fca.js";import{s as t,d as a,B as l,_ as s}from"./index-2cafbb5e.js";import{L as i}from"./index-6e9c758b.js";import{E as o}from"./index-17b6a864.js";/* empty css              */import{D as r,a as n}from"./index-87c43664.js";/* empty css              */import{N as u}from"./index-a906ccf1.js";import{k as d,O as m,r as c,c as v,b as p,Q as h,Z as f,a0 as g,j as y,S as k,a4 as x,U as w,R as j,F as D,Y as b,$ as _,a1 as C}from"./vue-vendor-fce65f55.js";import"./utils-vendor-b5712723.js";import"./use-tab-status-2f29a6cd.js";import"./use-id-bc367f23.js";import"./index-fa16672a.js";const V={class:"history-container"},$={class:"history-toolbar"},U={class:"toolbar-actions"},I={key:1,class:"history-list"},L=["onClick"],M={class:"item-content"},T={class:"item-thumb"},z=["src","alt"],A={class:"item-info"},N={class:"item-title"},O={class:"item-desc"},S={class:"item-meta"},B={class:"item-type"},E={class:"item-time"},F=s(d({__name:"history",setup(s){const d=m(),F=c("all"),G=c("all"),H=[{text:"全部类型",value:"all"},{text:"作品",value:"work"},{text:"智能体",value:"agent"},{text:"声音",value:"voice"},{text:"角色",value:"character"}],Q=[{text:"全部时间",value:"all"},{text:"今天",value:"today"},{text:"最近7天",value:"week"},{text:"最近30天",value:"month"}],R=c([]),Y=c(!1),Z=c(!1),q=[{id:1,title:"AI绘画作品 - 山水风景",description:"使用AI技术创作的山水风景画",thumb:"/images/placeholder.jpg",type:"work",time:new Date(Date.now()-72e5)},{id:2,title:"智能语音助手",description:"多功能智能语音助手应用",thumb:"/images/placeholder.jpg",type:"agent",time:new Date(Date.now()-864e5)},{id:3,title:"自然语音包",description:"高质量自然语音合成包",thumb:"/images/placeholder.jpg",type:"voice",time:new Date(Date.now()-2592e5)}],J=v(()=>{let e=R.value;if("all"!==F.value&&(e=e.filter(e=>e.type===F.value)),"all"!==G.value){const t=new Date,a=new Date;switch(G.value){case"today":a.setHours(0,0,0,0);break;case"week":a.setDate(t.getDate()-7);break;case"month":a.setDate(t.getDate()-30)}e=e.filter(e=>e.time>=a)}return e}),K=e=>{const t=(new Date).getTime()-e.getTime();if(t<36e5){return`${Math.floor(t/6e4)}分钟前`}if(t<864e5){return`${Math.floor(t/36e5)}小时前`}return`${Math.floor(t/864e5)}天前`},P=()=>{Y.value=!0,setTimeout(()=>{R.value.length>=q.length?Z.value=!0:R.value=[...q],Y.value=!1},500)},W=async()=>{try{await a({title:"确认清空",message:"确定要清空所有浏览记录吗？"}),R.value=[],t("浏览记录已清空")}catch{}},X=()=>{d.push("/")};return p(()=>{}),(a,s)=>{const d=u,m=r,c=n,v=l,p=o,q=i,ee=e;return h(),f(ee,{"safe-area":"",scrollable:"","theme-mode":"auto"},{header:g(()=>[y(d,{title:"浏览记录","left-text":"返回","left-arrow":"",onClickLeft:s[0]||(s[0]=e=>a.$router.back())})]),default:g(()=>[k("div",V,[k("div",$,[y(c,null,{default:g(()=>[y(m,{modelValue:F.value,"onUpdate:modelValue":s[1]||(s[1]=e=>F.value=e),options:H},null,8,["modelValue"]),y(m,{modelValue:G.value,"onUpdate:modelValue":s[2]||(s[2]=e=>G.value=e),options:Q},null,8,["modelValue"])]),_:1}),k("div",U,[R.value.length>0?(h(),f(v,{key:0,size:"small",onClick:W},{default:g(()=>[...s[4]||(s[4]=[x(" 清空记录 ",-1)])]),_:1})):w("",!0)])]),0===J.value.length?(h(),f(p,{key:0,image:"search",description:"暂无浏览记录"},{default:g(()=>[y(v,{round:"",type:"primary",onClick:X},{default:g(()=>[...s[5]||(s[5]=[x(" 去浏览内容 ",-1)])]),_:1})]),_:1})):(h(),j("div",I,[y(q,{loading:Y.value,"onUpdate:loading":s[3]||(s[3]=e=>Y.value=e),finished:Z.value,"finished-text":"没有更多了",onLoad:P},{default:g(()=>[(h(!0),j(D,null,b(J.value,e=>{return h(),j("div",{key:e.id,class:"history-item",onClick:a=>(e=>{t(`查看：${e.title}`)})(e)},[k("div",M,[k("div",T,[k("img",{src:e.thumb,alt:e.title},null,8,z)]),k("div",A,[k("div",N,_(e.title),1),k("div",O,_(e.description),1),k("div",S,[k("span",B,_((a=e.type,{work:"作品",agent:"智能体",voice:"声音",character:"角色"}[a]||"未知")),1),k("span",E,_(K(e.time)),1)])])]),y(v,{size:"small",type:"danger",plain:"",onClick:C(a=>{return l=e.id,R.value=R.value.filter(e=>e.id!==l),void t("记录已删除");var l},["stop"])},{default:g(()=>[...s[6]||(s[6]=[x(" 删除 ",-1)])]),_:1},8,["onClick"])],8,L);var a}),128))]),_:1},8,["loading","finished"])]))])]),_:1})}}}),[["__scopeId","data-v-38d85496"]]);export{F as default};
