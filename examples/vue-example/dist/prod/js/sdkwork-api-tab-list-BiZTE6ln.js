import{_ as e}from"./index-lnKdqbPs.js";/* empty css              */import"./index-CDC4TuBW.js";import{_ as t,E as a,L as l}from"./LoadMoreSection-DxkHo9qH.js";import{D as s,u as i,S as o}from"./shared-DUTVD2z0.js";import{L as d}from"./ListItem-B_CUZCa5.js";import{T as r,a as n}from"./index-CqpRwYnd.js";import{k as u,r as c,f as m,w as f,b as p,n as v,o as b,P as h,Q as y,j as g,a0 as S,F as k,Y as w,Z as B,S as x,W as _,u as M,i as D,U as T,m as z,ac as F,ad as $,R as j}from"./vue-vendor-CnVaDBlt.js";const L={key:0,class:"tab-section"},A={class:"tab-content"},I={class:"list-content"},P={key:1,class:"data-section"},V={key:1,class:"no-tab-section"},E={class:"list-content"},K={key:1,class:"data-section"},O=e(u({__name:"sdkwork-api-tab-list",props:{api:{type:Function,default:void 0},service:{default:void 0},params:{default:()=>({})},pageableParams:{default:()=>({})},selectable:{type:Boolean,default:s.selectable},deletable:{type:Boolean,default:s.deletable},searchable:{type:Boolean,default:s.searchable},pageSize:{default:s.pageSize},itemKey:{default:s.itemKey},itemTitleField:{default:s.itemTitleField},itemDescriptionField:{default:s.itemDescriptionField},topSpacing:{default:s.topSpacing},leftSpacing:{default:s.leftSpacing},rightSpacing:{default:s.rightSpacing},tabs:{default:()=>[]},tabsApi:{},tabsSticky:{type:Boolean,default:s.tabsSticky},tabsSwipeable:{type:Boolean,default:s.tabsSwipeable},defaultActiveTab:{},showBorderBottom:{type:Boolean,default:s.showBorderBottom},borderBottomLeftOffset:{default:s.borderBottomLeftOffset},showNoMoreData:{type:Boolean,default:s.showNoMoreData},themeMode:{default:s.themeMode},minSize:{},itemGap:{},fixed:{type:Boolean},buffer:{},bufferTop:{},bufferBottom:{},horizontal:{type:Boolean},scrollDistance:{},fixSelection:{type:Boolean},start:{},offset:{},listStyle:{},listClass:{},itemStyle:{},itemClass:{},renderControl:{}},emits:["tab-change","select","delete","search","reach-top","reach-bottom","scroll","item-resize","range-update","load"],setup(e,{expose:s,emit:u}){const O=e,R=u,C=c([]),U=c(O.defaultActiveTab),N=c([]),G=c(!1),Q=m(()=>N.value.length>0),W=m(()=>"dark"===O.themeMode||"light"!==O.themeMode&&(!("undefined"==typeof window||!window.matchMedia)&&window.matchMedia("(prefers-color-scheme: dark)").matches)),Y=m(()=>W.value?"api-tab-list--dark":"api-tab-list--light"),Z=c();let q=null;const H=m(()=>{if(!Q.value)return O.params;const e=N.value.find(e=>ue(e)===U.value);return{...O.params,...e?.params||{}}}),{dataList:J,currentPage:X,totalElements:ee,totalPages:te,loading:ae,loadingMore:le,hasMore:se,loadData:ie}=i({api:O.api,service:O.service,params:H,pageableParams:O.pageableParams,pageSize:O.pageSize,autoLoad:!1}),oe=(e,t)=>e[O.itemKey]||t,de=e=>C.value.some(t=>oe(t,-1)===oe(e,-1)),re=e=>ue(e),ne=e=>e.title||String(e.value),ue=e=>e.value,ce=async(e=0,t=!1)=>{try{await ie(e,t),(J.value.length>0||0===e)&&R("load",{content:J.value,number:X.value,totalElements:ee.value,totalPages:te.value,last:!se.value,empty:0===J.value.length,first:0===X.value,numberOfElements:J.value.length,size:O.pageSize})}catch(a){}},me=()=>{ce(0)},fe=e=>{R("search",e),ce(0)},pe=e=>{U.value=e;const t=N.value.find(t=>ue(t)===e);t&&(R("tab-change",t,t.params||{}),ce(0))},ve=e=>{if(O.selectable){const t=C.value.findIndex(t=>oe(t,-1)===oe(e,-1));t>-1?C.value.splice(t,1):C.value.push(e)}R("select",e)},be=e=>{R("delete",e)};return f(()=>O.params,()=>{ie(0)},{deep:!0}),f(()=>O.pageSize,()=>{ie(0)}),f(U,()=>{ie(0)}),p(()=>{(async()=>{if(O.tabsApi)try{G.value=!0;const e=await O.tabsApi();N.value=e,N.value.length>0&&!U.value&&(U.value=ue(N.value[0]))}catch(e){}finally{G.value=!1}else O.tabs.length>0&&(N.value=O.tabs,N.value.length>0&&!U.value&&(U.value=ue(N.value[0])))})().then(()=>{ie(0),v(()=>{Z.value?.$el&&(q=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&se.value&&!le.value&&!ae.value&&ce(X.value+1,!0)})},{root:null,rootMargin:"0px",threshold:.1}),q.observe(Z.value.$el))})})}),b(()=>{q&&(q.disconnect(),q=null)}),s({refresh:()=>ie(0),loadMore:()=>ie(X.value+1,!0),getData:()=>J.value,getSelectedItems:()=>C.value,clearSelected:()=>{C.value=[]},setSelectedItems:e=>{C.value=e},getActiveTab:()=>U.value,setActiveTab:e=>{U.value=e},getTabsData:()=>N.value}),(s,i)=>{const u=t,c=n,m=r;return y(),h("div",{class:j(["sdkwork-api-tab-list",Y.value])},[Q.value?(y(),h("div",L,[g(m,{active:U.value,"onUpdate:active":i[1]||(i[1]=e=>U.value=e),sticky:e.tabsSticky,swipeable:e.tabsSwipeable,onChange:pe},{default:S(()=>[(y(!0),h(k,null,w(N.value,t=>(y(),B(c,{key:re(t),title:ne(t),name:ue(t)},{default:S(()=>[x("div",A,[e.searchable?(y(),B(o,{key:0,searchable:e.searchable,onSearch:fe},null,8,["searchable"])):_("",!0),g(u,{modelValue:M(ae),"onUpdate:modelValue":i[0]||(i[0]=e=>D(ae)?ae.value=e:null),onRefresh:me},{default:S(()=>[x("div",I,[M(ae)||M(J).length?(y(),h("div",P,[T(s.$slots,"header",{},void 0,!0),(y(!0),h(k,null,w(M(J),(t,a)=>(y(),B(d,{key:oe(t,a),item:t,index:a,selectable:e.selectable,deletable:e.deletable,"is-selected":de(t),"item-key":e.itemKey,"item-title-field":e.itemTitleField,"item-description-field":e.itemDescriptionField,"show-border-bottom":O.showBorderBottom,"border-bottom-left-offset":O.borderBottomLeftOffset,onSelect:ve,onDelete:be},{default:S(({item:e,index:t,selected:a})=>[T(s.$slots,"default",{item:e,index:t,selected:a},void 0,!0)]),_:3},8,["item","index","selectable","deletable","is-selected","item-key","item-title-field","item-description-field","show-border-bottom","border-bottom-left-offset"]))),128)),T(s.$slots,"footer",{},void 0,!0),g(l,{"has-more":M(se),"loading-more":M(le),"data-list":M(J),ref_for:!0,ref_key:"loadMoreSectionRef",ref:Z},null,8,["has-more","loading-more","data-list"])])):(y(),B(a,{key:0},{default:S(({empty:e})=>[T(s.$slots,"empty",z({ref_for:!0},{empty:e}),void 0,!0)]),_:3}))])]),_:3},8,["modelValue"])])]),_:3},8,["title","name"]))),128))]),_:3},8,["active","sticky","swipeable"])])):(y(),h("div",V,[e.searchable?(y(),B(o,{key:0,searchable:e.searchable,onSearch:fe},null,8,["searchable"])):_("",!0),g(u,{modelValue:M(ae),"onUpdate:modelValue":i[2]||(i[2]=e=>D(ae)?ae.value=e:null),onRefresh:me},{default:S(()=>[x("div",E,[M(ae)||M(J).length?(y(),h("div",K,[T(s.$slots,"header",{},void 0,!0),(y(!0),h(k,null,w(M(J),(t,a)=>(y(),B(d,{key:oe(t,a),item:t,index:a,selectable:e.selectable,deletable:e.deletable,"is-selected":de(t),"item-key":e.itemKey,"item-title-field":e.itemTitleField,"item-description-field":e.itemDescriptionField,onSelect:ve,onDelete:be},{default:S(({item:e,index:t,selected:a})=>[T(s.$slots,"default",{item:e,index:t,selected:a},void 0,!0)]),_:3},8,["item","index","selectable","deletable","is-selected","item-key","item-title-field","item-description-field"]))),128)),T(s.$slots,"footer",{},void 0,!0),g(l,{"has-more":M(se),"loading-more":M(le),"data-list":M(J),ref_key:"loadMoreSectionRef",ref:Z},null,8,["has-more","loading-more","data-list"])])):(y(),B(a,{key:0},{default:S(({empty:e})=>[T(s.$slots,"empty",F($({empty:e})),void 0,!0)]),_:3}))])]),_:3},8,["modelValue"])]))],2)}}}),[["__scopeId","data-v-df121a28"]]);export{O as S};
