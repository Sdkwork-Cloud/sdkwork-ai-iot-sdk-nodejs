import{z as e,k as a,a as t,w as o,f as i,o as n,b as l,P as s,Q as d,V as r,R as c,S as u,U as m,p as f,e as v,O as b,W as p,F as h,a4 as k,$ as g,j as w,a0 as y,Y as _,Z as I,u as C}from"./vue-vendor-BOogp7Xw.js";import{_ as B,v as x,d as V}from"./index-3Iq02xX1.js";import{a as A}from"./chat-BZNSWJpj.js";const M=e("notification",{state:()=>({notifications:[],unreadCount:0}),getters:{unreadNotifications:e=>e.notifications.filter(e=>!e.read),readNotifications:e=>e.notifications.filter(e=>e.read),getNotificationsByType:e=>a=>e.notifications.filter(e=>e.type===a)},actions:{addNotification(e){const a={...e,id:Date.now().toString(),timestamp:new Date,read:!1};this.notifications.unshift(a),this.unreadCount++},markAsRead(e){const a=this.notifications.find(a=>a.id===e);a&&!a.read&&(a.read=!0,this.unreadCount--)},markAllAsRead(){this.notifications.forEach(e=>{e.read||(e.read=!0)}),this.unreadCount=0},removeNotification(e){const a=this.notifications.find(a=>a.id===e);a&&!a.read&&this.unreadCount--,this.notifications=this.notifications.filter(a=>a.id!==e)},clearAll(){this.notifications=[],this.unreadCount=0},initializeSampleNotifications(){this.notifications=[{id:"1",title:"设备离线提醒",message:"智能灯泡已离线超过2小时",type:"warning",timestamp:new Date(Date.now()-18e5),read:!1},{id:"2",title:"固件更新可用",message:"智能门锁有新版本固件v2.2.0可用",type:"info",timestamp:new Date(Date.now()-72e5),read:!0},{id:"3",title:"温度异常",message:"客厅温度超过设定阈值",type:"error",timestamp:new Date(Date.now()-36e5),read:!1}],this.unreadCount=this.notifications.filter(e=>!e.read).length}}}),O={class:"sdkwork-tabbar__content"},D=B(a({__name:"sdkwork-tabbar",props:{modelValue:{default:""},fixed:{type:Boolean,default:!1},border:{type:Boolean,default:!0},zIndex:{default:1},activeColor:{default:"#1989fa"},inactiveColor:{default:"#7d7e80"},route:{type:Boolean,default:!1},placeholder:{type:Boolean,default:!1},safeAreaInsetBottom:{type:Boolean,default:!0},iconOnly:{type:Boolean,default:!1},themeMode:{default:"auto"}},emits:["update:modelValue","change"],setup(e,{emit:a}){const v=e,b=a,p=t(v.modelValue),h=t(!1),k={activeName:p,setActive:e=>{p.value!==e&&(p.value=e,b("update:modelValue",e),b("change",e))},activeColor:v.activeColor,inactiveColor:v.inactiveColor,route:v.route,iconOnly:v.iconOnly,isDarkMode:h};f("sdkwork-tabbar",k),o(()=>v.modelValue,e=>{e!==p.value&&(p.value=e)}),o(p,e=>{e!==v.modelValue&&(b("update:modelValue",e),b("change",e))});const g=()=>{"dark"===v.themeMode?h.value=!0:"light"===v.themeMode?h.value=!1:"auto"===v.themeMode&&(h.value=!("undefined"==typeof window||!window.matchMedia)&&window.matchMedia("(prefers-color-scheme: dark)").matches)};o(()=>v.themeMode,g);const w=i(()=>h.value?"sdkwork-tabbar--dark":"sdkwork-tabbar--light");let y=null;return n(()=>{if(g(),"auto"===v.themeMode&&"undefined"!=typeof window&&window.matchMedia){y=window.matchMedia("(prefers-color-scheme: dark)");const e=()=>{"auto"===v.themeMode&&(h.value=y?.matches||!1)};y.addEventListener("change",e),l(()=>{y&&y.removeEventListener("change",e)})}}),(a,t)=>(d(),s("div",{class:c(["sdkwork-tabbar",[{"sdkwork-tabbar--fixed":e.fixed,"sdkwork-tabbar--border":e.border,"sdkwork-tabbar--safe-area-inset-bottom":e.safeAreaInsetBottom},w.value]]),style:r({zIndex:e.zIndex})},[u("div",O,[m(a.$slots,"default",{},void 0,!0)])],6))}}),[["__scopeId","data-v-e5daa083"]]),N={class:"sdkwork-tabbar-item__icon"},z={key:0,class:"sdkwork-tabbar-item__icon-wrapper"},j=["src"],W={key:0,class:"sdkwork-tabbar-item__badge-wrapper"},S={key:0,class:"sdkwork-tabbar-item__text"},$=B(a({__name:"sdkwork-tabbar-item",props:{name:{default:""},icon:{default:""},dot:{type:Boolean,default:!1},badge:{type:[String,Number,Boolean],default:""},url:{default:""},to:{default:""},replace:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},iconOnly:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:a}){const o=e,n=a,l=v("sdkwork-tabbar",{activeName:t(""),setActive:e=>{},activeColor:"#1989fa",inactiveColor:"#7d7e80",route:!1,iconOnly:!1,isDarkMode:t(!1)}),f=b(),w=i(()=>l.activeName.value===o.name),y=i(()=>o.dot||""!==o.badge),_=i(()=>l.activeColor),I=i(()=>l.inactiveColor),C=i(()=>void 0!==o.iconOnly?o.iconOnly:l.iconOnly),B=i(()=>l.isDarkMode?.value||!1),x=i(()=>B.value?"sdkwork-tabbar-item--dark":"sdkwork-tabbar-item--light"),V=e=>{if(!o.disabled)if(n("click"),!w.value&&o.name&&l.setActive(o.name),o.to&&l.route){const e="string"==typeof o.to?{path:o.to}:o.to;o.replace?f.replace(e):f.push(e)}else o.url&&(o.replace?window.location.replace(o.url):window.location.href=o.url)};return(a,t)=>(d(),s("div",{class:c(["sdkwork-tabbar-item",[{"sdkwork-tabbar-item--active":w.value,"sdkwork-tabbar-item--disabled":e.disabled},x.value]]),style:r({color:w.value?_.value:I.value}),onClick:V},[u("div",N,[m(a.$slots,"icon",{active:w.value},()=>[e.icon?(d(),s("div",z,["string"==typeof e.icon&&(e.icon.endsWith(".png")||e.icon.endsWith(".jpg")||e.icon.endsWith(".jpeg")||e.icon.endsWith(".svg")||e.icon.endsWith(".gif"))?(d(),s("img",{key:0,src:e.icon,class:"sdkwork-tabbar-item__icon-img"},null,8,j)):"string"==typeof e.icon?(d(),s("i",{key:1,class:c([e.icon,"sdkwork-tabbar-item__icon-class"])},null,2)):p("",!0)])):p("",!0)],!0),y.value?(d(),s("div",W,[m(a.$slots,"badge",{},()=>[u("div",{class:c(["sdkwork-tabbar-item__badge",{"sdkwork-tabbar-item__badge--dot":""===e.badge||!0===e.badge}])},[""!==e.badge&&!0!==e.badge?(d(),s(h,{key:0},[k(g(e.badge),1)],64)):p("",!0)],2)],!0)])):p("",!0)]),C.value?p("",!0):(d(),s("div",S,[m(a.$slots,"default",{active:w.value},()=>[k(g(e.name),1)],!0)]))],6))}}),[["__scopeId","data-v-acac58ef"]]),R={class:"app-bottom-tabbar"},E={key:0,class:"sdkwork-badge"},L=B(a({__name:"app-bottom-tabbar",props:{modelValue:{default:"home"},fixed:{type:Boolean,default:!0},border:{type:Boolean,default:!0},zIndex:{default:1},activeColor:{default:"#1989fa"},inactiveColor:{default:"#7d7e80"},route:{type:Boolean,default:!0},placeholder:{type:Boolean,default:!1},safeAreaInsetBottom:{type:Boolean,default:!0},iconOnly:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,{expose:a,emit:n}){const l=e,r=n;a({setActive:e=>{m.value=e,r("update:modelValue",e),r("change",e)},getActiveTab:()=>m.value});const u=b(),m=t(l.modelValue);A();const f=x(),v=M();o(()=>l.modelValue,e=>{e!==m.value&&(m.value=e)}),o(m,e=>{e!==l.modelValue&&(r("update:modelValue",e),r("change",e))});const B={list:[{name:"home",label:"对话",activeIcon:"mingcute:message-3-fill",inactiveIcon:"mingcute:message-3-line",route:"/home"},{name:"agents",label:"智能体",activeIcon:"mdi:robot",inactiveIcon:"mdi:robot-outline",route:"/agents"},{name:"generations",label:"创作",activeIcon:"mdi:creation",inactiveIcon:"mdi:creation-outline",route:"/generations"},{name:"mall",label:"商城",activeIcon:"mdi:shopping",inactiveIcon:"mdi:shopping-outline",route:"/mall"},{name:"profile",label:"我的",activeIcon:"mdi:account",inactiveIcon:"mdi:account-outline",route:"/profile"}]},O=i(()=>0);i(()=>f.deviceList.filter(e=>"offline"===e.status).length);const N=i(()=>v.notifications.filter(e=>!e.read).length),z=i(()=>3),j=e=>{switch(e){case"home":return O.value;case"mall":return z.value;case"notifications":return N.value;default:return 0}};o(()=>u.currentRoute.value.path,e=>{const a=B.list.find(a=>a.route===e);a&&(m.value=a.name)},{immediate:!0});const W=e=>{const a=String(e),t=B.list.find(e=>e.name===a);t&&u.replace(t.route)};return(a,t)=>{const o=$,i=D;return d(),s("div",R,[w(i,{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e),fixed:e.fixed,border:e.border,"z-index":e.zIndex,"active-color":e.activeColor,"inactive-color":e.inactiveColor,route:e.route,placeholder:e.placeholder,"safe-area-inset-bottom":e.safeAreaInsetBottom,"icon-only":e.iconOnly,onChange:W},{default:y(()=>[(d(!0),s(h,null,_(B.list,a=>(d(),I(o,{key:a.name,name:a.name,"icon-only":e.iconOnly},{icon:y(({active:e})=>[w(C(V),{icon:e?a.activeIcon:a.inactiveIcon,width:"24",height:"24",class:c({"active-icon":e})},null,8,["icon","class"])]),badge:y(()=>[j(a.name)>0?(d(),s("div",E,g(j(a.name)),1)):p("",!0)]),default:y(()=>[k(" "+g(a.label)+" ",1)]),_:2},1032,["name","icon-only"]))),128))]),_:1},8,["modelValue","fixed","border","z-index","active-color","inactive-color","route","placeholder","safe-area-inset-bottom","icon-only"])])}}}),[["__scopeId","data-v-61b38cbb"]]);export{L as A};
