import{S as e}from"./sdkwork-page-container-390f5fca.js";import{k as a,O as s,r,a as o,c as l,b as n,o as i,Q as t,R as c,S as d,F as u,Y as m,V as p,j as g,u as h,$ as v,a0 as f,a4 as w,X as b,Z as k}from"./vue-vendor-fce65f55.js";import{f as y,b as V,B as x,L as _,g as B,_ as M}from"./index-2cafbb5e.js";import{F as j}from"./index-155d12c9.js";import{C as P}from"./index-44deb856.js";import{F as U}from"./index-b3fdfeb9.js";import"./utils-vendor-b5712723.js";import"./index-fa16672a.js";import"./use-id-bc367f23.js";import"./Checker-30102936.js";const $={class:"tech-background"},q={class:"tech-particles-container"},C={class:"register-main-container"},R={class:"brand-section"},S={class:"brand-content"},z={class:"brand-logo-animated"},D={class:"logo-icon"},F={class:"tech-features"},I={class:"form-section"},A={class:"form-container"},L={class:"input-group"},E={class:"input-icon"},O={class:"input-group"},T={class:"input-icon"},Z={class:"input-group"},K={class:"input-icon"},N={class:"input-group"},Q={class:"input-icon"},W={class:"input-group"},X={class:"input-icon"},Y={class:"agreement-section"},G={class:"checkbox-label"},H={class:"form-actions"},J={class:"button-content"},ee={class:"login-section"},ae=M(a({__name:"sdkwork-auth-register",props:{redirectUrl:{default:"/"},autoRedirect:{type:Boolean,default:!0},forceDarkMode:{type:Boolean,default:!1},compactMode:{type:Boolean,default:!1}},emits:["register-success","register-failed","login-click","theme-change"],setup(e,{expose:a,emit:k}){const M=e,ae=k,se=s(),re=y(),oe=r(!1),le=r(!1),ne=r(!1),ie=r(!1),te=r(),ce=o({username:"",email:"",phone:"",password:"",confirmPassword:"",agreed:!1}),de=["智能数据分析","实时监控","AI预测","安全可靠"],ue={username:[{required:!0,message:"请输入用户名",trigger:"onBlur"},{validator:e=>/^[\w\u4e00-\u9fa5]{2,20}$/.test(e),message:"用户名2-20位，支持中文、英文、数字",trigger:"onBlur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"onBlur"},{validator:e=>/^[\w.-]+@[\w.-]+\.\w+$/.test(e),message:"请输入有效的邮箱地址",trigger:"onBlur"}],phone:[{validator:e=>!e||/^1[3-9]\d{9}$/.test(e),message:"请输入有效的手机号",trigger:"onBlur"}],password:[{required:!0,message:"请输入密码",trigger:"onBlur"},{validator:e=>e.length>=6,message:"密码至少6个字符",trigger:"onBlur"},{validator:e=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(e),message:"密码需包含大小写字母和数字",trigger:"onBlur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"onBlur"},{validator:e=>e===ce.password,message:"两次输入的密码不一致",trigger:"onBlur"}],agreed:[{validator:e=>!0===e,message:"请同意用户协议和隐私政策",trigger:"onBlur"}]},me=l(()=>ce.username.trim().length>=2&&ce.email.trim().length>0&&ce.password.length>=6&&ce.confirmPassword===ce.password&&ce.agreed),pe=e=>{const a=4*Math.random()+1;return{width:`${a}px`,height:`${a}px`,animationDuration:`${6*Math.random()+4}s`,animationDelay:`${5*Math.random()}s`,left:100*Math.random()+"%",top:100*Math.random()+"%"}},ge=()=>{M.forceDarkMode?le.value=!0:(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?le.value=!0:le.value=!1,ae("theme-change",le.value))};let he=null;n(()=>{ge(),window.matchMedia&&(he=window.matchMedia("(prefers-color-scheme: dark)"),he.addEventListener("change",ge))}),i(()=>{he&&he.removeEventListener("change",ge)});const ve=async()=>{try{oe.value=!0;const e={username:ce.username.trim(),email:ce.email.trim(),phone:ce.phone.trim(),password:ce.password,confirmPassword:ce.confirmPassword,agreed:ce.agreed},a=await re.register(e);ae("register-success",a),B({type:"success",message:"注册成功",background:le.value?"var(--tech-bg-primary)":"#fff",color:(le.value,"var(--tech-text-primary)")}),M.autoRedirect&&setTimeout(()=>{se.push(M.redirectUrl)},1e3)}catch(e){console.error("注册失败:",e),ae("register-failed",e),B({type:"danger",message:"注册失败，请检查输入信息",background:le.value?"var(--tech-bg-primary)":"#fff",color:(le.value,"var(--tech-text-primary)")})}finally{oe.value=!1}},fe=()=>{ae("login-click"),se.push("/auth/login")};return a({focus:()=>{const e=document.querySelector(".modern-input input");e?.focus()},clear:()=>{ce.username="",ce.email="",ce.phone="",ce.password="",ce.confirmPassword="",ce.agreed=!1},validate:()=>te.value?.validate()}),(a,s)=>(t(),c("div",{class:b(["sdkwork-auth-register",{"dark-mode":le.value,"compact-mode":e.compactMode}])},[d("div",$,[s[8]||(s[8]=d("div",{class:"tech-grid-lines"},null,-1)),d("div",q,[(t(),c(u,null,m(20,e=>d("div",{class:"particle",key:e,style:p(pe())},null,4)),64))]),s[9]||(s[9]=d("div",{class:"tech-glow-effect"},null,-1))]),d("div",C,[d("div",R,[d("div",S,[d("div",z,[d("div",D,[g(h(V),{icon:"ph:brain",class:"brain-icon"}),s[10]||(s[10]=d("div",{class:"logo-glow"},null,-1))]),s[11]||(s[11]=d("h1",{class:"brand-title-main"},"SDKWork AI",-1)),s[12]||(s[12]=d("p",{class:"brand-subtitle-main"},"智能物联网平台",-1))]),d("div",F,[(t(),c(u,null,m(de,e=>d("div",{class:"feature-item",key:e},[g(h(V),{icon:"ph:check-circle",class:"feature-icon"}),d("span",null,v(e),1)])),64))])])]),d("div",I,[d("div",A,[s[20]||(s[20]=d("div",{class:"form-header"},[d("h2",{class:"form-title"},"创建账户"),d("p",{class:"form-subtitle"},"加入AIoT智能平台")],-1)),g(h(U),{ref_key:"registerFormRef",ref:te,model:ce,rules:ue,onSubmit:ve,class:"modern-register-form"},{default:f(()=>[d("div",L,[d("div",E,[g(h(V),{icon:"ph:user",class:"input-icon-svg"})]),g(h(j),{modelValue:ce.username,"onUpdate:modelValue":s[0]||(s[0]=e=>ce.username=e),name:"username",placeholder:"用户名",rules:ue.username,border:!1,class:"modern-input"},null,8,["modelValue","rules"])]),d("div",O,[d("div",T,[g(h(V),{icon:"ph:envelope",class:"input-icon-svg"})]),g(h(j),{modelValue:ce.email,"onUpdate:modelValue":s[1]||(s[1]=e=>ce.email=e),name:"email",placeholder:"邮箱地址",rules:ue.email,border:!1,class:"modern-input"},null,8,["modelValue","rules"])]),d("div",Z,[d("div",K,[g(h(V),{icon:"ph:phone",class:"input-icon-svg"})]),g(h(j),{modelValue:ce.phone,"onUpdate:modelValue":s[2]||(s[2]=e=>ce.phone=e),name:"phone",placeholder:"手机号（可选）",rules:ue.phone,border:!1,class:"modern-input"},null,8,["modelValue","rules"])]),d("div",N,[d("div",Q,[g(h(V),{icon:"ph:lock",class:"input-icon-svg"})]),g(h(j),{modelValue:ce.password,"onUpdate:modelValue":s[4]||(s[4]=e=>ce.password=e),name:"password",type:ne.value?"text":"password",placeholder:"密码",rules:ue.password,border:!1,class:"modern-input"},{button:f(()=>[d("div",{class:"password-toggle",onClick:s[3]||(s[3]=e=>ne.value=!ne.value)},[g(h(V),{icon:ne.value?"ph:eye-slash":"ph:eye",class:"toggle-icon"},null,8,["icon"])])]),_:1},8,["modelValue","type","rules"])]),d("div",W,[d("div",X,[g(h(V),{icon:"ph:lock-key",class:"input-icon-svg"})]),g(h(j),{modelValue:ce.confirmPassword,"onUpdate:modelValue":s[6]||(s[6]=e=>ce.confirmPassword=e),name:"confirmPassword",type:ie.value?"text":"password",placeholder:"确认密码",rules:ue.confirmPassword,border:!1,class:"modern-input"},{button:f(()=>[d("div",{class:"password-toggle",onClick:s[5]||(s[5]=e=>ie.value=!ie.value)},[g(h(V),{icon:ie.value?"ph:eye-slash":"ph:eye",class:"toggle-icon"},null,8,["icon"])])]),_:1},8,["modelValue","type","rules"])]),d("div",Y,[g(h(P),{modelValue:ce.agreed,"onUpdate:modelValue":s[7]||(s[7]=e=>ce.agreed=e),shape:"square",class:"modern-checkbox",rules:ue.agreed},{default:f(()=>[d("span",G,[s[15]||(s[15]=w(" 我已阅读并同意 ",-1)),g(h(x),{type:"default",size:"mini",link:"",class:"agreement-link"},{default:f(()=>[...s[13]||(s[13]=[w(" 《用户协议》 ",-1)])]),_:1}),s[16]||(s[16]=w(" 和 ",-1)),g(h(x),{type:"default",size:"mini",link:"",class:"agreement-link"},{default:f(()=>[...s[14]||(s[14]=[w(" 《隐私政策》 ",-1)])]),_:1})])]),_:1},8,["modelValue","rules"])]),d("div",H,[g(h(x),{round:"",block:"",type:"primary","native-type":"submit",loading:oe.value,disabled:!me.value,"loading-text":"注册中...",class:"modern-register-button"},{loading:f(()=>[g(h(_),{type:"spinner",size:"20px"})]),default:f(()=>[d("span",J,[g(h(V),{icon:"ph:user-plus",class:"button-icon"}),s[17]||(s[17]=d("span",null,"创建账户",-1))])]),_:1},8,["loading","disabled"])])]),_:1},8,["model"]),d("div",ee,[s[19]||(s[19]=d("p",{class:"login-text"},"已有账户？",-1)),g(h(x),{type:"default",size:"large",onClick:fe,class:"login-button"},{default:f(()=>[g(h(V),{icon:"ph:sign-in",class:"login-icon"}),s[18]||(s[18]=d("span",null,"立即登录",-1))]),_:1})])])])])],2))}}),[["__scopeId","data-v-72ac58f0"]]),se=M(a({__name:"register",setup(a){const r=s(),o=e=>{console.log("注册成功:",e),r.push("/auth/login")},l=e=>{console.error("注册失败:",e)},n=()=>{r.push("/auth/login")};return(a,s)=>{const r=e;return t(),k(r,{"safe-area":"",scrollable:"","theme-mode":"auto"},{default:f(()=>[g(ae,{onRegisterSuccess:o,onRegisterFailed:l,onLoginClick:n})]),_:1})}}}),[["__scopeId","data-v-884cceb8"]]);export{se as default};
