import{I as e,B as t,f as i,_ as a,L as o}from"./index-B1-5rbib.js";import{E as n}from"./index-CevbuvHv.js";import{S as s}from"./sdkwork-api-list-BorttlY2.js";/* empty css              */import{T as l}from"./index-BdqsRJZP.js";/* empty css              *//* empty css              */import{k as d,f as r,r as c,P as m,Q as p,R as f,W as u,S as g,j as w,a1 as k,Z as S,$ as y,a0 as h,a4 as b,U as v}from"./vue-vendor-Caw1HGjZ.js";import{C as D}from"./index-Calp5sij.js";import{S as _}from"./sdkwork-page-container-Dw00WBIq.js";import{b as I}from"./route-block-B_A1xBdJ.js";import"./utils-vendor-WEzSe-CR.js";import"./use-id-BN10QhF_.js";import"./shared-BDqR659F.js";import"./sdkwork-search-bar-BxS_Iet-.js";import"./sdkwork-icon-I4xLV4ZY.js";import"./ListItem-BkCRYS9v.js";import"./Checker-DqQoXXBp.js";const j={key:0,class:"sdkwork-notification-item__selection"},O={class:"sdkwork-notification-item__icon"},x={key:0,class:"unread-indicator"},B={class:"sdkwork-notification-item__content"},A={class:"notification-header"},z={class:"notification-title"},M={class:"title-text"},C={class:"notification-time"},T={class:"notification-preview"},$={class:"notification-content"},L={key:0,class:"notification-actions"},N={key:1,class:"sdkwork-notification-item__actions"},R=a(d({__name:"sdkwork-notification-item",props:{notification:{},selectable:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1},showBorderBottom:{type:Boolean,default:!0},themeMode:{default:"auto"}},emits:["select","delete","read","action","click"],setup(a,{expose:o,emit:n}){const s=a,d=n,v=r(()=>"dark"===s.themeMode||"light"!==s.themeMode&&(!("undefined"==typeof window||!window.matchMedia)&&window.matchMedia("(prefers-color-scheme: dark)").matches)),_=r(()=>v.value?"sdkwork-notification-item--dark":"sdkwork-notification-item--light"),I=c(s.isSelected);r({get:()=>I.value,set:e=>{I.value=e,d("select",s.notification)}});const R=()=>{s.disabled||("unread"===s.notification.status&&d("read",s.notification),d("click",s.notification))},F=async()=>{if(!s.disabled)try{await i({title:"确认删除",message:`确定要删除通知"${s.notification.title}"吗？`}),d("delete",s.notification)}catch(e){}},P=()=>{s.disabled||d("action",s.notification)},E=e=>{const t=new Date(e),i=(new Date).getTime()-t.getTime(),a=Math.floor(i/6e4),o=Math.floor(i/36e5),n=Math.floor(i/864e5);return a<1?"刚刚":a<60?`${a}分钟前`:o<24?`${o}小时前`:1===n?"昨天":n<7?`${n}天前`:t.toLocaleDateString("zh-CN",{month:"2-digit",day:"2-digit"})},U=(e,t=50)=>e.length<=t?e:e.substring(0,t)+"...";return o({getTitle:()=>s.notification.title,getStatus:()=>s.notification.status,isUnread:()=>"unread"===s.notification.status,formatTime:E,truncateContent:U}),(i,o)=>{const n=D,s=e,d=l,r=t;return p(),m("div",{class:f(["sdkwork-notification-item",[{"sdkwork-notification-item--selected":a.isSelected,"sdkwork-notification-item--unread":"unread"===a.notification.status,"sdkwork-notification-item--disabled":a.disabled,"sdkwork-notification-item--border-bottom":a.showBorderBottom},_.value]]),onClick:R},[a.selectable?(p(),m("div",j,[w(n,{modelValue:I.value,"onUpdate:modelValue":o[0]||(o[0]=e=>I.value=e),onClick:o[1]||(o[1]=k(()=>{},["stop"]))},null,8,["modelValue"])])):u("",!0),g("div",O,[g("div",{class:f(["notification-icon",`notification-icon--${a.notification.type}`])},[w(s,{name:(c=a.notification.type,{info:"info-o",success:"success",warning:"warning-o",error:"cross",system:"bell-o"}[c]||"info-o")},null,8,["name"])],2),"unread"===a.notification.status?(p(),m("div",x)):u("",!0)]),g("div",B,[g("div",A,[g("div",z,[g("span",M,y(a.notification.title),1),"high"===a.notification.priority?(p(),S(d,{key:0,type:"danger",class:"priority-tag"},{default:h(()=>[...o[2]||(o[2]=[b(" 重要 ",-1)])]),_:1})):"medium"===a.notification.priority?(p(),S(d,{key:1,type:"warning",class:"priority-tag"},{default:h(()=>[...o[3]||(o[3]=[b(" 中等 ",-1)])]),_:1})):u("",!0)]),g("div",C,y(E(a.notification.timestamp)),1)]),g("div",T,[g("div",$,y(U(a.notification.content)),1)]),a.notification.actionText?(p(),m("div",L,[w(r,{type:"primary",plain:"",onClick:k(P,["stop"]),class:"action-button"},{default:h(()=>[b(y(a.notification.actionText),1)]),_:1})])):u("",!0)]),a.deletable?(p(),m("div",N,[w(r,{size:"small",type:"danger",plain:"",onClick:k(F,["stop"]),class:"delete-button"},{default:h(()=>[...o[4]||(o[4]=[b(" 删除 ",-1)])]),_:1})])):u("",!0)],2);var c}}}),[["__scopeId","data-v-1f14803a"]]),F={class:"sdkwork-notification-list"},P=a(d({__name:"sdkwork-notification-list",props:{api:{},params:{default:()=>({})},selectable:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},pageSize:{default:10},itemKey:{default:"id"},itemTitleField:{default:"title"},itemDescriptionField:{default:"content"}},emits:{select:e=>!0,delete:e=>!0,read:e=>!0,action:e=>!0,search:e=>!0,load:e=>!0,click:e=>!0},setup(e,{expose:t,emit:i}){const a=e,l=i,d=c(),f=r(()=>({pageNumber:0,pageSize:a.pageSize,filters:a.params})),u=e=>{l("select",e)},k=e=>{l("delete",e)},S=e=>{l("search",e)},y=e=>{l("load",e)},D=e=>{l("select",e)},_=e=>{l("delete",e)},I=e=>{l("read",e)},j=e=>{l("action",e)},O=e=>{l("click",e)};return t({refresh:()=>d.value?.refresh(),loadMore:()=>d.value?.loadMore(),getData:()=>d.value?.getData()||[],getSelectedItems:()=>d.value?.getSelectedItems()||[],clearSelected:()=>d.value?.clearSelected(),setSelectedItems:e=>d.value?.setSelectedItems(e)}),(t,i)=>{const a=n,l=o;return p(),m("div",F,[w(s,{api:e.api,params:f.value,selectable:e.selectable,deletable:e.deletable,searchable:e.searchable,"page-size":e.pageSize,"item-key":e.itemKey,"item-title-field":e.itemTitleField,"item-description-field":e.itemDescriptionField,onSelect:u,onDelete:k,onSearch:S,onLoad:y,ref_key:"apiListRef",ref:d,"left-spacing":"0","right-spacing":"0"},{default:h(({item:t,index:i,selected:a})=>[w(R,{notification:t,selectable:e.selectable,deletable:e.deletable,"is-selected":a,"show-border-bottom":!0,onSelect:D,onDelete:_,onRead:I,onAction:j,onClick:O},null,8,["notification","selectable","deletable","is-selected"])]),empty:h(()=>[v(t.$slots,"empty",{},()=>[w(a,{description:"暂无通知消息",image:"search"},{description:h(()=>[...i[0]||(i[0]=[g("div",{class:"empty-description"},[g("p",null,"暂时没有通知消息"),g("p",{class:"empty-tip"},"您已查看所有通知")],-1)])]),_:1})],!0)]),loading:h(()=>[v(t.$slots,"loading",{},()=>[w(l,{size:"24px",vertical:""},{default:h(()=>[...i[1]||(i[1]=[b("加载通知数据...",-1)])]),_:1})],!0)]),header:h(()=>[v(t.$slots,"header",{},void 0,!0)]),footer:h(()=>[v(t.$slots,"footer",{},void 0,!0)]),_:3},8,["api","params","selectable","deletable","searchable","page-size","item-key","item-title-field","item-description-field"])])}}}),[["__scopeId","data-v-5301462d"]]),E=d({__name:"notifications",setup(e){const t=c(),i=async e=>{await new Promise(e=>setTimeout(e,500));const t=[{id:"1",title:"系统通知",content:"您的账户已成功创建，欢迎使用我们的服务",type:"info",status:"unread",timestamp:(new Date).toISOString(),createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),priority:"medium"},{id:"2",title:"订单状态更新",content:"您的订单 #12345 已发货，预计明天送达",type:"success",status:"read",timestamp:new Date(Date.now()-36e5).toISOString(),createdAt:new Date(Date.now()-36e5).toISOString(),updatedAt:new Date(Date.now()-36e5).toISOString(),priority:"high"},{id:"3",title:"安全提醒",content:"检测到异常登录活动，请及时检查账户安全",type:"warning",status:"unread",timestamp:new Date(Date.now()-72e5).toISOString(),createdAt:new Date(Date.now()-72e5).toISOString(),updatedAt:new Date(Date.now()-72e5).toISOString(),priority:"high"},{id:"4",title:"版本更新",content:"新版本 v2.1.0 已发布，包含多项功能优化",type:"info",status:"read",timestamp:new Date(Date.now()-864e5).toISOString(),createdAt:new Date(Date.now()-864e5).toISOString(),updatedAt:new Date(Date.now()-864e5).toISOString(),priority:"low"},{id:"5",title:"支付成功",content:"您的支付已成功处理，金额：¥199.00",type:"success",status:"read",timestamp:new Date(Date.now()-1728e5).toISOString(),createdAt:new Date(Date.now()-1728e5).toISOString(),updatedAt:new Date(Date.now()-1728e5).toISOString(),priority:"medium"}],i=e.pageNumber||0,a=e.pageSize||10,o=i*a,n=o+a,s=t.slice(o,n);return{content:s,totalElements:t.length,totalPages:Math.ceil(t.length/a),pageSize:a,pageNumber:i,first:0===i,last:n>=t.length,numberOfElements:s.length,empty:0===s.length}},a=e=>{},o=e=>{},n=e=>{},s=e=>{},l=e=>{},d=e=>{},r=e=>{};return(e,c)=>(p(),S(_,{"safe-area":"",scrollable:"","theme-mode":"auto"},{default:h(()=>[w(P,{api:i,searchable:!1,deletable:!0,onSelect:a,onDelete:o,onRead:n,onAction:s,onClick:l,onSearch:d,onLoad:r,ref_key:"notificationListRef",ref:t},null,512)]),_:1}))}});"function"==typeof I&&I(E);const U=a(E,[["__scopeId","data-v-f73ac86e"]]);export{U as default};
