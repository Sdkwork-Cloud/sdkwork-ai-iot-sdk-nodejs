import{m as e,M as t,o as a,s,_ as l,f as i,I as o,L as r,B as c,aP as u}from"./index-34815b62.js";import{D as d,a as n}from"./index-e6b500be.js";/* empty css              */import{_ as m}from"./sdkwork-search-bar-d9125bb7.js";/* empty css              */import{S as p}from"./sdkwork-api-list-7d9e01ff.js";import{k as h,r as v,c as g,Q as w,R as y,S as f,$ as x,U as b,X as k,a1 as S,w as B,Z as M,a0 as j,j as z,W as C,a4 as _,u as L,b as I,n as A}from"./vue-vendor-905d75e5.js";import"./utils-vendor-b5712723.js";import"./index-a966f53b.js";import"./use-id-350fcd7b.js";import"./sdkwork-icon-79456167.js";import"./index-8ec85bf4.js";import"./index-7b99c785.js";import"./use-tab-status-c1e0ad5e.js";import"./shared-f3996f0d.js";import"./index-3ae7521b.js";import"./ListItem-b2f4f4bf.js";class H extends e.BaseService{constructor(){super(t.create(a.MusicManager))}}const $=["data-theme"],T={key:0,class:"music-index"},D={class:"index-number"},V={key:0,class:"playing-indicator"},P={class:"music-cover"},K=["src","alt"],F={key:0,class:"music-duration"},U={class:"music-info"},q={class:"music-main-info"},E=["title"],N={key:0,class:"music-artist"},R={key:0,class:"music-album"},G={key:1,class:"music-tags"},O={key:0,class:"music-tag"},Q={key:1,class:"music-tag quality-tag"},Z={class:"music-actions"},J={key:0,class:"music-time"},W={class:"action-buttons"},X=l(h({__name:"MusicListItem",props:{music:{},index:{default:0},selected:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},showIndex:{type:Boolean,default:!1},themeMode:{default:"auto"},showBorderBottom:{type:Boolean,default:!1}},emits:["click","like","more"],setup(e,{emit:t}){const a=e,l=t,i=v(!1),o=g(()=>{if(!window.$music)return!1;try{const e=window.$music.getState();return e.currentTrack?.id===a.music.id&&e.isPlaying}catch(e){return console.warn("è·å–æ’­æ”¾çŠ¶æ€å¤±è´¥:",e),!1}}),r=e=>{if(!e)return"00:00";const t=Math.floor(e/60),a=Math.floor(e%60);return`${t.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`},c=()=>{l("click",a.music)},u=()=>{i.value=!i.value,l("like",a.music),s(i.value?"å·²æ·»åŠ åˆ°å–œæ¬¢":"å·²å–æ¶ˆå–œæ¬¢")},d=()=>{l("more",a.music)};return(t,s)=>(w(),y("div",{class:k(["music-list-item",{"music-item-selected":e.selected,"music-item-playing":o.value,"no-border":!a.showBorderBottom}]),"data-theme":a.themeMode,onClick:c},[e.showIndex?(w(),y("div",T,[f("span",D,x(e.index+1),1),o.value?(w(),y("div",V,[...s[0]||(s[0]=[f("div",{class:"wave-bar"},null,-1),f("div",{class:"wave-bar"},null,-1),f("div",{class:"wave-bar"},null,-1)])])):b("",!0)])):b("",!0),f("div",P,[f("img",{src:e.music.cover||e.music.thumbnailUrl||"/images/music-placeholder.jpg",alt:e.music.title,class:"cover-image",loading:"lazy"},null,8,K),e.music.duration?(w(),y("div",F,x(r(e.music.duration)),1)):b("",!0)]),f("div",U,[f("div",q,[f("h3",{class:"music-title",title:e.music.title},x(e.music.title||"æœªå‘½åéŸ³ä¹"),9,E),e.music.artist?(w(),y("p",N,x(e.music.artist),1)):b("",!0)]),e.music.album?(w(),y("p",R,x(e.music.album),1)):b("",!0),e.music.genre||e.music.quality?(w(),y("div",G,[e.music.genre?(w(),y("span",O,x(e.music.genre),1)):b("",!0),e.music.quality?(w(),y("span",Q,x(e.music.quality),1)):b("",!0)])):b("",!0)]),f("div",Z,[e.music.duration?(w(),y("div",J,x(r(e.music.duration)),1)):b("",!0),f("div",W,[f("button",{class:k(["action-btn like-btn",{liked:i.value}]),onClick:S(u,["stop"])},[...s[1]||(s[1]=[f("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor"},[f("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)])],2),f("button",{class:"action-btn more-btn",onClick:S(d,["stop"])},[...s[2]||(s[2]=[f("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor"},[f("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})],-1)])])])])],10,$))}}),[["__scopeId","data-v-a652aaeb"]]),Y={class:"empty-music"},ee={class:"loading-music"},te={key:0,class:"list-footer"},ae=l(h({__name:"sdkwork-music-list",props:{api:{},params:{},selectable:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},pageSize:{default:10},itemKey:{default:"id"},itemTitleField:{default:"title"},itemDescriptionField:{default:"description"},autoLoad:{type:Boolean,default:!0},defaultKeyword:{default:""},themeMode:{default:"auto"},showBorderBottom:{type:Boolean,default:!1}},emits:["select","delete","search","load","click","batch-action","refresh"],setup(e,{expose:t,emit:a}){const l=e,u=a,d=v(),n=new H,m=v({keyword:l.defaultKeyword,...l.params}),h=v(0),k=v(0),S=v(0),I=v(0),A=v([]);g(()=>A.value.filter(e=>"PROCESSING"===e.status).length);const $=l.api?l.api:async e=>{try{const{keyword:t,...a}=m.value,s={keyword:t||"",...a};return await n.listByPage(s,e)}catch(t){throw console.error("è·å–éŸ³ä¹åˆ—è¡¨å¤±è´¥:",t),t}},T=e=>{u("select",e),U()},D=async e=>{try{await i({title:"ç¡®è®¤åˆ é™¤",message:`ç¡®å®šè¦åˆ é™¤éŸ³ä¹"${e.title}"å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚`}),l.api?(u("delete",e),s("åˆ é™¤è¯·æ±‚å·²å‘é€")):(await n.delete(e.id),u("delete",e),s("éŸ³ä¹åˆ é™¤æˆåŠŸ"),d.value?.refresh())}catch(t){console.log("å–æ¶ˆåˆ é™¤æˆ–åˆ é™¤å¤±è´¥")}},V=e=>{u("click",e)},P=e=>{m.value.keyword=e,u("search",e)},K=e=>{h.value=e.total||0,S.value=e.pageable.pageNumber||0,I.value=e.total/(e.pageable.pageSize||10)||0,u("load",e)},F=()=>{0!==A.value.length&&u("batch-action",A.value)},U=()=>{const e=d.value?.getSelectedItems()||[];A.value=e,k.value=e.length};return B(()=>l.params,e=>{m.value={...m.value,...e}},{deep:!0}),B(()=>l.defaultKeyword,e=>{m.value.keyword=e}),t({refresh:()=>d.value?.refresh(),loadMore:()=>d.value?.loadMore(),getData:()=>d.value?.getData()||[],getSelectedItems:()=>d.value?.getSelectedItems()||[],clearSelected:()=>{d.value?.clearSelected(),A.value=[],k.value=0},setSelectedItems:e=>{d.value?.setSelectedItems(e),A.value=e,k.value=e.length},setKeyword:e=>{m.value.keyword=e,d.value?.refresh()},getService:()=>n,search:e=>{P(e)}}),(t,a)=>{const s=o,l=r,i=c;return w(),M(p,{api:L($),params:m.value,selectable:e.selectable,deletable:e.deletable,searchable:e.searchable,"page-size":e.pageSize,"item-key":e.itemKey,"item-title-field":e.itemTitleField,"item-description-field":e.itemDescriptionField,"theme-mode":e.themeMode,"show-border-bottom":e.showBorderBottom,onSelect:T,onDelete:D,onSearch:P,onLoad:K},{default:j(({item:t,index:a,selected:s})=>[z(X,{music:t,index:a,selected:s,selectable:e.selectable,deletable:e.deletable,"show-index":!1,onClick:V},null,8,["music","index","selected","selectable","deletable"])]),empty:j(()=>[f("div",Y,[z(s,{name:"music-o",size:"48"}),a[0]||(a[0]=f("p",null,"æš‚æ— éŸ³ä¹",-1))])]),loading:j(()=>[f("div",ee,[z(l,{size:"24px"}),a[1]||(a[1]=f("span",null,"åŠ è½½éŸ³ä¹ä¸­...",-1))])]),header:j(()=>[C(t.$slots,"header",{},void 0,!0)]),footer:j(()=>[k.value>0?(w(),y("div",te,[z(i,{type:"primary",block:"",onClick:F},{default:j(()=>[_(" æ‰¹é‡æ“ä½œ ("+x(k.value)+") ",1)]),_:1})])):b("",!0)]),_:3},8,["api","params","selectable","deletable","searchable","page-size","item-key","item-title-field","item-description-field","theme-mode","show-border-bottom"])}}}),[["__scopeId","data-v-d7545dd3"]]),se={class:"music-list-page dark-mode"},le={class:"filter-section"},ie={class:"search-container"},oe={class:"filter-controls"},re={class:"music-list-container"},ce={class:"empty-state"},ue=l(h({__name:"list",setup(e){const t=v(),a=v(""),l=v("latest"),i=v("all"),r=v(null),c=v([]),p=[{text:"æœ€æ–°",value:"latest"},{text:"çƒ­é—¨",value:"popular"},{text:"æ ‡é¢˜",value:"title"},{text:"æ—¶é•¿",value:"duration"}],h=[{text:"å…¨éƒ¨",value:"all"},{text:"æµè¡Œ",value:"pop"},{text:"æ‘‡æ»š",value:"rock"},{text:"å¤å…¸",value:"classical"},{text:"ç”µå­",value:"electronic"},{text:"çˆµå£«",value:"jazz"},{text:"æ°‘è°£",value:"folk"}],g=[{id:1,title:"æœˆå…‰å¥é¸£æ›²",artist:"è´å¤šèŠ¬",genre:"classical",duration:360,src:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",cover:"https://picsum.photos/300/300?random=1",description:"è´å¤šèŠ¬ç»å…¸é’¢ç´å¥é¸£æ›²",popularity:95,createdAt:"2024-01-15"},{id:2,title:"è“è‰²å¤šç‘™æ²³",artist:"å°çº¦ç¿°Â·æ–½ç‰¹åŠ³æ–¯",genre:"classical",duration:420,src:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3",cover:"https://picsum.photos/300/300?random=2",description:"åœ†èˆæ›²ä¹‹ç‹çš„ç»å…¸ä½œå“",popularity:92,createdAt:"2024-01-14"},{id:3,title:"å¡å†œ",artist:"å¸•èµ«è´å°”",genre:"classical",duration:300,src:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3",cover:"https://picsum.photos/300/300?random=3",description:"æ°¸æ’çš„ç»å…¸å¡å†œå˜å¥æ›²",popularity:98,createdAt:"2024-01-13"},{id:4,title:"è‡´çˆ±ä¸½ä¸",artist:"è´å¤šèŠ¬",genre:"classical",duration:180,src:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3",cover:"https://picsum.photos/300/300?random=4",description:"è´å¤šèŠ¬è‘—åçš„é’¢ç´å°å“",popularity:90,createdAt:"2024-01-12"},{id:5,title:"å››å­£Â·æ˜¥",artist:"ç»´ç“¦å°”ç¬¬",genre:"classical",duration:240,src:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3",cover:"https://picsum.photos/300/300?random=5",description:"å·´æ´›å…‹æ—¶æœŸçš„ç»å…¸åå¥æ›²",popularity:88,createdAt:"2024-01-11"},{id:6,title:"Shape of You",artist:"Ed Sheeran",genre:"pop",duration:233,src:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3",cover:"https://picsum.photos/300/300?random=6",description:"æµè¡Œé‡‘æ›²",popularity:96,createdAt:"2024-01-10"},{id:7,title:"Bohemian Rhapsody",artist:"Queen",genre:"rock",duration:354,src:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-7.mp3",cover:"https://picsum.photos/300/300?random=7",description:"æ‘‡æ»šç»å…¸",popularity:99,createdAt:"2024-01-09"},{id:8,title:"Take Five",artist:"Dave Brubeck",genre:"jazz",duration:324,src:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3",cover:"https://picsum.photos/300/300?random=8",description:"çˆµå£«åæ›²",popularity:85,createdAt:"2024-01-08"},{id:9,title:"Stairway to Heaven",artist:"Led Zeppelin",genre:"rock",duration:482,src:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-9.mp3",cover:"https://picsum.photos/300/300?random=9",description:"æ‘‡æ»šå²è¯—",popularity:97,createdAt:"2024-01-07"},{id:10,title:"Hotel California",artist:"Eagles",genre:"rock",duration:391,src:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-10.mp3",cover:"https://picsum.photos/300/300?random=10",description:"ç»å…¸æ‘‡æ»š",popularity:94,createdAt:"2024-01-06"}],x=async e=>{try{await new Promise(e=>setTimeout(e,500));let t=[...g];if(a.value){const e=a.value.toLowerCase();t=t.filter(t=>t.title.toLowerCase().includes(e)||t.artist.toLowerCase().includes(e)||t.description.toLowerCase().includes(e))}switch("all"!==i.value&&(t=t.filter(e=>e.genre===i.value)),l.value){case"latest":t.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime());break;case"popular":t.sort((e,t)=>t.popularity-e.popularity);break;case"title":t.sort((e,t)=>e.title.localeCompare(t.title));break;case"duration":t.sort((e,t)=>e.duration-t.duration)}const{pageNumber:s=0,pageSize:o=20}=e,r=s*o,u=r+o,d=t.slice(r,u);return c.value=t,{content:d,totalElements:t.length,totalPages:Math.ceil(t.length/o),pageSize:o,number:s,first:0===s,last:u>=t.length,empty:0===t.length}}catch(t){throw console.error("è·å–éŸ³ä¹åˆ—è¡¨å¤±è´¥:",t),t}},b=()=>{t.value&&t.value.refresh()},k=()=>{a.value="",b()},S=()=>{b()},M=()=>{b()},C=async e=>{await A(),console.log("ğŸµ [MusicList] handleMusicSelectè°ƒç”¨:",e.title);try{console.log("ğŸµ [MusicList] è°ƒç”¨musicPlayerManager.play");const t=u.getState();console.log("ğŸµ [MusicList] å½“å‰æ’­æ”¾çŠ¶æ€:",t),u.play(e,c.value),console.log("ğŸµ [MusicList] musicPlayerManager.playè°ƒç”¨å®Œæˆ"),r.value=e,s(`å¼€å§‹æ’­æ”¾: ${e.title}`)}catch(t){console.error("ğŸµ [MusicList] æ’­æ”¾å¤±è´¥:",t),s(`æ’­æ”¾å¤±è´¥: ${t}`)}},_=e=>{console.log("ç‚¹å‡»éŸ³ä¹:",e.title)},L=e=>{console.log("éŸ³ä¹åˆ—è¡¨åŠ è½½å®Œæˆ:",e.content.length,"é¦–éŸ³ä¹")};return B(a,(e,t)=>{e!==t&&(clearTimeout(window.searchTimeout),window.searchTimeout=setTimeout(()=>{b()},300))}),I(()=>{c.value=g,window.$music||(window.$music=u)}),(e,s)=>{const r=m,c=d,u=n,v=o;return w(),y("div",se,[f("div",le,[f("div",ie,[z(r,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=e=>a.value=e),placeholder:"æœç´¢éŸ³ä¹ã€æ­Œæ‰‹æˆ–ä¸“è¾‘",shape:"round",background:"transparent",onSearch:b,onClear:k},null,8,["modelValue"])]),f("div",oe,[z(u,{"active-color":"#3b82f6"},{default:j(()=>[z(c,{modelValue:l.value,"onUpdate:modelValue":s[1]||(s[1]=e=>l.value=e),options:p,onChange:S},null,8,["modelValue"]),z(c,{modelValue:i.value,"onUpdate:modelValue":s[2]||(s[2]=e=>i.value=e),options:h,onChange:M},null,8,["modelValue"])]),_:1})])]),f("div",re,[z(ae,{ref_key:"musicListRef",ref:t,api:x,selectable:!1,searchable:!1,deletable:!1,"page-size":20,"auto-load":!0,"default-keyword":a.value,onSelect:C,onLoad:L,onClick:_},{empty:j(()=>[f("div",ce,[z(v,{name:"music-o",size:"48"}),s[3]||(s[3]=f("p",{class:"empty-title"},"æš‚æ— éŸ³ä¹",-1)),s[4]||(s[4]=f("p",{class:"empty-description"},"å°è¯•è°ƒæ•´æœç´¢æ¡ä»¶",-1))])]),_:1},8,["default-keyword"])])])}}}),[["__scopeId","data-v-642651fd"]]);export{ue as default};
