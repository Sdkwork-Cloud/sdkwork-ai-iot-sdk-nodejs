import{S as e}from"./sdkwork-page-container-ebfa2fb2.js";import{_ as l,a}from"./sdkwork-collapse-item-4f5db70a.js";import{k as s,r as t,c as o,o as i,Q as n,R as u,S as r,$ as d,j as c,a0 as p,a4 as v,Z as m,U as k,O as h}from"./vue-vendor-905d75e5.js";import{s as f,B as y,I as g,aM as j,L as b,_ as w}from"./index-34815b62.js";import{a as _,_ as x}from"./sdkwork-cell-group-f9040361.js";import{E as A}from"./index-3ae7521b.js";import{T as V}from"./index-a1fe09a6.js";/* empty css              *//* empty css              *//* empty css              */import{S as B}from"./sdkwork-voice-speaker-category-list-popup-26672839.js";import{F as U}from"./index-d9bf0347.js";import"./index-a966f53b.js";import"./utils-vendor-b5712723.js";import"./sdkwork-icon-79456167.js";import"./use-id-350fcd7b.js";import"./sdkwork-popup-2839b588.js";import"./sdkwork-pull-refresh-bd126f9c.js";import"./index-8ec85bf4.js";import"./shared-f3996f0d.js";import"./sdkwork-search-bar-d9125bb7.js";import"./ListItem-b2f4f4bf.js";import"./LoadingSection-50beb699.js";import"./LoadMoreSection-8eb45153.js";import"./sdkwork-voice-clone-f3949dc2.js";import"./index-89cf3eae.js";/* empty css              */import"./index-0b87abd1.js";import"./index-8c878aea.js";const F={class:"sdkwork-text-to-speech"},M={class:"tts-container"},C={class:"input-section"},L={class:"section-header"},S={class:"text-counter"},E={class:"speaker-section"},z={class:"section-header"},Q={key:0,class:"selected-speaker"},D={class:"speaker-info"},G={class:"speaker-details"},R={class:"speaker-name"},I={class:"speaker-meta"},T={key:1,class:"no-speaker"},H={class:"settings-section"},J={class:"slider-value"},N={class:"slider-value"},P={class:"slider-value"},Z={class:"action-section"},O={key:0,class:"playback-section"},q={class:"section-header"},X={class:"audio-player"},$=["src"],K={class:"playback-info"},Y={class:"info-item"},W={class:"info-value"},ee={class:"info-item"},le={class:"info-value"},ae=w(s({__name:"sdkwork-text-to-speech",emits:["synthesis-complete","synthesis-error","speaker-selected","playback-started","playback-stopped"],setup(e,{emit:l}){const a=l,s=t(""),h=t(1e3),w=t(null),ae=t(!1),se=t(1),te=t(80),oe=t(0),ie=t(!1),ne=t(!1),ue=t(""),re=t(0),de=t(0),ce=t(null),pe=o(()=>s.value.trim().length>0&&null!==w.value),ve=e=>{w.value=e,ae.value=!1,f(`已选择发音人: ${e.name}`),a("speaker-selected",e)},me=async()=>{if(w.value)try{const e="欢迎使用语音合成服务，这是发音人试听效果。";await he(e,!0)}catch(e){console.error("试听失败:",e),f("试听失败，请重试")}else f("请先选择发音人")},ke=async()=>{if(pe.value)try{await he(s.value,!1)}catch(e){console.error("合成失败:",e),f("合成失败，请重试")}else f("请输入文本并选择发音人")},he=async(e,l=!1)=>{ie.value=!0;try{const s=Date.now();await new Promise(e=>setTimeout(e,2e3));const t="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LMeSw=",o=Math.floor(5e4*Math.random())+1e4;if(ue.value=t,re.value=o,de.value=Date.now()-s,l)f("试听播放中...");else{f("合成完成，开始播放");const l={audioUrl:t,audioSize:o,synthesisTime:de.value,text:e,speaker:w.value,settings:{speed:se.value,volume:te.value,pitch:oe.value}};a("synthesis-complete",l)}setTimeout(()=>{ce.value&&ce.value.play()},100)}catch(s){throw a("synthesis-error",s),s}finally{ie.value=!1}},fe=()=>{ce.value&&(ce.value.pause(),ce.value.currentTime=0),ne.value=!1},ye=()=>{ne.value=!0},ge=()=>{ne.value=!1},je=()=>{ne.value=!1},be=()=>{if(ue.value)try{const e=document.createElement("a");e.href=ue.value,e.download=`语音合成_${Date.now()}.wav`,e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),f("音频文件下载成功")}catch(e){console.error("下载失败:",e),f("下载失败，请重试")}else f("没有可下载的音频文件")},we=e=>{if(0===e)return"0 B";const l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(2))+" "+["B","KB","MB","GB"][l]};return i(()=>{fe(),ue.value.startsWith("blob:")&&URL.revokeObjectURL(ue.value)}),(e,l)=>{const a=U,t=y,o=g,i=V,f=A,he=j,_e=_,xe=x,Ae=b;return n(),u("div",F,[r("div",M,[r("div",C,[r("div",L,[l[8]||(l[8]=r("h3",{class:"section-title"},"文本输入",-1)),r("div",S,d(s.value.length)+"/"+d(h.value),1)]),c(a,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),type:"textarea",rows:"4",placeholder:"请输入要合成的文本内容...",maxlength:h.value,"show-word-limit":"",class:"text-input"},null,8,["modelValue","maxlength"])]),r("div",E,[r("div",z,[l[10]||(l[10]=r("h3",{class:"section-title"},"发音人选择",-1)),c(t,{type:"primary",size:"small",onClick:l[1]||(l[1]=e=>ae.value=!0),class:"select-btn"},{default:p(()=>[...l[9]||(l[9]=[v(" 选择发音人 ",-1)])]),_:1})]),w.value?(n(),u("div",Q,[r("div",D,[c(o,{name:"music",class:"speaker-icon"}),r("div",G,[r("div",R,d(w.value.name),1),r("div",I,[w.value.gender?(n(),m(i,{key:0},{default:p(()=>[v(d("female"===w.value.gender?"女声":"男声"),1)]),_:1})):k("",!0),w.value.language?(n(),m(i,{key:1},{default:p(()=>[v(d(w.value.language),1)]),_:1})):k("",!0)])])]),c(t,{type:"default",size:"small",onClick:me,class:"preview-btn"},{default:p(()=>[...l[11]||(l[11]=[v(" 试听 ",-1)])]),_:1})])):(n(),u("div",T,[c(f,{description:"请选择发音人",image:"search"},{default:p(()=>[c(t,{type:"primary",size:"small",onClick:l[2]||(l[2]=e=>ae.value=!0)},{default:p(()=>[...l[12]||(l[12]=[v(" 选择发音人 ",-1)])]),_:1})]),_:1})]))]),r("div",H,[l[13]||(l[13]=r("div",{class:"section-header"},[r("h3",{class:"section-title"},"合成设置")],-1)),c(xe,null,{default:p(()=>[c(_e,{title:"语速",center:""},{value:p(()=>[c(he,{modelValue:se.value,"onUpdate:modelValue":l[3]||(l[3]=e=>se.value=e),min:.5,max:2,step:.1,class:"speed-slider"},{button:p(()=>[r("div",J,d(se.value.toFixed(1))+"x",1)]),_:1},8,["modelValue"])]),_:1}),c(_e,{title:"音量",center:""},{value:p(()=>[c(he,{modelValue:te.value,"onUpdate:modelValue":l[4]||(l[4]=e=>te.value=e),min:0,max:100,step:1,class:"volume-slider"},{button:p(()=>[r("div",N,d(te.value)+"%",1)]),_:1},8,["modelValue"])]),_:1}),c(_e,{title:"音调",center:""},{value:p(()=>[c(he,{modelValue:oe.value,"onUpdate:modelValue":l[5]||(l[5]=e=>oe.value=e),min:-12,max:12,step:1,class:"pitch-slider"},{button:p(()=>[r("div",P,d(oe.value>0?"+":"")+d(oe.value),1)]),_:1},8,["modelValue"])]),_:1})]),_:1})]),r("div",Z,[c(t,{type:"primary",size:"large",block:"",onClick:ke,disabled:!pe.value,loading:ie.value,class:"synthesize-btn"},{loading:p(()=>[c(Ae,{type:"spinner",size:"20px"}),l[14]||(l[14]=v(" 合成中... ",-1))]),default:p(()=>[c(o,{name:"play",class:"btn-icon"}),l[15]||(l[15]=v(" 开始合成 ",-1))]),_:1},8,["disabled","loading"]),c(t,{type:"default",size:"large",block:"",onClick:fe,disabled:!ne.value,class:"stop-btn"},{default:p(()=>[c(o,{name:"pause",class:"btn-icon"}),l[16]||(l[16]=v(" 停止播放 ",-1))]),_:1},8,["disabled"])]),ue.value?(n(),u("div",O,[r("div",q,[l[18]||(l[18]=r("h3",{class:"section-title"},"播放控制",-1)),c(t,{type:"success",size:"small",onClick:be,class:"download-btn"},{default:p(()=>[c(o,{name:"down",class:"btn-icon"}),l[17]||(l[17]=v(" 下载 ",-1))]),_:1})]),r("div",X,[r("audio",{ref_key:"audioElement",ref:ce,src:ue.value,controls:"",class:"audio-element",onPlay:ye,onPause:ge,onEnded:je},null,40,$),r("div",K,[r("div",Y,[l[19]||(l[19]=r("span",{class:"info-label"},"文件大小:",-1)),r("span",W,d(we(re.value)),1)]),r("div",ee,[l[20]||(l[20]=r("span",{class:"info-label"},"合成时间:",-1)),r("span",le,d(de.value)+"ms",1)])])])])):k("",!0)]),c(B,{modelValue:ae.value,"onUpdate:modelValue":l[6]||(l[6]=e=>ae.value=e),title:"选择发音人",height:"70vh","selected-speaker-id":w.value?.id,onConfirm:ve,onClose:l[7]||(l[7]=e=>ae.value=!1)},null,8,["modelValue","selected-speaker-id"])])}}}),[["__scopeId","data-v-6b294dec"]]),se={class:"page-content"},te={class:"usage-guide"},oe=w(s({__name:"index",setup(s){h();const o=t(["guide"]),i=e=>{console.log("语音合成完成:",e),f("语音合成完成")},u=e=>{console.error("语音合成失败:",e),f("合成失败，请重试")};return(s,t)=>{const d=l,k=a,h=e;return n(),m(h,{"safe-area":"",scrollable:"","theme-mode":"auto"},{default:p(()=>[r("div",se,[c(ae,{onSynthesisComplete:i,onSynthesisError:u,class:"tts-component"})]),r("div",te,[c(k,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e)},{default:p(()=>[c(d,{title:"使用说明",name:"guide"},{default:p(()=>[...t[1]||(t[1]=[r("div",{class:"guide-content"},[r("h4",null,"语音合成功能说明"),r("ul",null,[r("li",null,[r("strong",null,"文本输入："),v("输入要合成的文本内容，支持中英文")]),r("li",null,[r("strong",null,"发音人选择："),v('点击"选择发音人"按钮，从发音人列表中选择合适的发音人')]),r("li",null,[r("strong",null,"合成设置："),v("可以调整语速、音量、音调等参数")]),r("li",null,[r("strong",null,"试听功能："),v('选择发音人后可以点击"试听"按钮预览发音效果')]),r("li",null,[r("strong",null,"开始合成："),v('点击"开始合成"按钮生成语音文件')]),r("li",null,[r("strong",null,"播放控制："),v("合成完成后可以播放、暂停、停止音频")])]),r("h4",null,"支持的功能"),r("ul",null,[r("li",null,"多种发音人选择（男声、女声、不同语言）"),r("li",null,"实时参数调整"),r("li",null,"音频文件下载"),r("li",null,"响应式设计，支持移动端")])],-1)])]),_:1})]),_:1},8,["modelValue"])])]),_:1})}}}),[["__scopeId","data-v-041a354f"]]);export{oe as default};
