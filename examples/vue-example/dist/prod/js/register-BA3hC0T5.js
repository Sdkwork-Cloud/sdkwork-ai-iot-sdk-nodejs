import{S as e}from"./sdkwork-page-container-BVbK78Br.js";import{k as a,O as s,r,c as l,f as o,b as i,o as n,P as t,Q as d,S as c,F as u,Y as m,V as p,j as g,u as h,$ as v,a0 as f,a4 as w,R as k,Z as b}from"./vue-vendor-CnVaDBlt.js";import{j as y,d as V,B as _,L as x,k as B,_ as M}from"./index-Cw3XK0oB.js";import{F as j}from"./index-PsbbfXyr.js";import{C as P}from"./index-Duq_L-cI.js";import{F as U}from"./index-Cy_WvPrr.js";import"./utils-vendor-WEzSe-CR.js";import"./index-Dk8mYG49.js";import"./use-id-CkVbEcjv.js";import"./Checker-Bc3cdP3a.js";const $={class:"tech-background"},R={class:"tech-particles-container"},q={class:"register-main-container"},C={class:"brand-section"},I={class:"brand-content"},S={class:"brand-logo-animated"},z={class:"logo-icon"},D={class:"tech-features"},F={class:"form-section"},A={class:"form-container"},L={class:"input-group"},E={class:"input-icon"},T={class:"input-group"},Z={class:"input-icon"},J={class:"input-group"},K={class:"input-icon"},O={class:"input-group"},Q={class:"input-icon"},W={class:"input-group"},Y={class:"input-icon"},G={class:"agreement-section"},H={class:"checkbox-label"},N={class:"form-actions"},X={class:"button-content"},ee={class:"login-section"},ae=M(a({__name:"sdkwork-auth-register",props:{redirectUrl:{default:"/"},autoRedirect:{type:Boolean,default:!0},forceDarkMode:{type:Boolean,default:!1},compactMode:{type:Boolean,default:!1}},emits:["register-success","register-failed","login-click","theme-change"],setup(e,{expose:a,emit:b}){const M=e,ae=b,se=s(),re=y(),le=r(!1),oe=r(!1),ie=r(!1),ne=r(!1),te=r(),de=l({username:"",email:"",phone:"",password:"",confirmPassword:"",agreed:!1}),ce=["智能数据分析","实时监控","AI预测","安全可靠"],ue={username:[{required:!0,message:"请输入用户名",trigger:"onBlur"},{validator:e=>/^[\w\u4e00-\u9fa5]{2,20}$/.test(e),message:"用户名2-20位，支持中文、英文、数字",trigger:"onBlur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"onBlur"},{validator:e=>/^[\w.-]+@[\w.-]+\.\w+$/.test(e),message:"请输入有效的邮箱地址",trigger:"onBlur"}],phone:[{validator:e=>!e||/^1[3-9]\d{9}$/.test(e),message:"请输入有效的手机号",trigger:"onBlur"}],password:[{required:!0,message:"请输入密码",trigger:"onBlur"},{validator:e=>e.length>=6,message:"密码至少6个字符",trigger:"onBlur"},{validator:e=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(e),message:"密码需包含大小写字母和数字",trigger:"onBlur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"onBlur"},{validator:e=>e===de.password,message:"两次输入的密码不一致",trigger:"onBlur"}],agreed:[{validator:e=>!0===e,message:"请同意用户协议和隐私政策",trigger:"onBlur"}]},me=o(()=>de.username.trim().length>=2&&de.email.trim().length>0&&de.password.length>=6&&de.confirmPassword===de.password&&de.agreed),pe=e=>{const a=4*Math.random()+1;return{width:`${a}px`,height:`${a}px`,animationDuration:`${6*Math.random()+4}s`,animationDelay:`${5*Math.random()}s`,left:100*Math.random()+"%",top:100*Math.random()+"%"}},ge=()=>{M.forceDarkMode?oe.value=!0:(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?oe.value=!0:oe.value=!1,ae("theme-change",oe.value))};let he=null;i(()=>{ge(),window.matchMedia&&(he=window.matchMedia("(prefers-color-scheme: dark)"),he.addEventListener("change",ge))}),n(()=>{he&&he.removeEventListener("change",ge)});const ve=async()=>{try{le.value=!0;const e={username:de.username.trim(),email:de.email.trim(),phone:de.phone.trim(),password:de.password,confirmPassword:de.confirmPassword,agreed:de.agreed},a=await re.register(e);ae("register-success",a),B({type:"success",message:"注册成功",background:oe.value?"var(--tech-bg-primary)":"#fff",color:(oe.value,"var(--tech-text-primary)")}),M.autoRedirect&&setTimeout(()=>{se.push(M.redirectUrl)},1e3)}catch(e){ae("register-failed",e),B({type:"danger",message:"注册失败，请检查输入信息",background:oe.value?"var(--tech-bg-primary)":"#fff",color:(oe.value,"var(--tech-text-primary)")})}finally{le.value=!1}},fe=()=>{ae("login-click"),se.push("/auth/login")};return a({focus:()=>{const e=document.querySelector(".modern-input input");e?.focus()},clear:()=>{de.username="",de.email="",de.phone="",de.password="",de.confirmPassword="",de.agreed=!1},validate:()=>te.value?.validate()}),(a,s)=>(d(),t("div",{class:k(["sdkwork-auth-register",{"dark-mode":oe.value,"compact-mode":e.compactMode}])},[c("div",$,[s[8]||(s[8]=c("div",{class:"tech-grid-lines"},null,-1)),c("div",R,[(d(),t(u,null,m(20,e=>c("div",{class:"particle",key:e,style:p(pe())},null,4)),64))]),s[9]||(s[9]=c("div",{class:"tech-glow-effect"},null,-1))]),c("div",q,[c("div",C,[c("div",I,[c("div",S,[c("div",z,[g(h(V),{icon:"ph:brain",class:"brain-icon"}),s[10]||(s[10]=c("div",{class:"logo-glow"},null,-1))]),s[11]||(s[11]=c("h1",{class:"brand-title-main"},"SDKWork AI",-1)),s[12]||(s[12]=c("p",{class:"brand-subtitle-main"},"智能物联网平台",-1))]),c("div",D,[(d(),t(u,null,m(ce,e=>c("div",{class:"feature-item",key:e},[g(h(V),{icon:"ph:check-circle",class:"feature-icon"}),c("span",null,v(e),1)])),64))])])]),c("div",F,[c("div",A,[s[20]||(s[20]=c("div",{class:"form-header"},[c("h2",{class:"form-title"},"创建账户"),c("p",{class:"form-subtitle"},"加入AIoT智能平台")],-1)),g(h(U),{ref_key:"registerFormRef",ref:te,model:de,rules:ue,onSubmit:ve,class:"modern-register-form"},{default:f(()=>[c("div",L,[c("div",E,[g(h(V),{icon:"ph:user",class:"input-icon-svg"})]),g(h(j),{modelValue:de.username,"onUpdate:modelValue":s[0]||(s[0]=e=>de.username=e),name:"username",placeholder:"用户名",rules:ue.username,border:!1,class:"modern-input"},null,8,["modelValue","rules"])]),c("div",T,[c("div",Z,[g(h(V),{icon:"ph:envelope",class:"input-icon-svg"})]),g(h(j),{modelValue:de.email,"onUpdate:modelValue":s[1]||(s[1]=e=>de.email=e),name:"email",placeholder:"邮箱地址",rules:ue.email,border:!1,class:"modern-input"},null,8,["modelValue","rules"])]),c("div",J,[c("div",K,[g(h(V),{icon:"ph:phone",class:"input-icon-svg"})]),g(h(j),{modelValue:de.phone,"onUpdate:modelValue":s[2]||(s[2]=e=>de.phone=e),name:"phone",placeholder:"手机号（可选）",rules:ue.phone,border:!1,class:"modern-input"},null,8,["modelValue","rules"])]),c("div",O,[c("div",Q,[g(h(V),{icon:"ph:lock",class:"input-icon-svg"})]),g(h(j),{modelValue:de.password,"onUpdate:modelValue":s[4]||(s[4]=e=>de.password=e),name:"password",type:ie.value?"text":"password",placeholder:"密码",rules:ue.password,border:!1,class:"modern-input"},{button:f(()=>[c("div",{class:"password-toggle",onClick:s[3]||(s[3]=e=>ie.value=!ie.value)},[g(h(V),{icon:ie.value?"ph:eye-slash":"ph:eye",class:"toggle-icon"},null,8,["icon"])])]),_:1},8,["modelValue","type","rules"])]),c("div",W,[c("div",Y,[g(h(V),{icon:"ph:lock-key",class:"input-icon-svg"})]),g(h(j),{modelValue:de.confirmPassword,"onUpdate:modelValue":s[6]||(s[6]=e=>de.confirmPassword=e),name:"confirmPassword",type:ne.value?"text":"password",placeholder:"确认密码",rules:ue.confirmPassword,border:!1,class:"modern-input"},{button:f(()=>[c("div",{class:"password-toggle",onClick:s[5]||(s[5]=e=>ne.value=!ne.value)},[g(h(V),{icon:ne.value?"ph:eye-slash":"ph:eye",class:"toggle-icon"},null,8,["icon"])])]),_:1},8,["modelValue","type","rules"])]),c("div",G,[g(h(P),{modelValue:de.agreed,"onUpdate:modelValue":s[7]||(s[7]=e=>de.agreed=e),shape:"square",class:"modern-checkbox",rules:ue.agreed},{default:f(()=>[c("span",H,[s[15]||(s[15]=w(" 我已阅读并同意 ",-1)),g(h(_),{type:"default",size:"mini",link:"",class:"agreement-link"},{default:f(()=>[...s[13]||(s[13]=[w(" 《用户协议》 ",-1)])]),_:1}),s[16]||(s[16]=w(" 和 ",-1)),g(h(_),{type:"default",size:"mini",link:"",class:"agreement-link"},{default:f(()=>[...s[14]||(s[14]=[w(" 《隐私政策》 ",-1)])]),_:1})])]),_:1},8,["modelValue","rules"])]),c("div",N,[g(h(_),{round:"",block:"",type:"primary","native-type":"submit",loading:le.value,disabled:!me.value,"loading-text":"注册中...",class:"modern-register-button"},{loading:f(()=>[g(h(x),{type:"spinner",size:"20px"})]),default:f(()=>[c("span",X,[g(h(V),{icon:"ph:user-plus",class:"button-icon"}),s[17]||(s[17]=c("span",null,"创建账户",-1))])]),_:1},8,["loading","disabled"])])]),_:1},8,["model"]),c("div",ee,[s[19]||(s[19]=c("p",{class:"login-text"},"已有账户？",-1)),g(h(_),{type:"default",size:"large",onClick:fe,class:"login-button"},{default:f(()=>[g(h(V),{icon:"ph:sign-in",class:"login-icon"}),s[18]||(s[18]=c("span",null,"立即登录",-1))]),_:1})])])])])],2))}}),[["__scopeId","data-v-72ac58f0"]]),se=M(a({__name:"register",setup(a){const r=s(),l=e=>{r.push("/auth/login")},o=e=>{},i=()=>{r.push("/auth/login")};return(a,s)=>{const r=e;return d(),b(r,{"safe-area":"",scrollable:"","theme-mode":"auto"},{default:f(()=>[g(ae,{onRegisterSuccess:l,onRegisterFailed:o,onLoginClick:i})]),_:1})}}}),[["__scopeId","data-v-884cceb8"]]);export{se as default};
