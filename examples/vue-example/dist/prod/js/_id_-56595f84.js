import{S as e}from"./sdkwork-page-container-390f5fca.js";import{k as a,O as s,c as t,Q as o,R as i,S as l,j as n,u as r,U as u,$ as d,F as c,Y as m,Z as p,a0 as v,a4 as g,X as f,r as k,a1 as h,b,a3 as y}from"./vue-vendor-fce65f55.js";import{j as C,b as _,_ as j,s as w,d as x,I as z,B as $}from"./index-2cafbb5e.js";/* empty css              *//* empty css              */import{C as M}from"./index-6f80587d.js";/* empty css              */import{T as S}from"./index-4f03d337.js";/* empty css              */import{E as D}from"./index-17b6a864.js";import{s as I}from"./index-6ac85e31.js";import{D as T,a as L}from"./index-87c43664.js";/* empty css              */import{S as A}from"./index-291bb189.js";import{T as B,a as V}from"./index-0cceffd2.js";import{C as F}from"./index-fa16672a.js";import"./utils-vendor-b5712723.js";import"./use-id-bc367f23.js";import"./index-4ce57344.js";import"./index-a5403cf2.js";import"./index-155d12c9.js";import"./use-tab-status-2f29a6cd.js";import"./use-refs-d05fb49f.js";const G={class:"header-background"},U=["src","alt"],J={class:"nav-back"},N={class:"group-info"},P=["src","alt"],O={key:0,class:"official-badge"},R={key:1,class:"verified-badge"},E={class:"group-basic-info"},H={class:"group-name"},K={class:"group-tags"},Q={key:0,class:"more-tags"},X={class:"stats-info"},Y={class:"stat-item"},Z={class:"stat-value"},q={class:"stat-item"},W={class:"stat-value"},ee={key:0,class:"stat-divider"},ae={key:1,class:"stat-item"},se={class:"stat-value"},te=j(a({__name:"GroupHeader",props:{group:{}},emits:["back"],setup(e,{emit:a}){const k=e,h=a,b=s(),{currentTheme:y}=C(),j=t(()=>`theme-${y.value}`),w=()=>{console.log("背景图片加载失败")},x=()=>{console.log("头像加载失败")},z=()=>{h("back")},$=()=>{k.group?.id&&b.push(`/group/profile/${k.group.id}`)},M=e=>e>=1e4?(e/1e4).toFixed(1)+"w":e>=1e3?(e/1e3).toFixed(1)+"k":e.toString();return(a,s)=>{const t=S;return o(),i("div",{class:f(["group-header",j.value])},[l("div",G,[l("img",{src:e.group?.coverImage||e.group?.avatar||"https://picsum.photos/seed/default-cover/800/300.jpg",alt:e.group?.name,class:"background-image",onError:w},null,40,U),s[0]||(s[0]=l("div",{class:"background-overlay"},null,-1))]),l("div",J,[n(r(_),{icon:"tabler:arrow-left",size:"24",onClick:z})]),l("div",N,[l("div",{class:"group-avatar",onClick:$},[l("img",{src:e.group?.avatar||"https://picsum.photos/seed/default-avatar/200/200.jpg",alt:e.group?.name,class:"avatar-image",onError:x},null,40,P),e.group?.isOfficial?(o(),i("div",O,"官方")):u("",!0),e.group?.isVerified?(o(),i("div",R,[n(r(_),{icon:"tabler:circle-check"})])):u("",!0)]),l("div",E,[l("h1",H,d(e.group?.name),1),l("div",K,[(o(!0),i(c,null,m(e.group?.tags?.slice(0,3),e=>(o(),p(t,{key:e,type:"primary",plain:"",class:"group-tag"},{default:v(()=>[g(d(e),1)]),_:2},1024))),128)),e.group?.tags&&e.group.tags.length>3?(o(),i("span",Q," +"+d(e.group.tags.length-3),1)):u("",!0)]),l("div",X,[l("div",Y,[l("span",Z,d(M(e.group?.memberCount||0)),1),s[1]||(s[1]=l("span",{class:"stat-label"},"成员",-1))]),s[4]||(s[4]=l("div",{class:"stat-divider"},null,-1)),l("div",q,[l("span",W,d(M(e.group?.messageCount||0)),1),s[2]||(s[2]=l("span",{class:"stat-label"},"消息",-1))]),e.group?.maxMembers?(o(),i("div",ee)):u("",!0),e.group?.maxMembers?(o(),i("div",ae,[l("span",se,d(e.group.maxMembers),1),s[3]||(s[3]=l("span",{class:"stat-label"},"上限",-1))])):u("",!0)])])])],2)}}}),[["__scopeId","data-v-2513cc7a"]]),oe={class:"bottom-container"},ie=j(a({__name:"GroupBottom",props:{group:{},joining:{type:Boolean,default:!1}},emits:["back","join","enter"],setup(e,{emit:a}){const s=e,r=a,{currentTheme:u}=C(),c=t(()=>`theme-${u.value}`),m=()=>{r("back")},k=()=>{s.group.isJoined?w("您已加入该群组"):s.group.price>0?x({title:"付费入群",message:`加入"${s.group.name}"需要支付 ¥${s.group.price}，是否确认？`}).then(()=>{w("支付成功，已加入群组"),r("join",s.group)}).catch(()=>{}):(w("已加入群组"),r("join",s.group))},h=()=>{r("enter",s.group)};return(a,s)=>{const t=z,r=$;return o(),i("div",{class:f(["group-bottom",c.value])},[l("div",oe,[n(r,{type:"default",size:"large",round:"",onClick:m,class:"back-button"},{default:v(()=>[n(t,{name:"arrow-left",size:"16",class:"button-icon"}),s[0]||(s[0]=g(" 返回 ",-1))]),_:1}),e.group?.isJoined?(o(),p(r,{key:1,type:"primary",size:"large",round:"",onClick:h,class:"enter-button"},{default:v(()=>[n(t,{name:"chat",size:"16",class:"button-icon"}),s[1]||(s[1]=g(" 进入群聊 ",-1))]),_:1})):(o(),p(r,{key:0,type:"primary",size:"large",round:"",loading:e.joining,onClick:k,class:"join-button"},{default:v(()=>[n(t,{name:"plus",size:"16",class:"button-icon"}),g(" "+d(e.group?.price>0?`付费加入 (¥${e.group.price})`:"加入群组"),1)]),_:1},8,["loading"]))])],2)}}}),[["__scopeId","data-v-ea4cb281"]]),le={class:"feed-user"},ne=["src","alt"],re={class:"user-info"},ue={class:"feed-time"},de={key:0,class:"pin-badge"},ce={class:"feed-content"},me={class:"feed-text"},pe={key:0,class:"feed-images"},ve={class:"image-grid"},ge=["src","alt","onClick"],fe={key:0,class:"more-images"},ke={class:"feed-actions"},he={class:"action-count"},be={class:"action-count"},ye=j(a({__name:"sdkwork-feeds-item",props:{feed:{}},emits:["like","comment","share","user-click"],setup(e,{emit:a}){const s=e,r=a,{currentTheme:p}=C(),v=t(()=>`theme-${p.value}`),g=()=>{r("like",s.feed)},k=()=>{r("comment",s.feed)},h=()=>{r("share",s.feed)},b=()=>{r("user-click",s.feed)},y=e=>{const a=new Date(e),s=(new Date).getTime()-a.getTime();return s<6e4?"刚刚":s<36e5?`${Math.floor(s/6e4)}分钟前`:s<864e5?`${Math.floor(s/36e5)}小时前`:s<6048e5?`${Math.floor(s/864e5)}天前`:a.toLocaleDateString()},_=e=>e>=1e4?(e/1e4).toFixed(1)+"w":e>=1e3?(e/1e3).toFixed(1)+"k":e.toString();return(a,s)=>{const t=z;return o(),i("div",{class:f(["sdkwork-feeds-item",v.value])},[l("div",le,[l("img",{src:e.feed.userAvatar||"https://picsum.photos/seed/default-avatar/200/200.jpg",alt:e.feed.userName,class:"user-avatar",onClick:b},null,8,ne),l("div",re,[l("div",{class:"user-name",onClick:b},d(e.feed.userName),1),l("div",ue,d(y(e.feed.createdAt)),1)]),e.feed.isPinned?(o(),i("div",de,[n(t,{name:"thumb-circle-o",size:"14"}),s[0]||(s[0]=l("span",null,"置顶",-1))])):u("",!0)]),l("div",ce,[l("div",me,d(e.feed.content),1),e.feed.images&&e.feed.images.length?(o(),i("div",pe,[l("div",ve,[(o(!0),i(c,null,m(e.feed.images.slice(0,3),(a,s)=>(o(),i("img",{key:s,src:a,alt:`图片${s+1}`,class:"feed-image",onClick:a=>{return t=e.feed.images,void I({images:t,startPosition:s});var t}},null,8,ge))),128)),e.feed.images.length>3?(o(),i("div",fe,[l("span",null,"+"+d(e.feed.images.length-3),1)])):u("",!0)])])):u("",!0)]),l("div",ke,[l("div",{class:f(["action-item",{liked:e.feed.isLiked}]),onClick:g},[n(t,{name:e.feed.isLiked?"good-job":"good-job-o",size:"16"},null,8,["name"]),l("span",he,d(_(e.feed.likeCount||0)),1)],2),l("div",{class:"action-item",onClick:k},[n(t,{name:"chat-o",size:"16"}),l("span",be,d(_(e.feed.commentCount||0)),1)]),l("div",{class:"action-item",onClick:h},[n(t,{name:"share-o",size:"16"}),s[1]||(s[1]=l("span",{class:"action-count"},"分享",-1))])])],2)}}}),[["__scopeId","data-v-71033084"]]),Ce={class:"publish-container"},_e={class:"feeds-container"},je={key:0,class:"empty-feeds"},we={key:1,class:"feeds-list"},xe={key:0,class:"load-more"},ze=j(a({__name:"GroupFeedsList",props:{loading:{type:Boolean,default:!1},hasMore:{type:Boolean,default:!0},feeds:{default:()=>[]}},emits:["publish","like","comment","share","user-click","load-more"],setup(e,{emit:a}){const s=a,{currentTheme:r}=C(),k=t(()=>`theme-${r.value}`),h=()=>{s("publish")},b=e=>{s("like",e)},y=e=>{s("comment",e)},_=e=>{s("share",e)},j=e=>{s("user-click",e)},w=()=>{s("load-more")};return(a,s)=>{const t=z,r=$,C=D;return o(),i("div",{class:f(["group-feeds-list",k.value])},[l("div",Ce,[n(r,{type:"primary",size:"large",round:"",onClick:h,class:"publish-button"},{default:v(()=>[n(t,{name:"plus",size:"16",class:"button-icon"}),s[0]||(s[0]=g(" 发布动态 ",-1))]),_:1})]),l("div",_e,[0===e.feeds.length?(o(),i("div",je,[n(C,{image:"default",description:"暂无群动态"},{default:v(()=>[n(r,{type:"primary",size:"small",round:"",onClick:h},{default:v(()=>[...s[1]||(s[1]=[g(" 发布第一条动态 ",-1)])]),_:1})]),_:1})])):(o(),i("div",we,[(o(!0),i(c,null,m(e.feeds,e=>(o(),p(ye,{key:e.id,feed:e,onLike:b,onComment:y,onShare:_,onUserClick:j},null,8,["feed"]))),128))]))]),e.hasMore?(o(),i("div",xe,[n(r,{type:"default",size:"small",round:"",loading:e.loading,onClick:w},{default:v(()=>[g(d(e.loading?"加载中...":"加载更多"),1)]),_:1},8,["loading"])])):u("",!0)],2)}}}),[["__scopeId","data-v-33aed412"]]),$e={class:"filter-container"},Me={class:"filter-left"},Se={class:"resources-container"},De={key:0,class:"empty-resources"},Ie={key:1,class:"resources-list"},Te=["onClick"],Le={class:"resource-icon"},Ae={class:"resource-info"},Be={class:"resource-title"},Ve={class:"resource-description"},Fe={class:"resource-meta"},Ge={class:"resource-size"},Ue={class:"resource-date"},Je={class:"resource-author"},Ne={key:0,class:"resource-tags"},Pe={key:0,class:"more-tags"},Oe={class:"resource-actions"},Re={key:0,class:"load-more"},Ee=j(a({__name:"GroupResourceList",props:{resources:{default:()=>[]},loading:{type:Boolean,default:!1},hasMore:{type:Boolean,default:!0},isGroupAdmin:{type:Boolean,default:!1}},emits:["upload","download","view","delete","edit","load-more","filter-change"],setup(e,{emit:a}){const s=a,{currentTheme:r}=C(),b=t(()=>`theme-${r.value}`),y=k("all"),_=k("newest"),j=[{text:"全部",value:"all"},{text:"图片",value:"image"},{text:"视频",value:"video"},{text:"文档",value:"doc"},{text:"音频",value:"audio"},{text:"其他",value:"other"}],x=[{text:"最新",value:"newest"},{text:"最热",value:"hottest"},{text:"名称",value:"name"},{text:"大小",value:"size"}],M=()=>{s("upload")},I=()=>{s("load-more")},A=()=>{s("filter-change",{type:y.value,sort:_.value})},B=()=>{s("filter-change",{type:y.value,sort:_.value})},V=e=>({image:"#1989fa",video:"#ff6b35",doc:"#07c160",audio:"#7232dd",other:"#969799"}[e]||"#969799"),F=e=>{const a=new Date(e),s=(new Date).getTime()-a.getTime();return s<864e5?"今天":s<1728e5?"昨天":s<6048e5?`${Math.floor(s/864e5)}天前`:a.toLocaleDateString()};return(a,t)=>{const r=T,k=L,C=z,G=$,U=D,J=S;return o(),i("div",{class:f(["group-resource-list",b.value])},[l("div",$e,[l("div",Me,[n(k,null,{default:v(()=>[n(r,{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=e=>y.value=e),options:j,title:"类型",onChange:A},null,8,["modelValue"]),n(r,{modelValue:_.value,"onUpdate:modelValue":t[1]||(t[1]=e=>_.value=e),options:x,title:"排序",onChange:B},null,8,["modelValue"])]),_:1})]),n(G,{type:"primary",size:"small",round:"",onClick:M,class:"upload-button"},{default:v(()=>[n(C,{name:"plus",size:"14",class:"button-icon"}),t[2]||(t[2]=g(" 上传资源 ",-1))]),_:1})]),l("div",Se,[0===e.resources.length?(o(),i("div",De,[n(U,{image:"default",description:"暂无群资源"},{default:v(()=>[n(G,{type:"primary",size:"small",round:"",onClick:M},{default:v(()=>[...t[3]||(t[3]=[g(" 上传第一个资源 ",-1)])]),_:1})]),_:1})])):(o(),i("div",Ie,[(o(!0),i(c,null,m(e.resources,a=>{return o(),i("div",{key:a.id,class:"resource-item",onClick:e=>(e=>{s("view",e)})(a)},[l("div",Le,[n(C,{name:(f=a.type,{image:"photo-o",video:"play-circle-o",doc:"description",audio:"music-o",other:"folder-o"}[f]||"folder-o"),size:"36",color:V(a.type)},null,8,["name","color"])]),l("div",Ae,[l("div",Be,d(a.title),1),l("div",Ve,d(a.description),1),l("div",Fe,[l("span",Ge,d((r=a.size,r<1024?r+" B":r<1048576?(r/1024).toFixed(1)+" KB":r<1073741824?(r/1048576).toFixed(1)+" MB":(r/1073741824).toFixed(1)+" GB")),1),l("span",Ue,d(F(a.createdAt)),1),l("span",Je,"by "+d(a.authorName),1)]),a.tags&&a.tags.length?(o(),i("div",Ne,[(o(!0),i(c,null,m(a.tags.slice(0,3),e=>(o(),p(J,{key:e,plain:"",size:"medium",class:"resource-tag"},{default:v(()=>[g(d(e),1)]),_:2},1024))),128)),a.tags.length>3?(o(),i("span",Pe," +"+d(a.tags.length-3),1)):u("",!0)])):u("",!0)]),l("div",Oe,[n(G,{type:"primary",size:"small",round:"",onClick:h(e=>(e=>{s("download",e)})(a),["stop"]),class:"download-button"},{default:v(()=>[n(C,{name:"down",size:"14"}),t[4]||(t[4]=g(" 下载 ",-1))]),_:1},8,["onClick"]),e.isGroupAdmin||a.isMine?(o(),p(G,{key:0,type:"default",size:"small",round:"",onClick:h(e=>{w("更多操作功能开发中")},["stop"]),class:"more-button"},{default:v(()=>[n(C,{name:"ellipsis",size:"14"})]),_:1},8,["onClick"])):u("",!0)])],8,Te);var r,f}),128))]))]),e.hasMore?(o(),i("div",Re,[n(G,{type:"default",size:"small",round:"",loading:e.loading,onClick:I},{default:v(()=>[g(d(e.loading?"加载中...":"加载更多"),1)]),_:1},8,["loading"])])):u("",!0)],2)}}}),[["__scopeId","data-v-d5905d5c"]]),He={class:"search-container"},Ke={class:"role-tabs"},Qe={class:"members-container"},Xe={key:0,class:"empty-members"},Ye={key:1,class:"members-list"},Ze=["onClick"],qe=["src","alt"],We={class:"member-info"},ea={class:"member-basic"},aa={class:"member-name"},sa={key:0,class:"member-role owner"},ta={key:1,class:"member-role admin"},oa={key:2,class:"member-role active"},ia={key:0,class:"member-signature"},la={class:"member-meta"},na={class:"join-time"},ra={key:0,class:"message-count"},ua={class:"member-actions"},da={key:0,class:"load-more"},ca=j(a({__name:"GroupMembersList",props:{members:{default:()=>[]},loading:{type:Boolean,default:!1},hasMore:{type:Boolean,default:!0}},emits:["member-click","send-message","add-friend","load-more","search"],setup(e,{emit:a}){const s=e,r=a,{currentTheme:b}=C(),y=t(()=>`theme-${b.value}`),_=k(""),j=k("all"),w=t(()=>{let e=[...s.members||[]];if("admin"===j.value)e=e.filter(e=>"admin"===e.role||"owner"===e.role);else if("active"===j.value)e=e.filter(e=>e.isActive);else if("new"===j.value){const a=new Date;a.setDate(a.getDate()-7),e=e.filter(e=>new Date(e.joinTime)>a)}if(_.value){const a=_.value.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(a)||e.signature&&e.signature.toLowerCase().includes(a))}return e}),x=()=>{r("search",_.value)},z=()=>{_.value="",r("search","")},M=e=>{j.value=e},S=()=>{r("load-more")},I=e=>{const a=new Date(e),s=(new Date).getTime()-a.getTime();return s<864e5?"今天":s<1728e5?"昨天":s<6048e5?`${Math.floor(s/864e5)}天前`:s<2592e6?`${Math.floor(s/6048e5)}周前`:a.toLocaleDateString()};return(a,s)=>{const t=A,k=B,b=V,C=D,T=$;return o(),i("div",{class:f(["group-members-list",y.value])},[l("div",He,[n(t,{modelValue:_.value,"onUpdate:modelValue":s[0]||(s[0]=e=>_.value=e),placeholder:"搜索成员",onSearch:x,onClear:z,shape:"round",background:"transparent"},null,8,["modelValue"])]),l("div",Ke,[n(b,{active:j.value,"onUpdate:active":s[1]||(s[1]=e=>j.value=e),onChange:M,shrink:"",background:"transparent",color:"var(--color-primary, #1989fa)","line-height":"3px"},{default:v(()=>[n(k,{title:"全部",name:"all"}),n(k,{title:"管理员",name:"admin"}),n(k,{title:"活跃成员",name:"active"}),n(k,{title:"新成员",name:"new"})]),_:1},8,["active"])]),l("div",Qe,[0===w.value.length?(o(),i("div",Xe,[n(C,{image:"default",description:_.value?"未找到相关成员":"暂无成员"},null,8,["description"])])):(o(),i("div",Ye,[(o(!0),i(c,null,m(w.value,e=>(o(),i("div",{key:e.id,class:"member-item",onClick:a=>(e=>{r("member-click",e)})(e)},[l("img",{src:e.avatar||"https://picsum.photos/seed/default-avatar/200/200.jpg",alt:e.name,class:"member-avatar"},null,8,qe),l("div",We,[l("div",ea,[l("div",aa,d(e.name),1),"owner"===e.role?(o(),i("div",sa,"群主")):"admin"===e.role?(o(),i("div",ta,"管理员")):e.isActive?(o(),i("div",oa,"活跃")):u("",!0)]),e.signature?(o(),i("div",ia,d(e.signature),1)):u("",!0),l("div",la,[l("span",na,"加入时间: "+d(I(e.joinTime)),1),e.messageCount?(o(),i("span",ra,"发言 "+d(e.messageCount)+" 条",1)):u("",!0)])]),l("div",ua,[e.isFriend?(o(),p(T,{key:0,type:"default",size:"small",round:"",plain:"",onClick:h(a=>(e=>{r("send-message",e)})(e),["stop"]),class:"action-button"},{default:v(()=>[...s[2]||(s[2]=[g(" 发消息 ",-1)])]),_:1},8,["onClick"])):(o(),p(T,{key:1,type:"primary",size:"small",round:"",plain:"",onClick:h(a=>(e=>{r("add-friend",e)})(e),["stop"]),class:"action-button"},{default:v(()=>[...s[3]||(s[3]=[g(" 加好友 ",-1)])]),_:1},8,["onClick"]))])],8,Ze))),128))]))]),e.hasMore?(o(),i("div",da,[n(T,{type:"default",size:"small",round:"",loading:e.loading,onClick:S},{default:v(()=>[g(d(e.loading?"加载中...":"加载更多"),1)]),_:1},8,["loading"])])):u("",!0)],2)}}}),[["__scopeId","data-v-f507d5b8"]]),ma={class:"content-container"},pa={class:"settings-container"},va={key:0,class:"admin-actions"},ga=j(a({__name:"sdkwork-group-space",props:{groupId:{default:void 0},group:{default:void 0}},emits:["back","enter-group"],setup(e,{emit:a}){const d=e,c=a,m=s(),{currentTheme:g}=C(),h=t(()=>`theme-${g.value}`),y=k("feeds"),_=k(d.group),j=k(!1),z=k([]),$=k(!1),S=k(!0),D=k([]),I=k(!1),T=k(!0),L=k([]),A=k(!1),G=k(!0),U=t(()=>_.value?.isJoined||!1),J=t(()=>_.value?.isJoined||!1),N=async(e=!1)=>{if(!$.value){$.value=!0;try{await new Promise(e=>setTimeout(e,800));const a=[{id:"1",userId:"user1",userName:"张三",userAvatar:"https://picsum.photos/seed/user1/200/200.jpg",content:"今天遇到了一个CSS布局问题，最后用Grid解决了，真的是太强大了！",images:["https://picsum.photos/seed/css1/400/300.jpg"],isPinned:!0,isLiked:!1,likeCount:23,commentCount:5,createdAt:new Date(Date.now()-72e5).toISOString()},{id:"2",userId:"user2",userName:"李四",userAvatar:"https://picsum.photos/seed/user2/200/200.jpg",content:"Vue3和React18哪个更好？我最近在做一个新项目，有点纠结，大家有什么建议吗？",images:[],isPinned:!1,isLiked:!0,likeCount:18,commentCount:32,createdAt:new Date(Date.now()-18e6).toISOString()}];z.value=e?a:[...z.value,...a],S.value=z.value.length<20}finally{$.value=!1}}},P=async(e=!1)=>{if(!I.value){I.value=!0;try{await new Promise(e=>setTimeout(e,800));const a=[{id:"1",title:"Vue3实战教程",description:"从零开始学习Vue3，包含Composition API、响应式系统等核心概念",type:"doc",size:15728640,url:"https://example.com/vue3-tutorial.pdf",authorId:"user1",authorName:"张三",tags:["教程","Vue3"],isMine:!1,downloadCount:235,createdAt:new Date(Date.now()-2592e5).toISOString()},{id:"2",title:"React Hooks详解",description:"深入解析React Hooks的实现原理和最佳实践",type:"video",size:52428800,url:"https://example.com/react-hooks.mp4",thumbnailUrl:"https://picsum.photos/seed/react-hooks/320/180.jpg",authorId:"user2",authorName:"李四",tags:["视频","React"],isMine:!0,downloadCount:156,createdAt:new Date(Date.now()-6048e5).toISOString()}];D.value=e?a:[...D.value,...a],T.value=D.value.length<20}finally{I.value=!1}}},O=async(e=!1)=>{if(!A.value){A.value=!0;try{await new Promise(e=>setTimeout(e,800));const a=[{id:"user1",name:"张三",avatar:"https://picsum.photos/seed/user1/200/200.jpg",signature:"热爱前端，专注于Vue和React技术栈",role:"admin",isActive:!0,isFriend:!0,joinTime:"2022-02-15",messageCount:542},{id:"user2",name:"李四",avatar:"https://picsum.photos/seed/user2/200/200.jpg",signature:"前端工程师，爱技术，爱生活",role:"member",isActive:!0,isFriend:!1,joinTime:"2022-03-20",messageCount:326},{id:"user3",name:"王五",avatar:"https://picsum.photos/seed/user3/200/200.jpg",signature:"CSS高手，精通各种布局技巧",role:"member",isActive:!1,isFriend:!1,joinTime:"2022-05-10",messageCount:187}];L.value=e?a:[...L.value,...a],G.value=L.value.length<100}finally{A.value=!1}}},R=e=>{console.log("切换到标签:",e),"feeds"===e&&0===z.value.length?N(!0):"resources"===e&&0===D.value.length?P(!0):"members"===e&&0===L.value.length&&O(!0)},E=()=>{c("back"),m.back()},H=e=>{e.isJoined?w("您已加入该群组"):e.price>0?x({title:"付费入群",message:`加入"${e.name}"需要支付 ¥${e.price}，是否确认？`}).then(()=>{w("支付成功，已加入群组"),_.value&&(_.value.isJoined=!0)}).catch(()=>{}):(w("已加入群组"),_.value&&(_.value.isJoined=!0))},K=e=>{c("enter-group",e),w("进入群聊")},Q=()=>{w("发布动态")},X=e=>{const a=z.value.findIndex(a=>a.id===e.id);-1!==a&&(z.value[a].isLiked=!z.value[a].isLiked,z.value[a].likeCount+=z.value[a].isLiked?1:-1)},Y=e=>{w(`评论动态: ${e.content.substring(0,20)}...`)},Z=e=>{w(`分享动态: ${e.content.substring(0,20)}...`)},q=()=>{N()},W=()=>{w("上传资源")},ee=e=>{w(`下载资源: ${e.title}`)},ae=e=>{w(`查看资源: ${e.title}`)},se=e=>{w(`编辑资源: ${e.title}`)},oe=e=>{x({title:"删除资源",message:`确定要删除资源"${e.title}"吗？`}).then(()=>{const a=D.value.findIndex(a=>a.id===e.id);-1!==a&&(D.value.splice(a,1),w("删除成功"))}).catch(()=>{})},le=e=>{console.log("资源筛选:",e)},ne=()=>{P()},re=e=>{w(`查看成员: ${e.name}`)},ue=e=>{w(`给 ${e.name} 发送消息`)},de=e=>{w(`添加 ${e.name} 为好友`)},ce=()=>{O()},me=e=>{console.log("搜索成员:",e)},pe=()=>{w("群通知设置")},ve=()=>{w("免打扰设置")},ge=()=>{w("置顶聊天设置")},fe=()=>{w("显示群二维码")},ke=()=>{x({title:"清空聊天记录",message:"确定要清空所有聊天记录吗？此操作不可恢复。"}).then(()=>{w("聊天记录已清空")}).catch(()=>{})},he=()=>{w("举报群组")},be=()=>{w("群管理")},ye=()=>{w("成员管理")};return b(()=>{(async()=>{if(!_.value&&d.groupId){const e={id:String(d.groupId),name:"前端技术交流群",description:"分享前端技术、讨论最新前端框架、解决技术难题、共同进步的技术交流群组。",avatar:"https://picsum.photos/seed/frontend/200/200.jpg",coverImage:"https://picsum.photos/seed/frontend-cover/800/300.jpg",tags:["前端","技术","交流"],memberCount:3586,maxMembers:5e3,messageCount:128560,price:0,isOfficial:!0,isVerified:!0,isHot:!0,isJoined:!0,type:"official",createdAt:"2022-01-15"};_.value=e}})(),N(!0)}),(e,a)=>{const s=B,t=F,d=M,c=V;return o(),i("div",{class:f(["sdkwork-group-space",h.value])},[n(r(te),{group:_.value,onBack:E},null,8,["group"]),l("div",ma,[n(c,{active:y.value,"onUpdate:active":a[0]||(a[0]=e=>y.value=e),onChange:R,sticky:"","offset-top":"0",animated:"",swipeable:"",background:"var(--bg-card, #ffffff)",color:"var(--color-primary, #1989fa)","line-height":"3px"},{default:v(()=>[n(s,{name:"feeds",title:"群动态"},{default:v(()=>[n(r(ze),{feeds:z.value,loading:$.value,"has-more":S.value,onPublish:Q,onLike:X,onComment:Y,onShare:Z,onLoadMore:q},null,8,["feeds","loading","has-more"])]),_:1}),n(s,{name:"resources",title:"群资源"},{default:v(()=>[n(r(Ee),{resources:D.value,loading:I.value,"has-more":T.value,"is-group-admin":U.value,onUpload:W,onDownload:ee,onView:ae,onEdit:se,onDelete:oe,onLoadMore:ne,onFilterChange:le},null,8,["resources","loading","has-more","is-group-admin"])]),_:1}),n(s,{name:"members",title:"群成员"},{default:v(()=>[n(r(ca),{members:L.value,loading:A.value,"has-more":G.value,onMemberClick:re,onSendMessage:ue,onAddFriend:de,onLoadMore:ce,onSearch:me},null,8,["members","loading","has-more"])]),_:1}),J.value?(o(),p(s,{key:0,name:"settings",title:"群设置"},{default:v(()=>[l("div",pa,[n(d,{inset:""},{default:v(()=>[n(t,{title:"群通知","is-link":"",onClick:pe}),n(t,{title:"免打扰","is-link":"",onClick:ve}),n(t,{title:"置顶聊天","is-link":"",onClick:ge}),n(t,{title:"群二维码","is-link":"",onClick:fe})]),_:1}),n(d,{inset:""},{default:v(()=>[n(t,{title:"清空聊天记录","is-link":"",onClick:ke}),n(t,{title:"举报群组","is-link":"",onClick:he})]),_:1}),U.value?(o(),i("div",va,[n(d,{inset:""},{default:v(()=>[n(t,{title:"群管理","is-link":"",onClick:be}),n(t,{title:"成员管理","is-link":"",onClick:ye})]),_:1})])):u("",!0)])]),_:1})):u("",!0)]),_:1},8,["active"])]),n(r(ie),{group:_.value,joining:j.value,onBack:E,onJoin:H,onEnter:K},null,8,["group","joining"])],2)}}}),[["__scopeId","data-v-49916f82"]]),fa=j(a({__name:"[id]",setup(a){const i=y(),l=s(),r=t(()=>i.params.id),u=()=>{l.back()},d=e=>{};return(a,s)=>{const t=e;return o(),p(t,{"safe-area":"","theme-mode":"auto",scrollable:""},{default:v(()=>[n(ga,{"group-id":r.value,onBack:u,onEnterGroup:d},null,8,["group-id"])]),_:1})}}}),[["__scopeId","data-v-888db01b"]]);export{fa as default};
