import{_ as e}from"./sdkwork-popup-CqnL77Ku.js";import{aW as a,I as l,B as t,s as o,a as s,h as i,_ as n}from"./index-TwMLNQLv.js";/* empty css              *//* empty css              *//* empty css              */import{a as u,_ as r}from"./sdkwork-cell-group-BczPN-8y.js";import{I as c}from"./index-Ta3Hx-DT.js";import{k as d,r as m,c as v,f as p,w as h,b as f,P as b,Q as k,j as g,Z as w,W as C,S as _,a0 as y,$ as V,a4 as j}from"./vue-vendor-BAnrfl1G.js";import{F as B}from"./index-CKYQBzIq.js";import{F as x}from"./index-7Dn5DELO.js";const U={class:"sdkwork-user-profile"},D={key:1,class:"avatar-placeholder"},S={class:"user-info"},I={class:"user-name"},M={class:"user-id"},$={class:"action-buttons"},z={class:"button-group"},F={class:"button-group"},N={style:{margin:"16px"}},Q=n(d({__name:"sdkwork-user-profile",props:{userData:{},editable:{type:Boolean,default:!0},showStats:{type:Boolean,default:!0}},emits:["update:user","basic-info-change","settings-change","logout"],setup(n,{emit:d}){const Q=n,T=d,W=m(!1),q=v({name:"",phone:"",email:"",location:"",bio:""}),A=a(),E=p(()=>{const e=A.userSettings?.theme||"auto";return"auto"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e});h(E,e=>{O(e)}),f(()=>{O(E.value)});const O=e=>{const a=document.querySelector(".sdkwork-user-profile");a&&a.setAttribute("data-theme",e)},P=p(()=>Q.userData?.profile||{id:"",name:"",phone:"",email:"",location:"",bio:"",avatar:""}),Z=p(()=>Q.userData?.stats||{}),G=p(()=>Q.userData?.settings||{language:"zh-CN",notifications:{enabled:!0}}),H=e=>{const a=new Date(e),l=(new Date).getTime()-a.getTime(),t=Math.floor(l/6e4),o=Math.floor(t/60),s=Math.floor(o/24);return s>0?`${s}天前`:o>0?`${o}小时前`:t>0?`${t}分钟前`:"刚刚"},J=()=>{Q.editable&&o("头像编辑功能开发中")},K=()=>{Q.editable&&(Object.assign(q,P.value),W.value=!0)},L=()=>{Q.editable&&s({title:"修改手机号",message:"请输入新的手机号码",showCancelButton:!0,beforeClose:e=>{"confirm"===e&&o("手机号修改成功")}})},R=()=>{Q.editable&&s({title:"修改邮箱",message:"请输入新的邮箱地址",showCancelButton:!0,beforeClose:e=>{"confirm"===e&&o("邮箱修改成功")}})},X=()=>{Q.editable&&s({title:"修改位置",message:"请输入新的位置信息",showCancelButton:!0,beforeClose:e=>{"confirm"===e&&o("位置修改成功")}})},Y=()=>{s({title:"通知设置",message:"通知设置功能开发中",showCancelButton:!1})},ee=()=>{s({title:"隐私设置",message:"隐私设置功能开发中",showCancelButton:!1})},ae=()=>{s({title:"语言设置",message:"语言设置功能开发中",showCancelButton:!1})},le=()=>{T("basic-info-change",{...q}),W.value=!1,o("个人信息更新成功")},te=()=>{T("basic-info-change",{...P.value}),o("修改已保存")},oe=async e=>{s({title:"退出登录",message:"确定要退出登录吗？",showCancelButton:!0,confirmButtonColor:"#ee0a24",beforeClose:async a=>{if("confirm"===a)try{const a=i();return await a.logout(e),T("logout"),o("已退出登录"),!0}catch(l){return o("退出登录失败，请重试"),!1}return!0}})};return(a,o)=>{const s=c,i=l,d=u,m=r,v=t,p=x,h=B,f=e;return k(),b("div",U,[g(m,{class:"user-card"},{default:y(()=>[g(d,{center:""},{icon:y(()=>{return[_("div",{class:"avatar-container",onClick:J},[P.value?.avatar?(k(),w(s,{key:0,src:P.value.avatar,width:"60",height:"60",round:"",fit:"cover"},null,8,["src"])):(k(),b("div",D,V((e=P.value?.name||"用户",e.slice(0,2).toUpperCase())),1))])];var e}),title:y(()=>[_("div",S,[_("div",I,V(P.value?.name||"未设置用户名"),1),_("div",M,"ID: "+V(P.value?.id||"未设置"),1)])]),"right-icon":y(()=>[g(i,{name:"edit",onClick:K})]),_:1}),P.value?.bio?(k(),w(d,{key:0,title:P.value.bio,label:"个人简介"},null,8,["title"])):C("",!0)]),_:1}),g(m,{title:"基本信息"},{default:y(()=>[g(d,{title:"手机号",value:P.value?.phone||"未设置","is-link":"",onClick:L},null,8,["value"]),g(d,{title:"邮箱",value:P.value?.email||"未设置","is-link":"",onClick:R},null,8,["value"]),g(d,{title:"位置",value:P.value?.location||"未设置","is-link":"",onClick:X},null,8,["value"])]),_:1}),g(m,{title:"设置"},{default:y(()=>{return[g(d,{title:"通知设置","is-link":"",onClick:Y}),g(d,{title:"隐私设置","is-link":"",onClick:ee}),g(d,{title:"语言设置",value:(e=G.value.language,{"zh-CN":"简体中文","en-US":"English"}[e]||e),"is-link":"",onClick:ae},null,8,["value"])];var e}),_:1}),n.showStats?(k(),w(m,{key:0,title:"统计信息"},{default:y(()=>[g(d,{title:"对话数量",value:Z.value.total_conversations||0},null,8,["value"]),g(d,{title:"消息数量",value:Z.value.total_messages||0},null,8,["value"]),g(d,{title:"设备数量",value:Z.value.total_devices||0},null,8,["value"]),g(d,{title:"智能体数量",value:Z.value.total_agents||0},null,8,["value"]),Z.value.last_active?(k(),w(d,{key:0,title:"最后活跃",value:H(Z.value.last_active)},null,8,["value"])):C("",!0)]),_:1})):C("",!0),_("div",$,[_("div",z,[g(v,{round:"",block:"",type:"primary",onClick:te,class:"save-btn"},{default:y(()=>[...o[6]||(o[6]=[j("保存修改",-1)])]),_:1})]),_("div",F,[g(v,{round:"",block:"",type:"default",onClick:oe,class:"logout-btn"},{default:y(()=>[...o[7]||(o[7]=[j("退出登录",-1)])]),_:1})])]),g(f,{show:W.value,"onUpdate:show":o[5]||(o[5]=e=>W.value=e),position:"bottom",round:""},{default:y(()=>[g(h,{onSubmit:le},{default:y(()=>[g(m,null,{default:y(()=>[g(p,{modelValue:q.name,"onUpdate:modelValue":o[0]||(o[0]=e=>q.name=e),label:"姓名",placeholder:"请输入姓名"},null,8,["modelValue"]),g(p,{modelValue:q.phone,"onUpdate:modelValue":o[1]||(o[1]=e=>q.phone=e),label:"手机号",placeholder:"请输入手机号",type:"tel"},null,8,["modelValue"]),g(p,{modelValue:q.email,"onUpdate:modelValue":o[2]||(o[2]=e=>q.email=e),label:"邮箱",placeholder:"请输入邮箱",type:"email"},null,8,["modelValue"]),g(p,{modelValue:q.location,"onUpdate:modelValue":o[3]||(o[3]=e=>q.location=e),label:"位置",placeholder:"请输入位置"},null,8,["modelValue"]),g(p,{modelValue:q.bio,"onUpdate:modelValue":o[4]||(o[4]=e=>q.bio=e),label:"个人简介",placeholder:"请输入个人简介",type:"textarea",rows:"2"},null,8,["modelValue"])]),_:1}),_("div",N,[g(v,{round:"",block:"",type:"primary","native-type":"submit"},{default:y(()=>[...o[8]||(o[8]=[j("保存",-1)])]),_:1})])]),_:1})]),_:1},8,["show"])])}}}),[["__scopeId","data-v-b7033e10"]]);export{Q as _};
