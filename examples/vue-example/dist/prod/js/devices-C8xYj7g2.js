import{a as e,_ as t}from"./sdkwork-col-DBsgH490.js";import{k as a,f as s,P as i,Q as o,V as l,R as d,S as c,W as r,j as n,a0 as m,$ as v,a1 as p,a4 as u,r as k,U as f,O as h,Z as w}from"./vue-vendor-CnVaDBlt.js";import{S as _}from"./sdkwork-page-container-BVbK78Br.js";import{I as y,B as b,_ as g,L as S,s as j}from"./index-Cw3XK0oB.js";import{E as z}from"./index-DB8XvqDx.js";import{S as B}from"./sdkwork-api-list-Cts-jFj-.js";/* empty css              */import{I}from"./index-BA8-zepc.js";import{b as x}from"./route-block-B_A1xBdJ.js";import"./utils-vendor-WEzSe-CR.js";import"./use-id-CkVbEcjv.js";import"./shared-Bto_oBGe.js";import"./sdkwork-search-bar-DHa8hmn8.js";import"./sdkwork-icon-5GoI5WlJ.js";import"./ListItem-B4uOKkVc.js";const C={class:"sdkwork-device-item__avatar"},L={class:"sdkwork-device-item__avatar-placeholder"},D={class:"sdkwork-device-item__content"},M={class:"sdkwork-device-item__header"},U={class:"sdkwork-device-item__name"},$={class:"sdkwork-device-item__time"},F={class:"sdkwork-device-item__info"},E={class:"sdkwork-device-item__location"},N={key:0,class:"sdkwork-device-item__sensor"},O={key:1,class:"sdkwork-device-item__sensor"},P={class:"sdkwork-device-item__actions"},R={key:0,class:"sdkwork-device-item__selected-indicator"},K=g(a({__name:"sdkwork-device-item",props:{device:{},isSelected:{type:Boolean,default:!1},clickable:{type:Boolean,default:!0},showBorderBottom:{type:Boolean,default:!0},customStyle:{},themeMode:{default:"auto"}},emits:["click-item","select-item"],setup(e,{expose:t,emit:a}){const k=e,f=a,h=s(()=>"dark"===k.themeMode||"light"!==k.themeMode&&(!("undefined"==typeof window||!window.matchMedia)&&window.matchMedia("(prefers-color-scheme: dark)").matches)),w=s(()=>h.value?"sdkwork-device-item--dark":"sdkwork-device-item--light"),_=s(()=>({...k.customStyle,cursor:k.clickable?"pointer":"default"})),g=e=>({online:"控制",offline:"重连",error:"修复"}[e]||"查看"),S=e=>{k.clickable&&(f("click-item",k.device),f("select-item",k.device))},j=()=>{};return t({getDevice:()=>k.device,isSelected:()=>k.isSelected}),(t,a)=>{const s=y,k=I,f=b;return o(),i("div",{class:d(["sdkwork-device-item",[{"sdkwork-device-item--selected":e.isSelected,"sdkwork-device-item--clickable":e.clickable,"sdkwork-device-item--bordered":e.showBorderBottom},w.value]]),style:l(_.value),onClick:S},[c("div",C,[n(k,{src:e.device.avatar,width:"48",height:"48",radius:"8",fit:"cover"},{error:m(()=>{return[c("div",L,[n(s,{name:(t=e.device.type,{"air-conditioner":"air-conditioner","door-lock":"lock",light:"bulb-o",sensor:"bar-chart-o",camera:"video-o",default:"setting-o"}[t]||"setting-o"),size:"20"},null,8,["name"])])];var t}),_:1},8,["src"]),c("div",{class:d(["sdkwork-device-item__status",e.device.status])},null,2)]),c("div",D,[c("div",M,[c("div",U,v(e.device.name),1),c("div",$,v(e.device.lastUpdate),1)]),c("div",F,[c("div",E,[n(s,{name:"location-o",size:"12"}),c("span",null,v(e.device.location||"未知位置"),1)]),void 0!==e.device.temperature?(o(),i("div",N,[n(s,{name:"fire-o",size:"12"}),c("span",null,v(e.device.temperature)+"°C",1)])):r("",!0),void 0!==e.device.humidity?(o(),i("div",O,[n(s,{name:"water-o",size:"12"}),c("span",null,v(e.device.humidity)+"%",1)])):r("",!0)])]),c("div",P,[n(f,{type:(h=e.device.status,{online:"success",offline:"warning",error:"danger"}[h]||"default"),onClick:p(j,["stop"])},{default:m(()=>[u(v(g(e.device.status)),1)]),_:1},8,["type"])]),e.isSelected?(o(),i("div",R,[n(s,{name:"success",size:"16"})])):r("",!0)],6);var h}}}),[["__scopeId","data-v-1082ac8f"]]),q={class:"sdkwork-device-list"},Q=a({__name:"sdkwork-device-list",props:{api:{},params:{default:()=>({})},selectable:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},pageSize:{default:10},deviceKey:{default:"id"},deviceNameField:{default:"name"},deviceDescriptionField:{default:"description"},themeMode:{default:"auto"}},emits:["select","delete","click","search","load"],setup(e,{expose:t,emit:a}){const l=e,d=a,r=k(),v=s(()=>({pageNumber:0,pageSize:l.pageSize,filters:l.params})),p=e=>{d("select",e)},h=e=>{d("delete",e)},w=e=>{d("search",e)},_=e=>{d("load",e)};return t({refresh:()=>r.value?.refresh(),loadMore:()=>r.value?.loadMore(),getDevices:()=>r.value?.getData()||[],getSelectedDevices:()=>r.value?.getSelectedItems()||[],clearSelected:()=>r.value?.clearSelected(),setSelectedDevices:e=>r.value?.setSelectedItems(e)}),(t,a)=>{const s=z,l=S;return o(),i("div",q,[n(B,{api:e.api,params:v.value,selectable:e.selectable,deletable:e.deletable,searchable:e.searchable,"page-size":e.pageSize,"item-key":e.deviceKey,"item-title-field":e.deviceNameField,"item-description-field":e.deviceDescriptionField,"left-spacing":0,"right-spacing":0,onSelect:p,onDelete:h,onSearch:w,onLoad:_,ref_key:"apiListRef",ref:r,showBorderBottom:"",borderBottomLeftOffset:70},{default:m(({item:e,index:t,selected:s})=>[n(K,{device:e,"is-selected":s,"show-border-bottom":!0,onClickItem:a[0]||(a[0]=e=>{(e=>{d("click",e)})(e)}),onSelectItem:a[1]||(a[1]=e=>{(e=>{d("select",e)})(e)})},null,8,["device","is-selected"])]),empty:m(()=>[f(t.$slots,"empty",{},()=>[n(s,{description:"暂无设备",image:"search"},{description:m(()=>[...a[2]||(a[2]=[c("div",{class:"empty-description"},[c("p",null,"暂时没有设备"),c("p",{class:"empty-tip"},"您可以添加新设备或调整搜索条件")],-1)])]),_:1})],!0)]),loading:m(()=>[f(t.$slots,"loading",{},()=>[n(l,{size:"24px",vertical:""},{default:m(()=>[...a[3]||(a[3]=[u("加载设备数据...",-1)])]),_:1})],!0)]),header:m(()=>[f(t.$slots,"header",{},void 0,!0)]),footer:m(()=>[f(t.$slots,"footer",{},void 0,!0)]),_:3},8,["api","params","selectable","deletable","searchable","page-size","item-key","item-title-field","item-description-field"])])}}}),T=g(Q,[["__scopeId","data-v-9e866b52"]]),V={class:"stats-section"},W={class:"stat-card online"},Z={class:"stat-number"},A={class:"stat-card offline"},G={class:"stat-number"},H={class:"stat-card total"},J={class:"stat-number"},X=a({__name:"devices",setup(a){const i=k(""),l=k([]),d=h(),r=s(()=>({keyword:i.value,category:"all"})),p=async e=>{await new Promise(e=>setTimeout(e,500));const t=[{id:"1",name:"智能空调",type:"air-conditioner",status:"online",avatar:"https://via.placeholder.com/40",lastUpdate:"2分钟前",location:"客厅",temperature:25,humidity:45},{id:"2",name:"智能门锁",type:"door-lock",status:"online",avatar:"https://via.placeholder.com/40",lastUpdate:"5分钟前",location:"大门"},{id:"3",name:"智能灯泡",type:"light",status:"offline",avatar:"https://via.placeholder.com/40",lastUpdate:"1小时前",location:"卧室"},{id:"4",name:"温度传感器",type:"sensor",status:"online",avatar:"https://via.placeholder.com/40",lastUpdate:"刚刚",location:"书房",temperature:23,humidity:50},{id:"5",name:"智能摄像头",type:"camera",status:"error",avatar:"https://via.placeholder.com/40",lastUpdate:"30分钟前",location:"走廊"}];let a=t;return e.keyword&&(a=t.filter(t=>t.name.toLowerCase().includes(e.keyword.toLowerCase())||t.location?.toLowerCase().includes(e.keyword.toLowerCase()))),{content:a,totalElements:a.length,totalPages:1,number:0,last:!0,size:e.size||10,first:!0,numberOfElements:a.length,empty:0===a.length}},u=s(()=>3),f=s(()=>1),y=s(()=>5),b=e=>{l.value=[e]},g=e=>{d.push(`/devices/${e.id}`)},S=e=>{i.value=e},z=()=>{j("刷新成功")};return(a,s)=>{const l=t,d=e;return o(),w(_,{"safe-area":"",scrollable:"","theme-mode":"auto"},{default:m(()=>[n(T,{api:p,params:r.value,"search-keyword":i.value,searchable:!1,selectable:"","theme-mode":"auto",onSelect:b,onClick:g,onSearch:S,onRefresh:z},{header:m(()=>[c("div",V,[n(d,{gutter:"12"},{default:m(()=>[n(l,{span:"8"},{default:m(()=>[c("div",W,[c("div",Z,v(u.value),1),s[0]||(s[0]=c("div",{class:"stat-label"},"在线",-1))])]),_:1}),n(l,{span:"8"},{default:m(()=>[c("div",A,[c("div",G,v(f.value),1),s[1]||(s[1]=c("div",{class:"stat-label"},"离线",-1))])]),_:1}),n(l,{span:"8"},{default:m(()=>[c("div",H,[c("div",J,v(y.value),1),s[2]||(s[2]=c("div",{class:"stat-label"},"总数",-1))])]),_:1})]),_:1})])]),_:1},8,["params","search-keyword"])]),_:1})}}});"function"==typeof x&&x(X);const Y=g(X,[["__scopeId","data-v-912db5f3"]]);export{Y as default};
