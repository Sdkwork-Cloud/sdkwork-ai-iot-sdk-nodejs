import{S as e}from"./sdkwork-page-container-CwOtSFXl.js";import{B as t,s as a,f as l,_ as s}from"./index-ov3QC--c.js";import{L as i}from"./index-CeKCG7hV.js";import{E as o}from"./index-08Es9nZT.js";/* empty css              */import{a as r,D as n}from"./index-DxR9kwvE.js";/* empty css              */import{N as u}from"./index-TIIvaXUA.js";import{k as d,a as m,f as c,o as v,Z as p,a0 as f,Q as h,S as g,P as k,j as y,W as x,a4 as w,F as j,Y as D,$ as b,a1 as _,O as C}from"./vue-vendor-BOogp7Xw.js";import"./utils-vendor-WEzSe-CR.js";import"./use-tab-status-C8BruCQu.js";import"./use-id-Dx2a3-Lt.js";import"./index-D5eJ2EhQ.js";const V={class:"history-container"},$={class:"history-toolbar"},I={class:"toolbar-actions"},L={key:1,class:"history-list"},M=["onClick"],T={class:"item-content"},U={class:"item-thumb"},z=["src","alt"],A={class:"item-info"},B={class:"item-title"},O={class:"item-desc"},P={class:"item-meta"},S={class:"item-type"},E={class:"item-time"},F=s(d({__name:"history",setup(s){const d=C(),F=m("all"),H=m("all"),N=[{text:"全部类型",value:"all"},{text:"作品",value:"work"},{text:"智能体",value:"agent"},{text:"声音",value:"voice"},{text:"角色",value:"character"}],Q=[{text:"全部时间",value:"all"},{text:"今天",value:"today"},{text:"最近7天",value:"week"},{text:"最近30天",value:"month"}],W=m([]),Y=m(!1),Z=m(!1),q=[{id:1,title:"AI绘画作品 - 山水风景",description:"使用AI技术创作的山水风景画",thumb:"/images/placeholder.jpg",type:"work",time:new Date(Date.now()-72e5)},{id:2,title:"智能语音助手",description:"多功能智能语音助手应用",thumb:"/images/placeholder.jpg",type:"agent",time:new Date(Date.now()-864e5)},{id:3,title:"自然语音包",description:"高质量自然语音合成包",thumb:"/images/placeholder.jpg",type:"voice",time:new Date(Date.now()-2592e5)}],G=c(()=>{let e=W.value;if("all"!==F.value&&(e=e.filter(e=>e.type===F.value)),"all"!==H.value){const t=new Date,a=new Date;switch(H.value){case"today":a.setHours(0,0,0,0);break;case"week":a.setDate(t.getDate()-7);break;case"month":a.setDate(t.getDate()-30)}e=e.filter(e=>e.time>=a)}return e}),J=e=>{const t=(new Date).getTime()-e.getTime();if(t<36e5){return`${Math.floor(t/6e4)}分钟前`}if(t<864e5){return`${Math.floor(t/36e5)}小时前`}return`${Math.floor(t/864e5)}天前`},K=()=>{Y.value=!0,setTimeout(()=>{W.value.length>=q.length?Z.value=!0:W.value=[...q],Y.value=!1},500)},R=async()=>{try{await l({title:"确认清空",message:"确定要清空所有浏览记录吗？"}),W.value=[],a("浏览记录已清空")}catch{}},X=()=>{d.push("/")};return v(()=>{}),(l,s)=>{const d=u,m=r,c=n,v=t,C=o,q=i,ee=e;return h(),p(ee,{"safe-area":"",scrollable:"","theme-mode":"auto"},{header:f(()=>[y(d,{title:"浏览记录","left-text":"返回","left-arrow":"",onClickLeft:s[0]||(s[0]=e=>l.$router.back())})]),default:f(()=>[g("div",V,[g("div",$,[y(c,null,{default:f(()=>[y(m,{modelValue:F.value,"onUpdate:modelValue":s[1]||(s[1]=e=>F.value=e),options:N},null,8,["modelValue"]),y(m,{modelValue:H.value,"onUpdate:modelValue":s[2]||(s[2]=e=>H.value=e),options:Q},null,8,["modelValue"])]),_:1}),g("div",I,[W.value.length>0?(h(),p(v,{key:0,size:"small",onClick:R},{default:f(()=>[...s[4]||(s[4]=[w(" 清空记录 ",-1)])]),_:1})):x("",!0)])]),0===G.value.length?(h(),p(C,{key:0,image:"search",description:"暂无浏览记录"},{default:f(()=>[y(v,{round:"",type:"primary",onClick:X},{default:f(()=>[...s[5]||(s[5]=[w(" 去浏览内容 ",-1)])]),_:1})]),_:1})):(h(),k("div",L,[y(q,{loading:Y.value,"onUpdate:loading":s[3]||(s[3]=e=>Y.value=e),finished:Z.value,"finished-text":"没有更多了",onLoad:K},{default:f(()=>[(h(!0),k(j,null,D(G.value,e=>{return h(),k("div",{key:e.id,class:"history-item",onClick:t=>(e=>{a(`查看：${e.title}`)})(e)},[g("div",T,[g("div",U,[g("img",{src:e.thumb,alt:e.title},null,8,z)]),g("div",A,[g("div",B,b(e.title),1),g("div",O,b(e.description),1),g("div",P,[g("span",S,b((t=e.type,{work:"作品",agent:"智能体",voice:"声音",character:"角色"}[t]||"未知")),1),g("span",E,b(J(e.time)),1)])])]),y(v,{size:"small",type:"danger",plain:"",onClick:_(t=>{return l=e.id,W.value=W.value.filter(e=>e.id!==l),void a("记录已删除");var l},["stop"])},{default:f(()=>[...s[6]||(s[6]=[w(" 删除 ",-1)])]),_:1},8,["onClick"])],8,M);var t}),128))]),_:1},8,["loading","finished"])]))])]),_:1})}}}),[["__scopeId","data-v-38d85496"]]);export{F as default};
