import{I as e,B as t,_ as a,L as s}from"./index-Cw3XK0oB.js";import{E as l}from"./index-DB8XvqDx.js";import{S as i}from"./sdkwork-api-list-Cts-jFj-.js";/* empty css              *//* empty css              *//* empty css              */import{I as o}from"./index-BA8-zepc.js";import{k as d,f as n,P as c,Q as r,S as m,U as g,j as p,W as u,a0 as f,R as k,a1 as v,$ as b,r as h,b as w,Z as S,a4 as y}from"./vue-vendor-CnVaDBlt.js";import{C as x}from"./index-Duq_L-cI.js";const _={class:"sdkwork-agents-list-item__content"},B={class:"default-agent-item"},z={class:"agent-avatar"},$={class:"avatar-placeholder"},j={key:0,class:"selection-checkbox"},M={class:"agent-info"},C={class:"agent-header"},I={class:"agent-name"},D={class:"agent-description"},L={class:"agent-footer"},A={class:"time-info"},F={class:"time-text"},N={class:"usage-info"},U={class:"count-text"},K={class:"action-section"},R={key:0,class:"delete-section"},T={class:"agent-action"},E=a(d({__name:"sdkwork-agents-list-item",props:{agent:{},index:{},selectable:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},showBorderBottom:{type:Boolean,default:!0},themeMode:{default:"auto"}},emits:["click","select","delete"],setup(a,{expose:s,emit:l}){const i=a,d=l,h=n(()=>"dark"===i.themeMode||"light"!==i.themeMode&&(!("undefined"==typeof window||!window.matchMedia)&&window.matchMedia("(prefers-color-scheme: dark)").matches)),w=n(()=>h.value?"sdkwork-agents-list-item--dark":"sdkwork-agents-list-item--light"),S=e=>{i.selectable&&d("select",i.agent)},y=()=>{i.disabled||(i.selectable?S(i.isSelected):d("click",i.agent))},E=()=>{i.deletable&&d("delete",i.agent)},G=e=>{const t=window.$date.parse(e),a=(new Date).getTime()-t.getTime();return a<6e4?"刚刚更新":a<36e5?`${Math.floor(a/6e4)}分钟前`:a<864e5?`${Math.floor(a/36e5)}小时前`:a<6048e5?`${Math.floor(a/864e5)}天前`:t.toLocaleDateString()};return s({getName:()=>i.agent.name,getDescription:()=>i.agent.description,getUsageCount:()=>i.agent.usageCount,formatLastUpdate:G,isSelected:()=>i.isSelected}),(s,l)=>{const i=e,d=o,n=x,h=t;return r(),c("div",{class:k(["sdkwork-agents-list-item",[{"sdkwork-agents-list-item--selected":a.isSelected,"sdkwork-agents-list-item--selectable":a.selectable,"sdkwork-agents-list-item--deletable":a.deletable,"sdkwork-agents-list-item--disabled":a.disabled,"sdkwork-agents-list-item--border-bottom":a.showBorderBottom},w.value]]),onClick:y},[m("div",_,[g(s.$slots,"default",{agent:a.agent,index:a.index,selected:a.isSelected},()=>[m("div",B,[m("div",z,[p(d,{src:a.agent.faceImage?.url,width:"48",height:"48",radius:"8",fit:"cover",alt:a.agent.name},{error:f(()=>[m("div",$,[p(i,{name:"user-circle-o",size:"24"})])]),_:1},8,["src","alt"]),m("div",{class:k(["status-indicator",`status-${a.agent.status}`])},null,2),a.selectable?(r(),c("div",j,[p(n,{"model-value":a.isSelected,"onUpdate:modelValue":S,onClick:l[0]||(l[0]=v(()=>{},["stop"]))},null,8,["model-value"])])):u("",!0)]),m("div",M,[m("div",C,[m("div",I,b(a.agent.name),1)]),m("div",D,b(a.agent.description||"暂无描述"),1),m("div",L,[m("div",A,[p(i,{name:"clock-o",size:"12"}),m("span",F,b(G(a.agent.updatedAt)),1)]),m("div",N,[p(i,{name:"play-circle",size:"12"}),m("span",U,b(a.agent.usageCount)+"次使用",1)])])]),m("div",K,[a.deletable?(r(),c("div",R,[p(h,{type:"danger",round:"",onClick:v(E,["stop"]),class:"delete-button"},{default:f(()=>[p(i,{name:"delete",size:"14"})]),_:1})])):u("",!0),m("div",T,[p(i,{name:"arrow",size:"16"})])])])],!0)])],2)}}}),[["__scopeId","data-v-7af63f9f"]]),G=a(d({__name:"sdkwork-agent-list",props:{api:{},params:{default:()=>({})},selectable:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},pageSize:{default:10},agentKey:{default:"id"},agentNameField:{default:"name"},agentDescriptionField:{default:"description"}},emits:["select","delete","click","search","load"],setup(e,{expose:t,emit:a}){const o=e,d=a,c=h(),u=h(!1);w(()=>{(()=>{const e=navigator.userAgent.toLowerCase();u.value=/micromessenger/.test(e)})()});const k=n(()=>({pageNumber:0,pageSize:o.pageSize,filters:o.params})),v=e=>{d("select",e)},b=e=>{d("delete",e)},x=e=>{d("search",e)},_=e=>{d("load",e)},B=e=>{d("select",e)},z=e=>{d("click",e)};return t({refresh:()=>c.value?.refresh(),loadMore:()=>c.value?.loadMore(),getAgents:()=>c.value?.getData()||[],getSelectedAgents:()=>c.value?.getSelectedItems()||[],clearSelected:()=>c.value?.clearSelected(),setSelectedAgents:e=>c.value?.setSelectedItems(e)}),(t,a)=>{const o=l,d=s;return r(),S(i,{api:e.api,params:k.value,selectable:e.selectable,deletable:e.deletable,searchable:e.searchable,"page-size":e.pageSize,"item-key":e.agentKey,"item-title-field":e.agentNameField,"item-description-field":e.agentDescriptionField,"left-spacing":0,"right-spacing":0,onSelect:v,onDelete:b,onSearch:x,onLoad:_,ref_key:"apiListRef",ref:c,showBorderBottom:"",borderBottomLeftOffset:70},{default:f(({item:e,index:t,selected:a})=>[p(E,{agent:e,"is-selected":a,"show-border-bottom":!0,onClick:z,onSelect:B},null,8,["agent","is-selected"])]),empty:f(()=>[g(t.$slots,"empty",{},()=>[p(o,{description:"暂无智能体",image:"search"},{description:f(()=>[...a[0]||(a[0]=[m("div",{class:"empty-description"},[m("p",null,"暂时没有智能体"),m("p",{class:"empty-tip"},"您可以创建新的智能体或调整搜索条件")],-1)])]),_:1})],!0)]),loading:f(()=>[g(t.$slots,"loading",{},()=>[p(d,{size:"24px",vertical:""},{default:f(()=>[...a[1]||(a[1]=[y("加载智能体数据...",-1)])]),_:1})],!0)]),header:f(()=>[g(t.$slots,"header",{},void 0,!0)]),footer:f(()=>[g(t.$slots,"footer",{},void 0,!0)]),_:3},8,["api","params","selectable","deletable","searchable","page-size","item-key","item-title-field","item-description-field"])}}}),[["__scopeId","data-v-4cbb9c59"]]);export{G as _};
