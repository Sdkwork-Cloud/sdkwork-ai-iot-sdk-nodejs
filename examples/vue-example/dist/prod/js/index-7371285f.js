import{k as e,r as a,c as l,w as t,j as u,t as s,v as n,q as o,n as i}from"./vue-vendor-a2672387.js";import{k as r,p as d,t as m,n as v,l as c,m as p,a4 as b,a0 as g,ad as h,U as f,ae as w,$ as x,af as S,aQ as V,am as y,w as P}from"./index-5affcab4.js";const[B,I]=r("stepper"),M=(e,a)=>String(e)===String(a);const T=P(e({name:B,props:{min:d(1),max:d(1/0),name:d(""),step:d(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:m,showMinus:m,showInput:m,longPress:m,autoFixed:m,allowEmpty:Boolean,modelValue:v,inputWidth:v,buttonSize:v,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:d(1),decimalLength:v},emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(e,{emit:r}){const d=(a,l=!0)=>{const{min:t,max:u,allowEmpty:s,decimalLength:n}=e;return s&&""===a||(a=""===(a=h(String(a),!e.integer))?0:+a,a=Number.isNaN(a)?+t:a,a=l?Math.max(Math.min(+u,a),+t):a,f(n)&&(a=a.toFixed(+n))),a};let m;const v=a(),P=a((()=>{var a;const l=null!=(a=e.modelValue)?a:e.defaultValue,t=d(l);return M(t,e.modelValue)||r("update:modelValue",t),t})()),B=l(()=>e.disabled||e.disableMinus||+P.value<=+e.min),T=l(()=>e.disabled||e.disablePlus||+P.value>=+e.max),C=l(()=>({width:c(e.inputWidth),height:c(e.buttonSize)})),F=l(()=>p(e.buttonSize)),L=a=>{e.beforeChange?S(e.beforeChange,{args:[a],done(){P.value=a}}):P.value=a},j=()=>{if("plus"===m&&T.value||"minus"===m&&B.value)return void r("overlimit",m);const a="minus"===m?-e.step:+e.step,l=d(V(+P.value,a));L(l),r(m)},k=a=>{const l=a.target,{value:t}=l,{decimalLength:u}=e;let s=h(String(t),!e.integer);if(f(u)&&s.includes(".")){const e=s.split(".");s=`${e[0]}.${e[1].slice(0,+u)}`}e.beforeChange?l.value=String(P.value):M(t,s)||(l.value=s);const n=s===String(+s);L(n?+s:s)},z=a=>{var l;e.disableInput?null==(l=v.value)||l.blur():r("focus",a)},N=a=>{const l=a.target,t=d(l.value,e.autoFixed);l.value=String(t),P.value=t,i(()=>{r("blur",a),w()})};let $,E;const W=()=>{E=setTimeout(()=>{j(),W()},200)},q=a=>{e.longPress&&(clearTimeout(E),$&&x(a))},Q=a=>{e.disableInput&&x(a)},U=a=>({onClick:e=>{x(e),m=a,j()},onTouchstartPassive:()=>{m=a,e.longPress&&($=!1,clearTimeout(E),E=setTimeout(()=>{$=!0,j(),W()},y))},onTouchend:q,onTouchcancel:q});return t(()=>[e.max,e.min,e.integer,e.decimalLength],()=>{const e=d(P.value);M(e,P.value)||(P.value=e)}),t(()=>e.modelValue,e=>{M(e,P.value)||(P.value=d(e))}),t(P,a=>{r("update:modelValue",a),r("change",a,{name:e.name})}),b(()=>e.modelValue),()=>u("div",{role:"group",class:I([e.theme])},[s(u("button",o({type:"button",style:F.value,class:[I("minus",{disabled:B.value}),{[g]:!B.value}],"aria-disabled":B.value||void 0},U("minus")),null),[[n,e.showMinus]]),s(u("input",{ref:v,type:e.integer?"tel":"text",role:"spinbutton",class:I("input"),value:P.value,style:C.value,disabled:e.disabled,readonly:e.disableInput,inputmode:e.integer?"numeric":"decimal",placeholder:e.placeholder,autocomplete:"off","aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":P.value,onBlur:N,onInput:k,onFocus:z,onMousedown:Q},null),[[n,e.showInput]]),s(u("button",o({type:"button",style:F.value,class:[I("plus",{disabled:T.value}),{[g]:!T.value}],"aria-disabled":T.value||void 0},U("plus")),null),[[n,e.showPlus]])])}}));export{T as S};
