import{S as e}from"./sdkwork-page-container-DqaCEpSi.js";import{B as t,s as a,f as l,_ as i}from"./index-mGUiS-yG.js";import{L as s}from"./index-71u4jA4R.js";import{E as o}from"./index-BAHb5bKQ.js";/* empty css              */import{a as r,D as n}from"./index-8DY8OKwz.js";/* empty css              */import{N as u}from"./index-CXL3Zo3T.js";import{k as d,a as m,f as c,o as v,Z as p,a0 as f,Q as h,S as g,P as k,j as y,W as x,a4 as w,F as j,Y as D,$ as b,a1 as _,O as C}from"./vue-vendor-B1RsE4Tz.js";import"./utils-vendor-WEzSe-CR.js";import"sdkwork-ai-iot-sdk";import"./use-tab-status-CHnze7eF.js";import"./use-id-CKFvKg0a.js";import"./index-88IoPNO4.js";const V={class:"history-container"},$={class:"history-toolbar"},I={class:"toolbar-actions"},L={key:1,class:"history-list"},M=["onClick"],T={class:"item-content"},U={class:"item-thumb"},z=["src","alt"],A={class:"item-info"},E={class:"item-title"},Q={class:"item-desc"},S={class:"item-meta"},q={class:"item-type"},B={class:"item-time"},F=i(d({__name:"history",setup(i){const d=C(),F=m("all"),H=m("all"),N=[{text:"全部类型",value:"all"},{text:"作品",value:"work"},{text:"智能体",value:"agent"},{text:"声音",value:"voice"},{text:"角色",value:"character"}],O=[{text:"全部时间",value:"all"},{text:"今天",value:"today"},{text:"最近7天",value:"week"},{text:"最近30天",value:"month"}],P=m([]),R=m(!1),W=m(!1),Y=[{id:1,title:"AI绘画作品 - 山水风景",description:"使用AI技术创作的山水风景画",thumb:"/images/placeholder.jpg",type:"work",time:new Date(Date.now()-72e5)},{id:2,title:"智能语音助手",description:"多功能智能语音助手应用",thumb:"/images/placeholder.jpg",type:"agent",time:new Date(Date.now()-864e5)},{id:3,title:"自然语音包",description:"高质量自然语音合成包",thumb:"/images/placeholder.jpg",type:"voice",time:new Date(Date.now()-2592e5)}],Z=c(()=>{let e=P.value;if("all"!==F.value&&(e=e.filter(e=>e.type===F.value)),"all"!==H.value){const t=new Date,a=new Date;switch(H.value){case"today":a.setHours(0,0,0,0);break;case"week":a.setDate(t.getDate()-7);break;case"month":a.setDate(t.getDate()-30)}e=e.filter(e=>e.time>=a)}return e}),G=e=>{const t=(new Date).getTime()-e.getTime();if(t<36e5){return`${Math.floor(t/6e4)}分钟前`}if(t<864e5){return`${Math.floor(t/36e5)}小时前`}return`${Math.floor(t/864e5)}天前`},J=()=>{R.value=!0,setTimeout(()=>{P.value.length>=Y.length?W.value=!0:P.value=[...Y],R.value=!1},500)},K=async()=>{try{await l({title:"确认清空",message:"确定要清空所有浏览记录吗？"}),P.value=[],a("浏览记录已清空")}catch{}},X=()=>{d.push("/")};return v(()=>{}),(l,i)=>{const d=u,m=r,c=n,v=t,C=o,Y=s,ee=e;return h(),p(ee,{"safe-area":"",scrollable:"","theme-mode":"auto"},{header:f(()=>[y(d,{title:"浏览记录","left-text":"返回","left-arrow":"",onClickLeft:i[0]||(i[0]=e=>l.$router.back())})]),default:f(()=>[g("div",V,[g("div",$,[y(c,null,{default:f(()=>[y(m,{modelValue:F.value,"onUpdate:modelValue":i[1]||(i[1]=e=>F.value=e),options:N},null,8,["modelValue"]),y(m,{modelValue:H.value,"onUpdate:modelValue":i[2]||(i[2]=e=>H.value=e),options:O},null,8,["modelValue"])]),_:1}),g("div",I,[P.value.length>0?(h(),p(v,{key:0,size:"small",onClick:K},{default:f(()=>[...i[4]||(i[4]=[w(" 清空记录 ",-1)])]),_:1})):x("",!0)])]),0===Z.value.length?(h(),p(C,{key:0,image:"search",description:"暂无浏览记录"},{default:f(()=>[y(v,{round:"",type:"primary",onClick:X},{default:f(()=>[...i[5]||(i[5]=[w(" 去浏览内容 ",-1)])]),_:1})]),_:1})):(h(),k("div",L,[y(Y,{loading:R.value,"onUpdate:loading":i[3]||(i[3]=e=>R.value=e),finished:W.value,"finished-text":"没有更多了",onLoad:J},{default:f(()=>[(h(!0),k(j,null,D(Z.value,e=>{return h(),k("div",{key:e.id,class:"history-item",onClick:t=>(e=>{a(`查看：${e.title}`)})(e)},[g("div",T,[g("div",U,[g("img",{src:e.thumb,alt:e.title},null,8,z)]),g("div",A,[g("div",E,b(e.title),1),g("div",Q,b(e.description),1),g("div",S,[g("span",q,b((t=e.type,{work:"作品",agent:"智能体",voice:"声音",character:"角色"}[t]||"未知")),1),g("span",B,b(G(e.time)),1)])])]),y(v,{size:"small",type:"danger",plain:"",onClick:_(t=>{return l=e.id,P.value=P.value.filter(e=>e.id!==l),void a("记录已删除");var l},["stop"])},{default:f(()=>[...i[6]||(i[6]=[w(" 删除 ",-1)])]),_:1},8,["onClick"])],8,M);var t}),128))]),_:1},8,["loading","finished"])]))])]),_:1})}}}),[["__scopeId","data-v-38d85496"]]);export{F as default};
