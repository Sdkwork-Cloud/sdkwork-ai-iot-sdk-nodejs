import{k as e,O as a,r as s,c as o,f as l,b as r,o as t,P as n,Q as i,S as c,F as d,Y as u,V as m,j as p,u as g,$ as v,a0 as h,a4 as f,R as b}from"./vue-vendor-CnVaDBlt.js";import{j as k,d as w,B as y,L as M,k as x,_}from"./index-CJyFKuKg.js";import{F as V}from"./index-Bn4nl9Oo.js";import{C as B}from"./index-DsZzsfux.js";import{F as $}from"./index-DQY9W-60.js";const j={class:"tech-background"},z={class:"tech-particles-container"},A={class:"login-main-container"},D={class:"brand-section"},I={class:"brand-content"},R={class:"brand-logo-animated"},S={class:"logo-icon"},U={class:"tech-features"},q={class:"form-section"},C={class:"form-container"},F={class:"input-group"},Z={class:"input-icon"},L={class:"input-group"},T={class:"input-icon"},E={class:"form-options"},K={class:"form-actions"},O={class:"button-content"},P={class:"register-section"},Q=_(e({__name:"sdkwork-auth-login",props:{redirectUrl:{default:"/"},autoRedirect:{type:Boolean,default:!0},forceDarkMode:{type:Boolean,default:!1},compactMode:{type:Boolean,default:!1}},emits:["login-success","login-failed","forgot-password","register-click","theme-change"],setup(e,{expose:_,emit:Q}){const W=e,Y=Q,G=a(),H=k(),J=s(!1),N=s(!1),X=s(!1),ee=s(),ae=o({username:"",password:"",rememberMe:!1}),se=["智能数据分析","实时监控","AI预测","安全可靠"],oe={username:[{required:!0,message:"请输入用户名、邮箱或手机号",trigger:"onBlur"},{validator:e=>/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)||/^[a-zA-Z0-9_\u4e00-\u9fa5]{2,20}$/.test(e)||/^1[3-9]\d{9}$/.test(e),message:"请输入有效的用户名、邮箱或手机号",trigger:"onBlur"}],password:[{required:!0,message:"请输入密码",trigger:"onBlur"},{validator:e=>e.length>=6,message:"密码至少6个字符",trigger:"onBlur"}]},le=l(()=>ae.username.trim().length>0&&ae.password.length>=6),re=e=>{const a=4*Math.random()+1;return{width:`${a}px`,height:`${a}px`,animationDuration:`${6*Math.random()+4}s`,animationDelay:`${5*Math.random()}s`,left:100*Math.random()+"%",top:100*Math.random()+"%"}},te=()=>{W.forceDarkMode?N.value=!0:(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?N.value=!0:N.value=!1,Y("theme-change",N.value))};let ne=null;r(()=>{te(),window.matchMedia&&(ne=window.matchMedia("(prefers-color-scheme: dark)"),ne.addEventListener("change",te))}),t(()=>{ne&&ne.removeEventListener("change",te)});const ie=async()=>{try{J.value=!0;const e={username:ae.username.trim(),password:ae.password},a=await H.login(e);Y("login-success",a),x({type:"success",message:"登录成功",background:N.value?"var(--tech-bg-primary)":"#fff",color:(N.value,"var(--tech-text-primary)")}),W.autoRedirect&&setTimeout(()=>{G.push(W.redirectUrl)},1e3)}catch(e){Y("login-failed",e),x({type:"danger",message:"登录失败，请检查用户名和密码",background:N.value?"var(--tech-bg-primary)":"#fff",color:(N.value,"var(--tech-text-primary)")})}finally{J.value=!1}},ce=()=>{Y("forgot-password"),G.push("/auth/forgot-password")},de=()=>{Y("register-click"),G.push("/auth/register")};return _({focus:()=>{const e=document.querySelector(".modern-input input");e?.focus()},clear:()=>{ae.username="",ae.password="",ae.rememberMe=!1},toggleTheme:()=>{N.value=!N.value,Y("theme-change",N.value)},validate:()=>ee.value?.validate()}),(a,s)=>(i(),n("div",{class:b(["sdkwork-auth-login",{"dark-mode":N.value,"compact-mode":e.compactMode}])},[c("div",j,[s[4]||(s[4]=c("div",{class:"tech-grid-lines"},null,-1)),c("div",z,[(i(),n(d,null,u(20,e=>c("div",{class:"particle",key:e,style:m(re())},null,4)),64))]),s[5]||(s[5]=c("div",{class:"tech-glow-effect"},null,-1))]),c("div",A,[c("div",D,[c("div",I,[c("div",R,[c("div",S,[p(g(w),{icon:"ph:brain",class:"brain-icon"}),s[6]||(s[6]=c("div",{class:"logo-glow"},null,-1))]),s[7]||(s[7]=c("h1",{class:"brand-title-main"},"SDKWork AI",-1)),s[8]||(s[8]=c("p",{class:"brand-subtitle-main"},"智能物联网平台",-1))]),c("div",U,[(i(),n(d,null,u(se,e=>c("div",{class:"feature-item",key:e},[p(g(w),{icon:"ph:check-circle",class:"feature-icon"}),c("span",null,v(e),1)])),64))])])]),c("div",q,[c("div",C,[s[13]||(s[13]=c("div",{class:"form-header"},[c("h2",{class:"form-title"},"欢迎回来"),c("p",{class:"form-subtitle"},"登录您的AIoT账户")],-1)),p(g($),{ref_key:"loginFormRef",ref:ee,model:ae,rules:oe,onSubmit:ie,class:"modern-login-form"},{default:h(()=>[c("div",F,[c("div",Z,[p(g(w),{icon:"ph:user",class:"input-icon-svg"})]),p(g(V),{modelValue:ae.username,"onUpdate:modelValue":s[0]||(s[0]=e=>ae.username=e),name:"username",placeholder:"用户名或邮箱",rules:oe.username,border:!1,class:"modern-input"},null,8,["modelValue","rules"])]),c("div",L,[c("div",T,[p(g(w),{icon:"ph:lock",class:"input-icon-svg"})]),p(g(V),{modelValue:ae.password,"onUpdate:modelValue":s[2]||(s[2]=e=>ae.password=e),name:"password",type:X.value?"text":"password",placeholder:"密码",rules:oe.password,border:!1,class:"modern-input"},{button:h(()=>[c("div",{class:"password-toggle",onClick:s[1]||(s[1]=e=>X.value=!X.value)},[p(g(w),{icon:X.value?"ph:eye-slash":"ph:eye",class:"toggle-icon"},null,8,["icon"])])]),_:1},8,["modelValue","type","rules"])]),c("div",E,[p(g(B),{modelValue:ae.rememberMe,"onUpdate:modelValue":s[3]||(s[3]=e=>ae.rememberMe=e),shape:"square",class:"modern-checkbox"},{default:h(()=>[...s[9]||(s[9]=[c("span",{class:"checkbox-label"},"记住登录状态",-1)])]),_:1},8,["modelValue"]),p(g(y),{type:"default",size:"small",link:"",onClick:ce,class:"forgot-password-link"},{default:h(()=>[...s[10]||(s[10]=[f(" 忘记密码？ ",-1)])]),_:1})]),c("div",K,[p(g(y),{round:"",block:"",type:"primary","native-type":"submit",loading:J.value,disabled:!le.value,"loading-text":"登录中...",class:"modern-login-button"},{loading:h(()=>[p(g(M),{type:"spinner",size:"20px"})]),default:h(()=>[c("span",O,[p(g(w),{icon:"ph:sign-in",class:"button-icon"}),s[11]||(s[11]=c("span",null,"登录账户",-1))])]),_:1},8,["loading","disabled"])])]),_:1},8,["model"]),c("div",P,[p(g(y),{type:"default",size:"large",onClick:de,class:"register-button"},{default:h(()=>[p(g(w),{icon:"ph:user-plus",class:"register-icon"}),s[12]||(s[12]=c("span",null,"创建新账户",-1))]),_:1})])])])])],2))}}),[["__scopeId","data-v-ffa84431"]]);export{Q as S};
