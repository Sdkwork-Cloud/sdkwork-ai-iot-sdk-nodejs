import{S as e}from"./sdkwork-icon-Bi8Wd4F1.js";import{k as o,r as a,f as r,w as l,P as i,Q as s,V as d,R as t,W as n,U as u,Z as c,$ as k}from"./vue-vendor-CnVaDBlt.js";import{_ as m}from"./index-lnKdqbPs.js";const g=["src","alt"],w={key:1,class:"sdkwork-image__loading"},h={key:1,class:"sdkwork-image__loading-text"},f={key:2,class:"sdkwork-image__error"},v={key:1,class:"sdkwork-image__error-text"},p=m(o({__name:"sdkwork-image",props:{src:{},alt:{},fit:{default:"fill"},position:{default:"center"},round:{type:Boolean,default:!1},block:{type:Boolean,default:!1},width:{},height:{},size:{},radius:{},lazy:{type:Boolean,default:!1},lazyOffset:{default:0},showError:{type:Boolean,default:!0},showLoading:{type:Boolean,default:!0},loadingIcon:{default:"material-symbols:image-outline-rounded"},loadingIconSize:{default:32},loadingText:{default:"加载中..."},errorIcon:{default:"material-symbols:broken-image-rounded"},errorIconSize:{default:32},errorText:{default:"加载失败"},customStyle:{},themeMode:{default:"auto"},onClick:{},onLoad:{},onError:{},errorPlaceholder:{type:Boolean,default:!0},loadingPlaceholder:{type:Boolean,default:!0}},emits:["click","load","error"],setup(o,{expose:m,emit:p}){const y=o,_=p,z=a(!1),b=a(!1),I=r(()=>"dark"===y.themeMode||"light"!==y.themeMode&&(!("undefined"==typeof window||!window.matchMedia)&&window.matchMedia("(prefers-color-scheme: dark)").matches)),x=r(()=>I.value?"sdkwork-image--dark":"sdkwork-image--light"),S=r(()=>"small"===y.size?32:"medium"===y.size?48:"large"===y.size?64:"number"==typeof y.size?y.size:void 0),B=r(()=>{const e=y.width||S.value,o=y.height||S.value;return{width:"number"==typeof e?`${e}px`:e,height:"number"==typeof o?`${o}px`:o,borderRadius:y.round?"50%":"number"==typeof y.radius?`${y.radius}px`:y.radius,...y.customStyle}}),$=r(()=>({objectFit:y.fit,objectPosition:y.position})),E=r(()=>({"sdkwork-image__img":!0,"sdkwork-image__img--round":y.round})),L=r(()=>y.showError&&b.value),j=r(()=>y.showLoading&&!z.value&&!b.value&&y.src);l(()=>y.src,(e,o)=>{e!==o&&(z.value=!1,b.value=!1)});const M=e=>{z.value=!0,_("load",e),y.onLoad?.(e)},P=e=>{b.value=!0,_("error",e),y.onError?.(e)},T=e=>{_("click",e),y.onClick?.(e)};return m({isLoaded:()=>z.value,isErrored:()=>b.value,reload:()=>{z.value=!1,b.value=!1}}),(a,r)=>(s(),i("div",{class:t(["sdkwork-image",[{"sdkwork-image--round":o.round,"sdkwork-image--block":o.block,"sdkwork-image--error":L.value,"sdkwork-image--loading":j.value,"sdkwork-image--small":"small"===o.size,"sdkwork-image--medium":"medium"===o.size,"sdkwork-image--large":"large"===o.size},x.value]]),style:d(B.value)},[L.value||j.value||!o.src?n("",!0):(s(),i("img",{key:0,src:o.src,alt:o.alt,class:t(E.value),style:d($.value),onLoad:M,onError:P,onClick:T},null,46,g)),j.value?(s(),i("div",w,[u(a.$slots,"loading",{},()=>[o.loadingIcon?(s(),c(e,{key:0,icon:o.loadingIcon,width:o.loadingIconSize,height:o.loadingIconSize,class:"sdkwork-image__loading-icon"},null,8,["icon","width","height"])):(s(),i("span",h,k(o.loadingText),1))],!0)])):n("",!0),L.value?(s(),i("div",f,[u(a.$slots,"error",{},()=>[o.errorIcon?(s(),c(e,{key:0,icon:o.errorIcon,width:o.errorIconSize,height:o.errorIconSize,class:"sdkwork-image__error-icon"},null,8,["icon","width","height"])):(s(),i("span",v,k(o.errorText),1))],!0)])):n("",!0),u(a.$slots,"default",{},void 0,!0)],6))}}),[["__scopeId","data-v-2c39f477"]]);export{p as _};
