import{e,j as a,b as s,s as t,B as i,R as o,_ as c}from"./index-2cafbb5e.js";/* empty css              *//* empty css              */import{U as l}from"./index-cd7a61a2.js";/* empty css              */import{k as d,c as r,w as n,o as u,Q as p,R as v,S as m,$ as b,u as f,Z as y,a0 as k,j as h,a4 as x,U as g,X as w,r as R}from"./vue-vendor-fce65f55.js";import{F as _}from"./index-155d12c9.js";const S={class:"text-section"},z={class:"text-content"},j={class:"bottom-section"},B={class:"record-tip-section"},C={key:0,class:"record-tip"},D={key:1,class:"record-tip"},U={class:"action-row"},$={class:"record-section"},I={key:0,class:"upload-section"},M=c(d({__name:"sdkwork-voice-clone-record",props:{text:{default:"请朗读这段文字：欢迎使用语音克隆功能，请清晰地朗读这段文字。"},uploadable:{type:Boolean,default:!0},recordable:{type:Boolean,default:!0},accept:{default:"audio/*"},maxSize:{default:10},disabled:{type:Boolean,default:!1}},emits:["upload","record","clone"],setup(c,{emit:d}){const R=c,_=d,M=e(),{currentTheme:O,isDarkMode:E}=a(),V=r(()=>{const e=Math.floor(M.currentDuration/60),a=M.currentDuration%60;return`${e.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`});n(()=>M.currentState,(e,a)=>{e===o.STOPPED&&a===o.RECORDING?M.currentRecord?.data&&(_("record",M.currentRecord.data),t("录音完成")):e===o.ERROR&&t(M.errorMessage||"录制失败")});const A=e=>{const a=Array.isArray(e)?e[0]:e;return a.file?.type?.startsWith("audio/")?a.file?.size>1024*R.maxSize*1024?(t(`文件大小不能超过${R.maxSize}MB`),!1):(_("upload",a.file),t("音频上传成功"),!0):(t("请上传音频文件"),!1)},L=async()=>{try{if(M.isRecording)return void t("正在录制中...");await M.startRecording({realtime:!1,enableWave:!1,sampleRate:16e3,format:"wav"}),t("开始录音...")}catch(e){t("无法访问麦克风，请检查权限设置"),console.error("录音错误:",e)}},N=async()=>{try{M.isRecording&&await M.stopRecording()}catch(e){t("停止录音失败"),console.error("停止录音错误:",e)}};return u(()=>{M.isRecording&&M.stopRecording()}),(e,a)=>{const t=i,o=l;return p(),v("div",{class:w(["sdkwork-voice-clone-record",[f(O)]])},[a[2]||(a[2]=m("div",{class:"instruction-section"},[m("div",{class:"instruction-text"},"请朗读以下文字内容")],-1)),m("div",S,[a[0]||(a[0]=m("div",{class:"instruction-tip"},"录制时的语气和情感也会被克隆到，请根据实际情况进行朗读",-1)),m("div",z,b(c.text),1)]),m("div",j,[m("div",B,[f(M).isRecording?(p(),v("div",D," 正在录音中... "+b(V.value),1)):(p(),v("div",C," 点击开始录制您的语音 "))]),m("div",U,[m("div",$,[f(M).isRecording?(p(),y(t,{key:1,type:"danger",onClick:N,class:"record-btn recording",round:""},{default:k(()=>[h(f(s),{icon:"mdi:pause-circle",width:"32",height:"32"})]),_:1})):(p(),y(t,{key:0,type:"primary",disabled:c.disabled,onClick:L,class:"record-btn",round:""},{default:k(()=>[h(f(s),{icon:"mdi:microphone",width:"32",height:"32"})]),_:1},8,["disabled"]))]),c.uploadable?(p(),v("div",I,[h(o,{disabled:c.disabled,"after-read":A,"max-count":1,accept:c.accept,class:"audio-uploader"},{default:k(()=>[h(t,{type:"default",disabled:c.disabled,class:"upload-btn",plain:""},{default:k(()=>[h(f(s),{icon:"mdi:upload",width:"16",height:"16"}),a[1]||(a[1]=x(" 上传音频 ",-1))]),_:1},8,["disabled"])]),_:1},8,["disabled","accept"])])):g("",!0)])])],2)}}}),[["__scopeId","data-v-f69f2bd4"]]),O={class:"voice-clone-preview"},E={class:"header-section"},V={class:"preview-section"},A={class:"preview-buttons"},L={class:"naming-section"},N={class:"privacy-section"},P={class:"privacy-notice"},T={class:"action-section"},W=c(d({__name:"sdkwork-voice-clone-preview",props:{audioData:{}},emits:["save","back"],setup(e,{emit:a}){const o=e,c=a,l=R(""),d=()=>{t("播放中文试听")},r=()=>{t("播放英文试听")},n=()=>{l.value.trim()?(c("save",l.value.trim(),o.audioData),t("音色保存成功")):t("请输入音色名称")};return(e,a)=>(p(),v("div",O,[m("div",E,[h(f(i),{type:"default",size:"small",onClick:a[0]||(a[0]=a=>e.$emit("back")),class:"back-btn",plain:""},{default:k(()=>[h(f(s),{icon:"mdi:arrow-left",class:"btn-icon"}),a[2]||(a[2]=x(" 返回录制 ",-1))]),_:1})]),m("div",V,[a[5]||(a[5]=m("h3",{class:"section-title"},"试听音色",-1)),m("div",A,[h(f(i),{type:"primary",size:"large",class:"preview-btn",onClick:d},{default:k(()=>[h(f(s),{icon:"mdi:volume-high",class:"btn-icon"}),a[3]||(a[3]=x(" 中文试听 ",-1))]),_:1}),h(f(i),{type:"primary",size:"large",class:"preview-btn",onClick:r},{default:k(()=>[h(f(s),{icon:"mdi:volume-high",class:"btn-icon"}),a[4]||(a[4]=x(" 英文试听 ",-1))]),_:1})])]),m("div",L,[a[6]||(a[6]=m("h3",{class:"section-title"},"音色命名",-1)),h(f(_),{modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value=e),placeholder:"请输入音色名称",clearable:"",class:"name-input"},null,8,["modelValue"])]),m("div",N,[m("div",P,[h(f(s),{icon:"mdi:shield-check",class:"privacy-icon"}),a[7]||(a[7]=m("span",{class:"privacy-text"},"安全和隐私提示：您的音频数据将受到严格保护，仅用于音色克隆目的",-1))])]),m("div",T,[h(f(i),{type:"success",size:"large",block:"",disabled:!l.value,onClick:n,class:"save-btn"},{default:k(()=>[h(f(s),{icon:"mdi:content-save",class:"btn-icon"}),a[8]||(a[8]=x(" 保存音色 ",-1))]),_:1},8,["disabled"])])]))}}),[["__scopeId","data-v-62227006"]]),F={class:"sdkwork-voice-clone"},G=c(d({__name:"sdkwork-voice-clone",props:{text:{default:"请朗读这段文字：欢迎使用语音克隆功能，请清晰地朗读这段文字。"},uploadable:{type:Boolean,default:!0},recordable:{type:Boolean,default:!0},accept:{default:"audio/*"},maxSize:{default:10},disabled:{type:Boolean,default:!1}},emits:["upload","record","clone","save"],setup(e,{emit:a}){const s=a,i=R("record"),o=R(null),c=e=>{e&&(o.value=e),i.value="preview"},l=()=>{i.value="record",o.value=null},d=(e,a)=>{s("save",e,a),t("音色保存成功")},r=e=>{s("upload",e),c(e)},n=e=>{s("record",e),c(e)};return u(()=>{o.value&&"string"==typeof o.value&&URL.revokeObjectURL(o.value)}),(a,s)=>(p(),v("div",F,["record"===i.value?(p(),y(M,{key:0,text:e.text,uploadable:e.uploadable,recordable:e.recordable,accept:e.accept,"max-size":e.maxSize,disabled:e.disabled,onUpload:r,onRecord:n,onClone:s[0]||(s[0]=e=>a.$emit("clone"))},null,8,["text","uploadable","recordable","accept","max-size","disabled"])):(p(),y(W,{key:1,"audio-data":o.value,onSave:d,onBack:l},null,8,["audio-data"]))]))}}),[["__scopeId","data-v-079e1c83"]]);export{G as S};
