import{I as e,B as t,_ as a,L as i}from"./index-2cafbb5e.js";import{E as s}from"./index-17b6a864.js";/* empty css              */import{S as l}from"./sdkwork-api-waterfall-ecfa6c57.js";import{T as o}from"./index-4f03d337.js";import{k as d,c as m,Q as n,R as c,S as r,W as p,j as u,a0 as f,a4 as v,$ as y,U as h,Z as k,a1 as g,X as w,r as x,b,w as $,a9 as S}from"./vue-vendor-fce65f55.js";const B={class:"item-preview"},_={class:"preview-image"},M=["src","alt"],T={key:1,class:"preview-placeholder"},z={key:0,class:"status-badge"},j={class:"item-content"},C={class:"item-title"},D={key:0,class:"item-description"},I={key:1,class:"item-meta"},F={class:"meta-info"},L={class:"meta-type"},E={class:"meta-time"},K={key:2,class:"item-stats"},R={class:"stats-info"},U={class:"stat"},A={class:"stat"},H={class:"item-actions"},Q={key:0,class:"selected-indicator"},W=a(d({__name:"sdkwork-generation-waterfall-item",props:{item:{},index:{},selected:{type:Boolean,default:!1},themeMode:{default:"auto"},showStats:{type:Boolean,default:!0},showMeta:{type:Boolean,default:!0},showStatus:{type:Boolean,default:!0},clickable:{type:Boolean,default:!0}},emits:["click"],setup(a,{emit:i}){const s=a,l=i;m(()=>`theme-${s.themeMode}`);const d=e=>({image:"photo-o",video:"video-o",music:"music-o",voice:"volume-o"}[e]||"file-o"),x=e=>({pending:"等待中",processing:"生成中",completed:"已完成",failed:"失败"}[e]||e),b=e=>{if(!e)return"";const t=new Date(e),a=(new Date).getTime()-t.getTime();return a<6e4?"刚刚":a<36e5?`${Math.floor(a/6e4)}分钟前`:a<864e5?`${Math.floor(a/36e5)}小时前`:a<6048e5?`${Math.floor(a/864e5)}天前`:t.toLocaleDateString()},$=e=>{e.target.style.display="none"},S=()=>{s.clickable&&l("click",s.item,s.index)},W=()=>{l("click",s.item,s.index)};return(i,s)=>{const l=e,m=o,X=t;return n(),c("div",{class:w(["sdkwork-generation-waterfall-item",[`theme-${a.themeMode}`,{"is-selected":a.selected},{"is-clickable":a.clickable}]]),onClick:S},[r("div",B,[p(i.$slots,"image",{item:a.item,index:a.index},()=>[r("div",_,[a.item.result?.thumbnail||a.item.result?.url?(n(),c("img",{key:0,src:a.item.result?.thumbnail||a.item.result?.url,alt:a.item.title,onError:$},null,40,M)):(n(),c("div",T,[u(l,{name:d(a.item.type),size:"32"},null,8,["name"])]))])],!0),a.showStatus?(n(),c("div",z,[u(m,{type:(Z=a.item.status,{pending:"primary",processing:"warning",completed:"success",failed:"danger"}[Z]||"default")},{default:f(()=>[v(y(x(a.item.status)),1)]),_:1},8,["type"])])):h("",!0)]),r("div",j,[r("div",C,[p(i.$slots,"title",{item:a.item,index:a.index},()=>[r("h3",null,y(a.item.title),1)],!0)]),a.item.description?(n(),c("div",D,[p(i.$slots,"description",{item:a.item,index:a.index},()=>[r("p",null,y(a.item.description),1)],!0)])):h("",!0),a.showMeta?(n(),c("div",I,[p(i.$slots,"meta",{item:a.item,index:a.index},()=>{return[r("div",F,[r("span",L,[u(l,{name:d(a.item.type),size:"12"},null,8,["name"]),v(" "+y((e=a.item.type,{image:"图片",video:"视频",music:"音乐",voice:"语音"}[e]||"作品")),1)]),r("span",E,y(b(a.item.createdAt)),1)])];var e},!0)])):h("",!0),a.showStats?(n(),c("div",K,[p(i.$slots,"stats",{item:a.item,index:a.index},()=>[r("div",R,[r("span",U,[u(l,{name:"eye-o",size:"12"}),v(" "+y(a.item.viewCount||0),1)]),r("span",A,[u(l,{name:"good-job-o",size:"12"}),v(" "+y(a.item.likeCount||0),1)])])],!0)])):h("",!0),r("div",H,[p(i.$slots,"actions",{item:a.item,index:a.index},()=>[a.clickable?(n(),k(X,{key:0,size:"mini",type:"primary",plain:"",onClick:g(W,["stop"])},{default:f(()=>[...s[0]||(s[0]=[v(" 查看详情 ",-1)])]),_:1})):h("",!0)],!0)])]),a.selected?(n(),c("div",Q,[u(l,{name:"success",size:"16"})])):h("",!0)],2);var Z}}}),[["__scopeId","data-v-cfb492cd"]]),X={class:"empty-state"},Z={class:"empty-description"},q={key:0,class:"empty-tip"},G={class:"loading-state"},J=a(d({__name:"sdkwork-generation-waterfall",props:{api:{},params:{default:()=>({})},selectable:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},pageSize:{default:12},itemKey:{default:"id"},itemTitleField:{default:"title"},itemDescriptionField:{default:"description"},columns:{default:2},gap:{default:16},themeMode:{default:"auto"},showStats:{type:Boolean,default:!0},showMeta:{type:Boolean,default:!0},showStatus:{type:Boolean,default:!0},clickable:{type:Boolean,default:!0},emptyText:{default:"暂无作品"},emptyTip:{default:"开始创作您的第一个作品吧！"},showCreateButton:{type:Boolean,default:!0},createButtonText:{default:"开始创作"},loadingText:{default:"加载作品中..."}},emits:["search","load","select","delete","item-click","create","refresh"],setup(e,{expose:a,emit:o}){const d=x(),g=e,B=o,_=m(()=>`theme-${g.themeMode}`),M=m(()=>({...g.params})),T=e=>{B("search",e)},z=e=>{B("load",e)},j=e=>{B("select",e)},C=e=>{B("delete",e)},D=(e,t)=>{B("item-click",e,t)},I=()=>{B("create")};return b(()=>{console.error("sdkwork-generation-waterfall============",g.api),d.value&&d.value.refresh()}),$(()=>g.params,()=>{d.value&&d.value.refresh()},{deep:!0}),a({refresh:()=>d.value?.refresh(),loadMore:()=>d.value?.loadMore(),getData:()=>d.value?.getData()||[],getSelectedItems:()=>d.value?.getSelectedItems()||[],clearSelected:()=>d.value?.clearSelected(),setSelectedItems:e=>d.value?.setSelectedItems(e)}),(a,o)=>{const m=t,g=s,x=i;return n(),c("div",{class:w(["sdkwork-generation-waterfall",_.value])},[u(l,{api:e.api,params:M.value,selectable:e.selectable,deletable:e.deletable,searchable:e.searchable,"page-size":e.pageSize,"item-key":e.itemKey,"item-title-field":e.itemTitleField,"item-description-field":e.itemDescriptionField,columns:e.columns,gap:e.gap,"left-spacing":"0px","right-spacing":"0px",onSearch:T,onLoad:z,onSelect:j,onDelete:C,ref_key:"waterfallRef",ref:d},{default:f(({item:t,index:i,selected:s})=>[u(W,{item:t,index:i,selected:s,"theme-mode":e.themeMode,"show-stats":e.showStats,"show-meta":e.showMeta,"show-status":e.showStatus,clickable:e.clickable,onClick:D},S({_:2},[a.$slots["item-image"]?{name:"image",fn:f(()=>[p(a.$slots,"item-image",{item:t,index:i},void 0,!0)]),key:"0"}:void 0,a.$slots["item-title"]?{name:"title",fn:f(()=>[p(a.$slots,"item-title",{item:t,index:i},void 0,!0)]),key:"1"}:void 0,a.$slots["item-description"]?{name:"description",fn:f(()=>[p(a.$slots,"item-description",{item:t,index:i},void 0,!0)]),key:"2"}:void 0,a.$slots["item-meta"]?{name:"meta",fn:f(()=>[p(a.$slots,"item-meta",{item:t,index:i},void 0,!0)]),key:"3"}:void 0,a.$slots["item-actions"]?{name:"actions",fn:f(()=>[p(a.$slots,"item-actions",{item:t,index:i},void 0,!0)]),key:"4"}:void 0]),1032,["item","index","selected","theme-mode","show-stats","show-meta","show-status","clickable"])]),empty:f(()=>[r("div",X,[p(a.$slots,"empty",{},()=>[u(g,{description:e.emptyText,image:"search"},{description:f(()=>[r("div",Z,[r("p",null,y(e.emptyText),1),e.emptyTip?(n(),c("p",q,y(e.emptyTip),1)):h("",!0)])]),default:f(()=>[e.showCreateButton?(n(),k(m,{key:0,type:"primary",size:"small",onClick:I},{default:f(()=>[v(y(e.createButtonText),1)]),_:1})):h("",!0)]),_:1},8,["description"])],!0)])]),loading:f(()=>[r("div",G,[p(a.$slots,"loading",{},()=>[u(x,{size:"24px",vertical:""},{default:f(()=>[v(y(e.loadingText),1)]),_:1})],!0)])]),header:f(()=>[p(a.$slots,"header",{},void 0,!0)]),footer:f(()=>[p(a.$slots,"footer",{},void 0,!0)]),_:3},8,["api","params","selectable","deletable","searchable","page-size","item-key","item-title-field","item-description-field","columns","gap"])],2)}}}),[["__scopeId","data-v-4b423c4f"]]);export{J as _};
