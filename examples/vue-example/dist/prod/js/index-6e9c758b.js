import{m as e,r as a,q as i,t as o,ap as r,X as s,Q as t,U as n,ao as l,L as d,w as u}from"./index-2cafbb5e.js";import{u as c}from"./use-tab-status-2f29a6cd.js";import{k as f,r as g,c as p,w as v,ah as h,b as m,j as b,n as x}from"./vue-vendor-fce65f55.js";const[T,j,k]=e("list");const w=u(f({name:T,props:{error:Boolean,offset:a(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:i("down"),loadingText:String,finishedText:String,immediateCheck:o},emits:["load","update:error","update:loading"],setup(e,{emit:a,slots:i}){const o=g(e.loading),u=g(),f=g(),T=c(),w=r(u),B=p(()=>e.scroller||w.value),C=()=>{x(()=>{if(o.value||e.finished||e.disabled||e.error||!1===(null==T?void 0:T.value))return;const{direction:i}=e,r=+e.offset,s=n(B);if(!s.height||l(u))return;let t=!1;const d=n(f);t="up"===i?s.top-d.top<=r:d.bottom-s.bottom<=r,t&&(o.value=!0,a("update:loading",!0),a("load"))})},S=()=>{if(e.finished){const a=i.finished?i.finished():e.finishedText;if(a)return b("div",{class:j("finished-text")},[a])}},L=()=>{a("update:error",!1),C()},q=()=>{if(e.error){const a=i.error?i.error():e.errorText;if(a)return b("div",{role:"button",class:j("error-text"),tabindex:0,onClick:L},[a])}},y=()=>{if(o.value&&!e.finished&&!e.disabled)return b("div",{class:j("loading")},[i.loading?i.loading():b(d,{class:j("loading-icon")},{default:()=>[e.loadingText||k("loading")]})])};return v(()=>[e.loading,e.finished,e.error],C),T&&v(T,e=>{e&&C()}),h(()=>{o.value=e.loading}),m(()=>{e.immediateCheck&&C()}),s({check:C}),t("scroll",C,{target:B,passive:!0}),()=>{var a;const r=null==(a=i.default)?void 0:a.call(i),s=b("div",{ref:f,class:j("placeholder")},null);return b("div",{ref:u,role:"feed",class:j(),"aria-busy":o.value},["down"===e.direction?r:s,y(),S(),q(),"up"===e.direction?r:s])}}}));export{w as L};
