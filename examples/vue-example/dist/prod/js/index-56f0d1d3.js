import{k as e,p as a,o as i,t as o,as as r,H as s,Z as t,al as n,ar as l,L as d,w as u}from"./index-5affcab4.js";import{u as c}from"./use-tab-status-aca7131d.js";import{k as f,r as g,c as p,w as v,ah as h,b as m,j as b,n as x}from"./vue-vendor-a2672387.js";const[k,T,j]=e("list");const w=u(f({name:k,props:{error:Boolean,offset:a(300),loading:Boolean,disabled:Boolean,finished:Boolean,scroller:Object,errorText:String,direction:i("down"),loadingText:String,finishedText:String,immediateCheck:o},emits:["load","update:error","update:loading"],setup(e,{emit:a,slots:i}){const o=g(e.loading),u=g(),f=g(),k=c(),w=r(u),B=p(()=>e.scroller||w.value),C=()=>{x(()=>{if(o.value||e.finished||e.disabled||e.error||!1===(null==k?void 0:k.value))return;const{direction:i}=e,r=+e.offset,s=n(B);if(!s.height||l(u))return;let t=!1;const d=n(f);t="up"===i?s.top-d.top<=r:d.bottom-s.bottom<=r,t&&(o.value=!0,a("update:loading",!0),a("load"))})},S=()=>{if(e.finished){const a=i.finished?i.finished():e.finishedText;if(a)return b("div",{class:T("finished-text")},[a])}},L=()=>{a("update:error",!1),C()},y=()=>{if(e.error){const a=i.error?i.error():e.errorText;if(a)return b("div",{role:"button",class:T("error-text"),tabindex:0,onClick:L},[a])}},H=()=>{if(o.value&&!e.finished&&!e.disabled)return b("div",{class:T("loading")},[i.loading?i.loading():b(d,{class:T("loading-icon")},{default:()=>[e.loadingText||j("loading")]})])};return v(()=>[e.loading,e.finished,e.error],C),k&&v(k,e=>{e&&C()}),h(()=>{o.value=e.loading}),m(()=>{e.immediateCheck&&C()}),s({check:C}),t("scroll",C,{target:B,passive:!0}),()=>{var a;const r=null==(a=i.default)?void 0:a.call(i),s=b("div",{ref:f,class:T("placeholder")},null);return b("div",{ref:u,role:"feed",class:T(),"aria-busy":o.value},["down"===e.direction?r:s,H(),S(),y(),"up"===e.direction?r:s])}}}));export{w as L};
