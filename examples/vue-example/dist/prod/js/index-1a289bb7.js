import{u as e}from"./generation-15185035.js";import{I as l,B as a,P as s,_ as o}from"./index-5affcab4.js";/* empty css              *//* empty css              */import{P as t}from"./index-0a8ae520.js";/* empty css              *//* empty css              *//* empty css              */import{k as n,r as i,c as u,Q as d,R as c,S as r,j as v,a0 as m,a4 as p,w as g,$ as b,F as y,Y as f,Z as h,U as k,u as V}from"./vue-vendor-a2672387.js";import{F as _}from"./index-dee6a080.js";import{S as w}from"./index-8ec8972f.js";import{T as x}from"./index-7bca35b2.js";import"./video-1a038f9a.js";import"./utils-vendor-b5712723.js";import"./index-44056be1.js";import"./use-id-82312033.js";const C={class:"music-header"},j={class:"model-selector"},z=o(n({__name:"MusicHeader",props:{modelValue:{}},emits:["update:modelValue","showHistory"],setup(e,{emit:o}){const n=e,g=o,b=i(!1),y=[{text:"基础音乐模型 (music-gen-v1)",value:"music-gen-v1"},{text:"流行音乐模型 (pop-music-v2)",value:"pop-music-v2"},{text:"古典音乐模型 (classical-v1)",value:"classical-v1"},{text:"电子音乐模型 (electronic-v1)",value:"electronic-v1"},{text:"民谣音乐模型 (folk-music-v1)",value:"folk-music-v1"}],f=u(()=>{const e=y.find(e=>e.value===n.modelValue);return e?e.text:"选择音乐生成模型"}),h=u(()=>y.findIndex(e=>e.value===n.modelValue)),k=e=>{g("update:modelValue",e.value),b.value=!1};return(e,o)=>{const n=l,i=_,u=a,g=t,V=s;return d(),c("div",C,[r("div",j,[v(i,{readonly:"",clickable:"",value:f.value,placeholder:"选择音乐生成模型",onClick:o[0]||(o[0]=e=>b.value=!0),class:"model-field"},{"right-icon":m(()=>[v(n,{name:"arrow-down"})]),_:1},8,["value"])]),v(u,{type:"default",size:"small",onClick:o[1]||(o[1]=l=>e.$emit("showHistory")),class:"history-btn"},{default:m(()=>[v(n,{name:"clock-o"}),o[4]||(o[4]=p(" 生成历史 ",-1))]),_:1}),v(V,{show:b.value,"onUpdate:show":o[3]||(o[3]=e=>b.value=e),position:"bottom"},{default:m(()=>[v(g,{columns:y,onConfirm:k,onCancel:o[2]||(o[2]=e=>b.value=!1),"default-index":h.value},null,8,["default-index"])]),_:1},8,["show"])])}}}),[["__scopeId","data-v-5787dc4c"]]),B={class:"song-input"},I={class:"input-header"},L={class:"char-count"},U={key:0,class:"song-suggestions"},M={class:"suggestion-list"},S={class:"input-footer"},E={class:"lyrics-toggle"},H=o(n({__name:"SongInput",props:{modelValue:{},showLyrics:{type:Boolean,default:!1}},emits:["update:modelValue","toggleLyrics","showConfig"],setup(e,{emit:s}){const o=e,t=s,n=u({get:()=>o.modelValue,set:e=>t("update:modelValue",e)}),V=i(o.showLyrics);g(()=>o.showLyrics,e=>{e!==V.value&&(V.value=e)},{immediate:!0}),g(V,e=>{e!==o.showLyrics&&t("toggleLyrics",e)});const C=i(["一首轻快的流行歌曲","浪漫的钢琴曲","动感的电子音乐","治愈的民谣歌曲","激情的摇滚音乐","宁静的古典音乐"]),j=u(()=>n.value.length);return(e,s)=>{const o=_,t=x,i=l,u=a,g=w;return d(),c("div",B,[r("div",I,[s[3]||(s[3]=r("h4",null,"歌曲信息",-1)),r("div",L,b(j.value)+"/"+b(200),1)]),v(o,{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=e=>n.value=e),type:"textarea",placeholder:"请输入歌曲标题或描述，如：一首轻快的流行歌曲",maxlength:200,rows:3,autosize:"","show-word-limit":"",class:"song-field"},null,8,["modelValue"]),C.value.length>0?(d(),c("div",U,[s[4]||(s[4]=r("h5",null,"歌曲类型建议",-1)),r("div",M,[(d(!0),c(y,null,f(C.value,e=>(d(),h(t,{key:e,type:"primary",size:"medium",onClick:l=>(e=>{n.value?n.value+=", "+e:n.value=e})(e),class:"suggestion-tag"},{default:m(()=>[p(b(e),1)]),_:2},1032,["onClick"]))),128))])])):k("",!0),r("div",S,[v(u,{type:"default",size:"small",onClick:s[1]||(s[1]=l=>e.$emit("showConfig")),class:"config-btn"},{default:m(()=>[v(i,{name:"setting-o"}),s[5]||(s[5]=p(" 配置 ",-1))]),_:1}),r("div",E,[v(g,{modelValue:V.value,"onUpdate:modelValue":s[2]||(s[2]=e=>V.value=e),size:"20"},null,8,["modelValue"]),s[6]||(s[6]=r("span",{class:"toggle-label"},"歌词",-1))])])])}}}),[["__scopeId","data-v-1dbf08ab"]]),P={class:"lyrics-editor"},$={class:"editor-header"},F={class:"char-count"},G={class:"format-tips"},J={key:0,class:"lyrics-templates"},O={class:"template-list"},R=o(n({__name:"LyricsEditor",props:{modelValue:{}},emits:["update:modelValue"],setup(e,{emit:a}){const s=e,o=a,t=i(s.modelValue);g(()=>s.modelValue,e=>{e!==t.value&&(t.value=e)},{immediate:!0}),g(t,e=>{e!==s.modelValue&&o("update:modelValue",e)});const n=i([{name:"流行歌曲模板",content:"[主歌]\nVerse 1\nVerse 2\n\n[副歌]\nChorus 1\nChorus 2\n\n[桥段]\nBridge\n\n[尾奏]"},{name:"民谣模板",content:"[引子]\nIntro\n\n[主歌]\nVerse 1\nVerse 2\n\n[副歌]\nChorus\n\n[尾声]"},{name:"电子音乐模板",content:"[Intro]\n[Build up]\n[Drop]\n[Breakdown]\n[Outro]"}]),V=u(()=>t.value.length);return(e,a)=>{const s=_,o=l,i=x;return d(),c("div",P,[r("div",$,[a[1]||(a[1]=r("h4",null,"歌词编辑",-1)),r("div",F,b(V.value)+"/"+b(1e3),1)]),v(s,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value=e),type:"textarea",placeholder:"请输入歌词内容，支持多行输入...",maxlength:1e3,rows:5,autosize:"","show-word-limit":"",class:"lyrics-field"},null,8,["modelValue"]),r("div",G,[v(o,{name:"info-o",class:"tip-icon"}),a[2]||(a[2]=r("span",{class:"tip-text"},"支持分段输入，每段歌词会生成对应的音乐段落",-1))]),n.value.length>0?(d(),c("div",J,[a[3]||(a[3]=r("h5",null,"歌词模板",-1)),r("div",O,[(d(!0),c(y,null,f(n.value,e=>(d(),h(i,{key:e.name,type:"primary",size:"medium",onClick:l=>(e=>{t.value?t.value+="\n\n"+e.content:t.value=e.content})(e),class:"template-tag"},{default:m(()=>[p(b(e.name),1)]),_:2},1032,["onClick"]))),128))])])):k("",!0)])}}}),[["__scopeId","data-v-26e3849a"]]),T={class:"generate-button"},D={key:0,class:"points-cost"},K={key:0,class:"generate-hint"},N=o(n({__name:"MusicGenerateButton",props:{disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},pointsCost:{default:50}},emits:["click"],setup(e,{emit:s}){const o=e,t=s,n=u(()=>o.disabled?"default":"primary"),i=u(()=>o.disabled?"请填写歌曲信息":"生成音乐"),g=u(()=>"正在生成音乐..."),f=u(()=>o.disabled&&!o.loading),h=u(()=>o.disabled?"请输入歌曲标题或描述":""),V=()=>{o.disabled||o.loading||t("click")};return(s,o)=>{const t=l,u=a;return d(),c("div",T,[v(u,{type:n.value,loading:e.loading,disabled:e.disabled,"loading-text":g.value,block:"",round:"",size:"large",onClick:V,class:"generate-btn"},{default:m(()=>[e.loading?k("",!0):(d(),c(y,{key:0},[v(t,{name:"music-o",class:"btn-icon"}),p(" "+b(i.value)+" ",1),!e.disabled&&e.pointsCost>0?(d(),c("span",D," 消耗 "+b(e.pointsCost)+" 积分 ",1)):k("",!0)],64))]),_:1},8,["type","loading","disabled","loading-text"]),f.value?(d(),c("div",K,[v(t,{name:"info",class:"hint-icon"}),r("span",null,b(h.value),1)])):k("",!0)])}}}),[["__scopeId","data-v-2b5c03a3"]]),Q={class:"config-panel"},W={class:"panel-header"},Y={class:"config-content"},Z={class:"config-section"},q={class:"option-grid"},A={class:"config-section"},X={class:"option-grid"},ee={class:"config-section"},le={class:"option-grid"},ae={class:"panel-footer"},se=o(n({__name:"MusicConfigPanel",props:{modelValue:{},show:{type:Boolean}},emits:["update:modelValue","update:show"],setup(e,{emit:l}){const o=e,t=l,n=u({get:()=>o.show,set:e=>t("update:show",e)}),k=i({style:"",emotion:"",scene:"",bpm:"",duration:""});g(()=>o.modelValue,e=>{k.value={...e}},{immediate:!0,deep:!0}),g(k,e=>{t("update:modelValue",{...e})},{deep:!0});const V=[{label:"流行",value:"pop"},{label:"摇滚",value:"rock"},{label:"电子",value:"electronic"},{label:"古典",value:"classical"},{label:"民谣",value:"folk"},{label:"爵士",value:"jazz"},{label:"嘻哈",value:"hiphop"},{label:"R&B",value:"r&b"}],_=[{label:"快乐",value:"happy"},{label:"悲伤",value:"sad"},{label:"平静",value:"calm"},{label:"激动",value:"excited"},{label:"浪漫",value:"romantic"},{label:"神秘",value:"mysterious"},{label:"紧张",value:"tense"},{label:"放松",value:"relaxed"}],w=[{label:"背景音乐",value:"background"},{label:"舞蹈音乐",value:"dance"},{label:"学习音乐",value:"study"},{label:"工作音乐",value:"work"},{label:"运动音乐",value:"exercise"},{label:"睡眠音乐",value:"sleep"},{label:"冥想音乐",value:"meditation"},{label:"派对音乐",value:"party"}],x=()=>{n.value=!1},C=(e,l)=>{k.value={...k.value,[e]:l}},j=()=>{k.value={style:"",emotion:"",scene:"",bpm:"",duration:""}};return(e,l)=>{const o=a,t=s;return d(),h(t,{show:n.value,"onUpdate:show":l[0]||(l[0]=e=>n.value=e),position:"bottom",round:"",style:{height:"70%"}},{default:m(()=>[r("div",Q,[r("div",W,[l[2]||(l[2]=r("h3",null,"音乐配置",-1)),v(o,{type:"primary",size:"small",onClick:x,class:"close-btn"},{default:m(()=>[...l[1]||(l[1]=[p(" 完成 ",-1)])]),_:1})]),r("div",Y,[r("div",Z,[l[3]||(l[3]=r("h4",null,"音乐风格",-1)),r("div",q,[(d(),c(y,null,f(V,e=>v(o,{key:e.value,type:k.value.style===e.value?"primary":"default",size:"small",onClick:l=>C("style",e.value),class:"option-btn"},{default:m(()=>[p(b(e.label),1)]),_:2},1032,["type","onClick"])),64))])]),r("div",A,[l[4]||(l[4]=r("h4",null,"情绪",-1)),r("div",X,[(d(),c(y,null,f(_,e=>v(o,{key:e.value,type:k.value.emotion===e.value?"primary":"default",size:"small",onClick:l=>C("emotion",e.value),class:"option-btn"},{default:m(()=>[p(b(e.label),1)]),_:2},1032,["type","onClick"])),64))])]),r("div",ee,[l[5]||(l[5]=r("h4",null,"场景",-1)),r("div",le,[(d(),c(y,null,f(w,e=>v(o,{key:e.value,type:k.value.scene===e.value?"primary":"default",size:"small",onClick:l=>C("scene",e.value),class:"option-btn"},{default:m(()=>[p(b(e.label),1)]),_:2},1032,["type","onClick"])),64))])])]),r("div",ae,[v(o,{type:"default",size:"large",onClick:j,class:"reset-btn"},{default:m(()=>[...l[6]||(l[6]=[p(" 重置配置 ",-1)])]),_:1})])])]),_:1},8,["show"])}}}),[["__scopeId","data-v-34dfdc49"]]),oe={class:"mobile-music-generation"},te=o(n({__name:"sdkwork-generation-music",props:{defaultModel:{default:"music-gen-v1"},disabled:{type:Boolean,default:!1},showLyrics:{type:Boolean,default:!1},defaultLyrics:{default:""},pointsCoefficient:{default:1}},emits:["generation-start","generation-success","generation-error","validation-change","model-change"],setup(l,{emit:a}){const s=l,o=a,t=e(),n=i(s.defaultModel||"music-gen-v1"),r=i("一首轻快的流行歌曲"),m=i(s.showLyrics||!1),p=i(s.defaultLyrics||""),b=i(!1),y=i(!1),f=i({style:"",emotion:"",scene:"",bpm:"",duration:""}),_=u(()=>!s.disabled&&r.value.trim().length>0);g(_,e=>{o("validation-change",e)}),g(n,e=>{o("model-change",e)});const w=e=>{m.value=e},x=()=>{y.value=!0},C=async()=>{if(_.value&&!b.value){b.value=!0;try{const e={prompt:r.value,model:n.value,lyrics:m.value?p.value:"",n:1,tempo:f.value.bpm?Number(f.value.bpm):void 0,style:f.value.style||"",instrument:f.value.emotion||""};o("generation-start",e);const l=await t.generateMusic(e);o("generation-success",l),console.log("音乐生成成功:",l)}catch(e){const l=e instanceof Error?e:new Error(String(e));o("generation-error",l),console.error("音乐生成失败:",l),console.error("生成失败:",l.message)}finally{b.value=!1}}};return(e,l)=>(d(),c("div",oe,[v(V(z),{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e)},null,8,["modelValue"]),v(V(H),{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=e=>r.value=e),"show-lyrics":m.value,disabled:s.disabled,onToggleLyrics:w,onShowConfig:x},null,8,["modelValue","show-lyrics","disabled"]),m.value?(d(),h(V(R),{key:0,modelValue:p.value,"onUpdate:modelValue":l[2]||(l[2]=e=>p.value=e),disabled:s.disabled},null,8,["modelValue","disabled"])):k("",!0),v(V(se),{modelValue:f.value,"onUpdate:modelValue":l[3]||(l[3]=e=>f.value=e),show:y.value,"onUpdate:show":l[4]||(l[4]=e=>y.value=e),disabled:s.disabled},null,8,["modelValue","show","disabled"]),v(V(N),{disabled:s.disabled||b.value||!_.value,loading:b.value,"points-cost":50*s.pointsCoefficient,onClick:C},null,8,["disabled","loading","points-cost"])]))}}),[["__scopeId","data-v-66f59366"]]),ne={class:"mobile-music-page"},ie=o(n({__name:"index",setup(e){const l=i();return(e,a)=>(d(),c("div",ne,[v(V(te),{ref_key:"musicGenerator",ref:l,onBack:a[0]||(a[0]=l=>e.$router.back())},null,512)]))}}),[["__scopeId","data-v-7066ee30"]]);export{ie as default};
