import{S as e}from"./sdkwork-page-container-CwOtSFXl.js";import{a as l,_ as a}from"./sdkwork-collapse-item-B1buIz8w.js";import{k as s,a as t,f as o,b as i,P as n,Q as u,S as r,j as d,W as c,$ as v,a0 as p,a4 as m,Z as k,O as h}from"./vue-vendor-BOogp7Xw.js";import{B as f,I as y,aS as g,L as b,s as w,_ as j}from"./index-ov3QC--c.js";import{a as _,_ as x}from"./sdkwork-cell-group-D-E6atlD.js";import{E as A}from"./index-08Es9nZT.js";import{T as V}from"./index-BSIp-o01.js";/* empty css              *//* empty css              *//* empty css              */import{S as B}from"./sdkwork-voice-speaker-category-list-popup-DurgSpg7.js";import{F}from"./index-CTut2Zgt.js";import"./index-D5eJ2EhQ.js";import"./utils-vendor-WEzSe-CR.js";import"./sdkwork-icon-Bbs-hM5p.js";import"./use-id-Dx2a3-Lt.js";import"./sdkwork-popup-Dr9qRxIi.js";import"./sdkwork-pull-refresh-CQeBhH0c.js";import"./index-BtdHogtb.js";import"./shared-DW3aOE2Q.js";import"./sdkwork-search-bar-yyntw_jj.js";import"./ListItem-DJmG2b7G.js";import"./LoadingSection-DlIwnhPe.js";import"./LoadMoreSection-6u06nvsQ.js";import"./sdkwork-voice-clone-CKTiRMaS.js";import"./index-Q_z4ZHI_.js";import"./index-B0-wAmoq.js";const C={class:"sdkwork-text-to-speech"},U={class:"tts-container"},E={class:"input-section"},L={class:"section-header"},M={class:"text-counter"},S={class:"speaker-section"},z={class:"section-header"},Q={key:0,class:"selected-speaker"},D={class:"speaker-info"},G={class:"speaker-details"},T={class:"speaker-name"},H={class:"speaker-meta"},I={key:1,class:"no-speaker"},R={class:"settings-section"},J={class:"slider-value"},N={class:"slider-value"},P={class:"slider-value"},Z={class:"action-section"},q={key:0,class:"playback-section"},O={class:"section-header"},X={class:"audio-player"},$=["src"],W={class:"playback-info"},Y={class:"info-item"},K={class:"info-value"},ee={class:"info-item"},le={class:"info-value"},ae=j(s({__name:"sdkwork-text-to-speech",emits:["synthesis-complete","synthesis-error","speaker-selected","playback-started","playback-stopped"],setup(e,{emit:l}){const a=l,s=t(""),h=t(1e3),j=t(null),ae=t(!1),se=t(1),te=t(80),oe=t(0),ie=t(!1),ne=t(!1),ue=t(""),re=t(0),de=t(0),ce=t(null),ve=o(()=>s.value.trim().length>0&&null!==j.value),pe=e=>{j.value=e,ae.value=!1,w(`已选择发音人: ${e.name}`),a("speaker-selected",e)},me=async()=>{if(j.value)try{const e="欢迎使用语音合成服务，这是发音人试听效果。";await he(e,!0)}catch(e){console.error("试听失败:",e),w("试听失败，请重试")}else w("请先选择发音人")},ke=async()=>{if(ve.value)try{await he(s.value,!1)}catch(e){console.error("合成失败:",e),w("合成失败，请重试")}else w("请输入文本并选择发音人")},he=async(e,l=!1)=>{ie.value=!0;try{const s=Date.now();await new Promise(e=>setTimeout(e,2e3));const t="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LMeSw=",o=Math.floor(5e4*Math.random())+1e4;if(ue.value=t,re.value=o,de.value=Date.now()-s,l)w("试听播放中...");else{w("合成完成，开始播放");const l={audioUrl:t,audioSize:o,synthesisTime:de.value,text:e,speaker:j.value,settings:{speed:se.value,volume:te.value,pitch:oe.value}};a("synthesis-complete",l)}setTimeout(()=>{ce.value&&ce.value.play()},100)}catch(s){throw a("synthesis-error",s),s}finally{ie.value=!1}},fe=()=>{ce.value&&(ce.value.pause(),ce.value.currentTime=0),ne.value=!1},ye=()=>{ne.value=!0},ge=()=>{ne.value=!1},be=()=>{ne.value=!1},we=()=>{if(ue.value)try{const e=document.createElement("a");e.href=ue.value,e.download=`语音合成_${Date.now()}.wav`,e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),w("音频文件下载成功")}catch(e){console.error("下载失败:",e),w("下载失败，请重试")}else w("没有可下载的音频文件")},je=e=>{if(0===e)return"0 B";const l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(2))+" "+["B","KB","MB","GB"][l]};return i(()=>{fe(),ue.value.startsWith("blob:")&&URL.revokeObjectURL(ue.value)}),(e,l)=>{const a=F,t=f,o=y,i=V,w=A,he=g,_e=_,xe=x,Ae=b;return u(),n("div",C,[r("div",U,[r("div",E,[r("div",L,[l[8]||(l[8]=r("h3",{class:"section-title"},"文本输入",-1)),r("div",M,v(s.value.length)+"/"+v(h.value),1)]),d(a,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),type:"textarea",rows:"4",placeholder:"请输入要合成的文本内容...",maxlength:h.value,"show-word-limit":"",class:"text-input"},null,8,["modelValue","maxlength"])]),r("div",S,[r("div",z,[l[10]||(l[10]=r("h3",{class:"section-title"},"发音人选择",-1)),d(t,{type:"primary",size:"small",onClick:l[1]||(l[1]=e=>ae.value=!0),class:"select-btn"},{default:p(()=>[...l[9]||(l[9]=[m(" 选择发音人 ",-1)])]),_:1})]),j.value?(u(),n("div",Q,[r("div",D,[d(o,{name:"music",class:"speaker-icon"}),r("div",G,[r("div",T,v(j.value.name),1),r("div",H,[j.value.gender?(u(),k(i,{key:0},{default:p(()=>[m(v("female"===j.value.gender?"女声":"男声"),1)]),_:1})):c("",!0),j.value.language?(u(),k(i,{key:1},{default:p(()=>[m(v(j.value.language),1)]),_:1})):c("",!0)])])]),d(t,{type:"default",size:"small",onClick:me,class:"preview-btn"},{default:p(()=>[...l[11]||(l[11]=[m(" 试听 ",-1)])]),_:1})])):(u(),n("div",I,[d(w,{description:"请选择发音人",image:"search"},{default:p(()=>[d(t,{type:"primary",size:"small",onClick:l[2]||(l[2]=e=>ae.value=!0)},{default:p(()=>[...l[12]||(l[12]=[m(" 选择发音人 ",-1)])]),_:1})]),_:1})]))]),r("div",R,[l[13]||(l[13]=r("div",{class:"section-header"},[r("h3",{class:"section-title"},"合成设置")],-1)),d(xe,null,{default:p(()=>[d(_e,{title:"语速",center:""},{value:p(()=>[d(he,{modelValue:se.value,"onUpdate:modelValue":l[3]||(l[3]=e=>se.value=e),min:.5,max:2,step:.1,class:"speed-slider"},{button:p(()=>[r("div",J,v(se.value.toFixed(1))+"x",1)]),_:1},8,["modelValue"])]),_:1}),d(_e,{title:"音量",center:""},{value:p(()=>[d(he,{modelValue:te.value,"onUpdate:modelValue":l[4]||(l[4]=e=>te.value=e),min:0,max:100,step:1,class:"volume-slider"},{button:p(()=>[r("div",N,v(te.value)+"%",1)]),_:1},8,["modelValue"])]),_:1}),d(_e,{title:"音调",center:""},{value:p(()=>[d(he,{modelValue:oe.value,"onUpdate:modelValue":l[5]||(l[5]=e=>oe.value=e),min:-12,max:12,step:1,class:"pitch-slider"},{button:p(()=>[r("div",P,v(oe.value>0?"+":"")+v(oe.value),1)]),_:1},8,["modelValue"])]),_:1})]),_:1})]),r("div",Z,[d(t,{type:"primary",size:"large",block:"",onClick:ke,disabled:!ve.value,loading:ie.value,class:"synthesize-btn"},{loading:p(()=>[d(Ae,{type:"spinner",size:"20px"}),l[14]||(l[14]=m(" 合成中... ",-1))]),default:p(()=>[d(o,{name:"play",class:"btn-icon"}),l[15]||(l[15]=m(" 开始合成 ",-1))]),_:1},8,["disabled","loading"]),d(t,{type:"default",size:"large",block:"",onClick:fe,disabled:!ne.value,class:"stop-btn"},{default:p(()=>[d(o,{name:"pause",class:"btn-icon"}),l[16]||(l[16]=m(" 停止播放 ",-1))]),_:1},8,["disabled"])]),ue.value?(u(),n("div",q,[r("div",O,[l[18]||(l[18]=r("h3",{class:"section-title"},"播放控制",-1)),d(t,{type:"success",size:"small",onClick:we,class:"download-btn"},{default:p(()=>[d(o,{name:"down",class:"btn-icon"}),l[17]||(l[17]=m(" 下载 ",-1))]),_:1})]),r("div",X,[r("audio",{ref_key:"audioElement",ref:ce,src:ue.value,controls:"",class:"audio-element",onPlay:ye,onPause:ge,onEnded:be},null,40,$),r("div",W,[r("div",Y,[l[19]||(l[19]=r("span",{class:"info-label"},"文件大小:",-1)),r("span",K,v(je(re.value)),1)]),r("div",ee,[l[20]||(l[20]=r("span",{class:"info-label"},"合成时间:",-1)),r("span",le,v(de.value)+"ms",1)])])])])):c("",!0)]),d(B,{modelValue:ae.value,"onUpdate:modelValue":l[6]||(l[6]=e=>ae.value=e),title:"选择发音人",height:"70vh","selected-speaker-id":j.value?.id,onConfirm:pe,onClose:l[7]||(l[7]=e=>ae.value=!1)},null,8,["modelValue","selected-speaker-id"])])}}}),[["__scopeId","data-v-6b294dec"]]),se={class:"page-content"},te={class:"usage-guide"},oe=j(s({__name:"index",setup(s){h();const o=t(["guide"]),i=e=>{console.log("语音合成完成:",e),w("语音合成完成")},n=e=>{console.error("语音合成失败:",e),w("合成失败，请重试")};return(s,t)=>{const c=a,v=l,h=e;return u(),k(h,{"safe-area":"",scrollable:"","theme-mode":"auto"},{default:p(()=>[r("div",se,[d(ae,{onSynthesisComplete:i,onSynthesisError:n,class:"tts-component"})]),r("div",te,[d(v,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e)},{default:p(()=>[d(c,{title:"使用说明",name:"guide"},{default:p(()=>[...t[1]||(t[1]=[r("div",{class:"guide-content"},[r("h4",null,"语音合成功能说明"),r("ul",null,[r("li",null,[r("strong",null,"文本输入："),m("输入要合成的文本内容，支持中英文")]),r("li",null,[r("strong",null,"发音人选择："),m('点击"选择发音人"按钮，从发音人列表中选择合适的发音人')]),r("li",null,[r("strong",null,"合成设置："),m("可以调整语速、音量、音调等参数")]),r("li",null,[r("strong",null,"试听功能："),m('选择发音人后可以点击"试听"按钮预览发音效果')]),r("li",null,[r("strong",null,"开始合成："),m('点击"开始合成"按钮生成语音文件')]),r("li",null,[r("strong",null,"播放控制："),m("合成完成后可以播放、暂停、停止音频")])]),r("h4",null,"支持的功能"),r("ul",null,[r("li",null,"多种发音人选择（男声、女声、不同语言）"),r("li",null,"实时参数调整"),r("li",null,"音频文件下载"),r("li",null,"响应式设计，支持移动端")])],-1)])]),_:1})]),_:1},8,["modelValue"])])]),_:1})}}}),[["__scopeId","data-v-041a354f"]]);export{oe as default};
