import{k as e,O as t,c as a,Q as r,R as o,V as s,U as n,S as d,W as i,j as l,$ as k,X as c}from"./vue-vendor-fce65f55.js";import{S as u}from"./sdkwork-icon-105dbc30.js";import{j as h,_ as w}from"./index-2cafbb5e.js";const f={key:0,class:"sdkwork-navbar__placeholder"},v={class:"sdkwork-navbar__left"},p={key:0,class:"sdkwork-navbar__arrow"},b={key:1,class:"sdkwork-navbar__text"},_={class:"sdkwork-navbar__title"},g={class:"sdkwork-navbar__title-text"},x={class:"sdkwork-navbar__right"},y=w(e({__name:"sdkwork-navbar",props:{title:{default:""},leftText:{default:""},rightText:{default:""},leftArrow:{type:Boolean,default:!1},autoBack:{type:Boolean,default:!0},fixed:{type:Boolean,default:!1},border:{type:Boolean,default:!0},height:{default:46},zIndex:{default:1},background:{default:""},themeMode:{default:"auto"},safeAreaInsetTop:{type:Boolean,default:!1}},emits:["click-left","click-right"],setup(e,{expose:w,emit:y}){const m=e,S=y,B=t(),{isDarkMode:T,currentTheme:M}=h(),C=a(()=>{if(m.leftArrow)return!0;if(!m.autoBack)return!1;try{const e=B.currentRoute.value;if(!0===e.meta?.hideBackButton)return!1;if(!0===e.meta?.showBackButton)return!0;const t=window.history&&window.history.length?window.history.length:1,a="/"===e.path||"/home"===e.path||"/index"===e.path;return t>1&&!a}catch(e){return console.warn("返回按钮显示检测失败:",e),!1}}),$=a(()=>C.value),I=a(()=>"dark"===m.themeMode?"sdkwork-navbar--dark":"light"===m.themeMode?"sdkwork-navbar--light":"dark"===M.value?"sdkwork-navbar--dark":"sdkwork-navbar--light"),j=a(()=>{if(!m.safeAreaInsetTop)return!1;if("undefined"==typeof window)return!1;const e=navigator.userAgent.toLowerCase();if(!/iphone|ipad|ipod|android/.test(e))return!1;if(window.CSS&&window.CSS.supports)try{return window.CSS.supports("top: env(safe-area-inset-top)")||window.CSS.supports("top: constant(safe-area-inset-top)")}catch(t){return console.warn("CSS环境变量检测失败:",t),!1}return!1}),A=a(()=>m.height),z=()=>{if(m.autoBack&&C.value)try{B.back()}catch(e){console.warn("路由返回失败，尝试使用浏览器返回:",e),window.history.back()}else S("click-left")},D=()=>{S("click-right")};return w({setTitle:e=>{console.log("Set title:",e)},getThemeMode:()=>m.themeMode,isDarkMode:()=>"dark"===m.themeMode||"light"!==m.themeMode&&T.value}),(t,a)=>(r(),o("div",null,[e.fixed?(r(),o("div",{key:0,class:"sdkwork-navbar__placeholder-space",style:s({height:`${A.value}px`})},null,4)):n("",!0),d("div",{class:c(["sdkwork-navbar",[{"sdkwork-navbar--fixed":e.fixed,"sdkwork-navbar--border":e.border},I.value]]),style:s({height:`${e.height}px`,zIndex:e.zIndex,background:e.background})},[j.value?(r(),o("div",f)):n("",!0),d("div",{class:"sdkwork-navbar__content",style:s({height:`${e.height}px`})},[d("div",v,[$.value||e.leftText?(r(),o("div",{key:0,class:"sdkwork-navbar__left-btn",onClick:z},[$.value?(r(),o("span",p,[i(t.$slots,"left-arrow",{},()=>[l(u,{icon:"material-symbols:arrow-back-ios-new-rounded",width:"16",height:"16"})],!0)])):n("",!0),e.leftText?(r(),o("span",b,k(e.leftText),1)):n("",!0)])):n("",!0),i(t.$slots,"left",{},void 0,!0)]),d("div",_,[i(t.$slots,"title",{},()=>[d("span",g,k(e.title),1)],!0)]),d("div",x,[i(t.$slots,"right",{},void 0,!0),e.rightText?(r(),o("span",{key:0,class:"sdkwork-navbar__text sdkwork-navbar__right-btn",onClick:D},k(e.rightText),1)):n("",!0)])],4)],6)]))}}),[["__scopeId","data-v-3cba291a"]]);export{y as _};
