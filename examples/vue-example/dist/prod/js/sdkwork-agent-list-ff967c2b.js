import{I as e,B as t,_ as a,L as s}from"./index-2cafbb5e.js";import{E as l}from"./index-17b6a864.js";import{S as i}from"./sdkwork-api-list-be20b211.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{k as o,c as d,Q as n,R as c,S as r,W as m,j as g,a0 as p,X as u,a1 as f,U as k,$ as v,r as b,b as h,Z as w,a4 as y}from"./vue-vendor-fce65f55.js";import{C as S}from"./index-44deb856.js";import{I as x}from"./index-a5403cf2.js";const _={class:"sdkwork-agents-list-item__content"},B={class:"default-agent-item"},z={class:"agent-avatar"},j={class:"avatar-placeholder"},$={key:0,class:"selection-checkbox"},M={class:"agent-info"},C={class:"agent-header"},L={class:"agent-name"},D={class:"agent-description"},I={class:"agent-footer"},A={class:"time-info"},U={class:"time-text"},F={class:"usage-info"},N={class:"count-text"},K={class:"action-section"},R={key:0,class:"delete-section"},T={class:"agent-action"},E=a(o({__name:"sdkwork-agents-list-item",props:{agent:{},index:{},selectable:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},isSelected:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},showBorderBottom:{type:Boolean,default:!0},themeMode:{default:"auto"}},emits:["click","select","delete"],setup(a,{expose:s,emit:l}){const i=a,o=l,b=d(()=>"dark"===i.themeMode||"light"!==i.themeMode&&(!("undefined"==typeof window||!window.matchMedia)&&window.matchMedia("(prefers-color-scheme: dark)").matches)),h=d(()=>b.value?"sdkwork-agents-list-item--dark":"sdkwork-agents-list-item--light"),w=e=>{i.selectable&&o("select",i.agent)},y=()=>{i.disabled||(i.selectable?w(i.isSelected):o("click",i.agent))},E=()=>{i.deletable&&o("delete",i.agent)},J=e=>{const t=window.$date.parse(e),a=(new Date).getTime()-t.getTime();return a<6e4?"刚刚更新":a<36e5?`${Math.floor(a/6e4)}分钟前`:a<864e5?`${Math.floor(a/36e5)}小时前`:a<6048e5?`${Math.floor(a/864e5)}天前`:t.toLocaleDateString()};return s({getName:()=>i.agent.name,getDescription:()=>i.agent.description,getUsageCount:()=>i.agent.usageCount,formatLastUpdate:J,isSelected:()=>i.isSelected}),(s,l)=>{const i=e,o=x,d=S,b=t;return n(),c("div",{class:u(["sdkwork-agents-list-item",[{"sdkwork-agents-list-item--selected":a.isSelected,"sdkwork-agents-list-item--selectable":a.selectable,"sdkwork-agents-list-item--deletable":a.deletable,"sdkwork-agents-list-item--disabled":a.disabled,"sdkwork-agents-list-item--border-bottom":a.showBorderBottom},h.value]]),onClick:y},[r("div",_,[m(s.$slots,"default",{agent:a.agent,index:a.index,selected:a.isSelected},()=>[r("div",B,[r("div",z,[g(o,{src:a.agent.faceImage?.url,width:"48",height:"48",radius:"8",fit:"cover",alt:a.agent.name},{error:p(()=>[r("div",j,[g(i,{name:"user-circle-o",size:"24"})])]),_:1},8,["src","alt"]),r("div",{class:u(["status-indicator",`status-${a.agent.status}`])},null,2),a.selectable?(n(),c("div",$,[g(d,{"model-value":a.isSelected,"onUpdate:modelValue":w,onClick:l[0]||(l[0]=f(()=>{},["stop"]))},null,8,["model-value"])])):k("",!0)]),r("div",M,[r("div",C,[r("div",L,v(a.agent.name),1)]),r("div",D,v(a.agent.description||"暂无描述"),1),r("div",I,[r("div",A,[g(i,{name:"clock-o",size:"12"}),r("span",U,v(J(a.agent.updatedAt)),1)]),r("div",F,[g(i,{name:"play-circle",size:"12"}),r("span",N,v(a.agent.usageCount)+"次使用",1)])])]),r("div",K,[a.deletable?(n(),c("div",R,[g(b,{type:"danger",round:"",onClick:f(E,["stop"]),class:"delete-button"},{default:p(()=>[g(i,{name:"delete",size:"14"})]),_:1})])):k("",!0),r("div",T,[g(i,{name:"arrow",size:"16"})])])])],!0)])],2)}}}),[["__scopeId","data-v-7af63f9f"]]),J=a(o({__name:"sdkwork-agent-list",props:{api:{},params:{default:()=>({})},selectable:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},pageSize:{default:10},agentKey:{default:"id"},agentNameField:{default:"name"},agentDescriptionField:{default:"description"}},emits:["select","delete","click","search","load"],setup(e,{expose:t,emit:a}){const o=e,c=a,u=b(),f=b(!1);h(()=>{(()=>{const e=navigator.userAgent.toLowerCase();f.value=/micromessenger/.test(e)})()});const k=d(()=>({pageNumber:0,pageSize:o.pageSize,filters:o.params})),v=e=>{c("select",e)},S=e=>{c("delete",e)},x=e=>{c("search",e)},_=e=>{c("load",e)},B=e=>{c("select",e)},z=e=>{c("click",e)};return t({refresh:()=>u.value?.refresh(),loadMore:()=>u.value?.loadMore(),getAgents:()=>u.value?.getData()||[],getSelectedAgents:()=>u.value?.getSelectedItems()||[],clearSelected:()=>u.value?.clearSelected(),setSelectedAgents:e=>u.value?.setSelectedItems(e)}),(t,a)=>{const o=l,d=s;return n(),w(i,{api:e.api,params:k.value,selectable:e.selectable,deletable:e.deletable,searchable:e.searchable,"page-size":e.pageSize,"item-key":e.agentKey,"item-title-field":e.agentNameField,"item-description-field":e.agentDescriptionField,"left-spacing":0,"right-spacing":0,onSelect:v,onDelete:S,onSearch:x,onLoad:_,ref_key:"apiListRef",ref:u,showBorderBottom:"",borderBottomLeftOffset:70},{default:p(({item:e,index:t,selected:a})=>[g(E,{agent:e,"is-selected":a,"show-border-bottom":!0,onClick:z,onSelect:B},null,8,["agent","is-selected"])]),empty:p(()=>[m(t.$slots,"empty",{},()=>[g(o,{description:"暂无智能体",image:"search"},{description:p(()=>[...a[0]||(a[0]=[r("div",{class:"empty-description"},[r("p",null,"暂时没有智能体"),r("p",{class:"empty-tip"},"您可以创建新的智能体或调整搜索条件")],-1)])]),_:1})],!0)]),loading:p(()=>[m(t.$slots,"loading",{},()=>[g(d,{size:"24px",vertical:""},{default:p(()=>[...a[1]||(a[1]=[y("加载智能体数据...",-1)])]),_:1})],!0)]),header:p(()=>[m(t.$slots,"header",{},void 0,!0)]),footer:p(()=>[m(t.$slots,"footer",{},void 0,!0)]),_:3},8,["api","params","selectable","deletable","searchable","page-size","item-key","item-title-field","item-description-field"])}}}),[["__scopeId","data-v-4cbb9c59"]]);export{J as _};
