import{k as e,f as t,P as a,Q as r,W as o,S as s,V as n,U as d,j as l,$ as i,R as k,O as c}from"./vue-vendor-BOogp7Xw.js";import{S as u}from"./sdkwork-icon-CRFBEh8F.js";import{l as h,_ as w}from"./index-BWqFoNHJ.js";const f={key:0,class:"sdkwork-navbar__placeholder"},v={class:"sdkwork-navbar__left"},p={key:0,class:"sdkwork-navbar__arrow"},b={key:1,class:"sdkwork-navbar__text"},_={class:"sdkwork-navbar__title"},g={class:"sdkwork-navbar__title-text"},x={class:"sdkwork-navbar__right"},y=w(e({__name:"sdkwork-navbar",props:{title:{default:""},leftText:{default:""},rightText:{default:""},leftArrow:{type:Boolean,default:!1},autoBack:{type:Boolean,default:!0},fixed:{type:Boolean,default:!1},border:{type:Boolean,default:!0},height:{default:46},zIndex:{default:1},background:{default:""},themeMode:{default:"auto"},safeAreaInsetTop:{type:Boolean,default:!1}},emits:["click-left","click-right"],setup(e,{expose:w,emit:y}){const m=e,S=y,B=c(),{isDarkMode:T,currentTheme:M}=h(),C=t(()=>{if(m.leftArrow)return!0;if(!m.autoBack)return!1;try{const e=B.currentRoute.value;if(!0===e.meta?.hideBackButton)return!1;if(!0===e.meta?.showBackButton)return!0;const t=window.history&&window.history.length?window.history.length:1,a="/"===e.path||"/home"===e.path||"/index"===e.path;return t>1&&!a}catch(e){return console.warn("返回按钮显示检测失败:",e),!1}}),$=t(()=>C.value),I=t(()=>"dark"===m.themeMode?"sdkwork-navbar--dark":"light"===m.themeMode?"sdkwork-navbar--light":"dark"===M.value?"sdkwork-navbar--dark":"sdkwork-navbar--light"),A=t(()=>{if(!m.safeAreaInsetTop)return!1;if("undefined"==typeof window)return!1;const e=navigator.userAgent.toLowerCase();if(!/iphone|ipad|ipod|android/.test(e))return!1;if(window.CSS&&window.CSS.supports)try{return window.CSS.supports("top: env(safe-area-inset-top)")||window.CSS.supports("top: constant(safe-area-inset-top)")}catch(t){return console.warn("CSS环境变量检测失败:",t),!1}return!1}),j=t(()=>m.height),z=()=>{if(m.autoBack&&C.value)try{B.back()}catch(e){console.warn("路由返回失败，尝试使用浏览器返回:",e),window.history.back()}else S("click-left")},D=()=>{S("click-right")};return w({setTitle:e=>{console.log("Set title:",e)},getThemeMode:()=>m.themeMode,isDarkMode:()=>"dark"===m.themeMode||"light"!==m.themeMode&&T.value}),(t,c)=>(r(),a("div",null,[e.fixed?(r(),a("div",{key:0,class:"sdkwork-navbar__placeholder-space",style:n({height:`${j.value}px`})},null,4)):o("",!0),s("div",{class:k(["sdkwork-navbar",[{"sdkwork-navbar--fixed":e.fixed,"sdkwork-navbar--border":e.border},I.value]]),style:n({height:`${e.height}px`,zIndex:e.zIndex,background:e.background})},[A.value?(r(),a("div",f)):o("",!0),s("div",{class:"sdkwork-navbar__content",style:n({height:`${e.height}px`})},[s("div",v,[$.value||e.leftText?(r(),a("div",{key:0,class:"sdkwork-navbar__left-btn",onClick:z},[$.value?(r(),a("span",p,[d(t.$slots,"left-arrow",{},()=>[l(u,{icon:"material-symbols:arrow-back-ios-new-rounded",width:"16",height:"16"})],!0)])):o("",!0),e.leftText?(r(),a("span",b,i(e.leftText),1)):o("",!0)])):o("",!0),d(t.$slots,"left",{},void 0,!0)]),s("div",_,[d(t.$slots,"title",{},()=>[s("span",g,i(e.title),1)],!0)]),s("div",x,[d(t.$slots,"right",{},void 0,!0),e.rightText?(r(),a("span",{key:0,class:"sdkwork-navbar__text sdkwork-navbar__right-btn",onClick:D},i(e.rightText),1)):o("",!0)])],4)],6)]))}}),[["__scopeId","data-v-59552c1b"]]);export{y as _};
