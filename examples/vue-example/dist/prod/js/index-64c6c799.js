import{c as e,$ as r,y as o,n as t,t as a,C as n,ag as l,w as s}from"./index-34815b62.js";import{k as i,j as d}from"./vue-vendor-905d75e5.js";const[m,u]=e("form");const c=s(i({name:m,props:{colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:t,labelAlign:String,inputAlign:String,scrollToError:Boolean,scrollToErrorPosition:String,validateFirst:Boolean,submitOnEnter:a,showErrorMessage:a,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}},emits:["submit","failed"],setup(e,{emit:t,slots:a}){const{children:s,linkChildren:i}=r(l),m=e=>e?s.filter(r=>e.includes(r.name)):s,c=r=>{return"string"==typeof r?(e=>{const r=s.find(r=>r.name===e);return r?new Promise((e,o)=>{r.validate().then(r=>{r?o(r):e()})}):Promise.reject()})(r):e.validateFirst?(o=r,new Promise((e,r)=>{const t=[];m(o).reduce((e,r)=>e.then(()=>{if(!t.length)return r.validate().then(e=>{e&&t.push(e)})}),Promise.resolve()).then(()=>{t.length?r(t):e()})})):(e=>new Promise((r,o)=>{const t=m(e);Promise.all(t.map(e=>e.validate())).then(e=>{(e=e.filter(Boolean)).length?o(e):r()})}))(r);var o},g=(e,r)=>{s.some(o=>o.name===e&&(o.$el.scrollIntoView(r),!0))},h=()=>s.reduce((e,r)=>(void 0!==r.name&&(e[r.name]=r.formValue.value),e),{}),v=()=>{const r=h();c().then(()=>t("submit",r)).catch(o=>{t("failed",{values:r,errors:o});const{scrollToError:a,scrollToErrorPosition:n}=e;a&&o[0].name&&g(o[0].name,n?{block:n}:void 0)})},f=e=>{n(e),v()};return i({props:e}),o({submit:v,validate:c,getValues:h,scrollToField:g,resetValidation:e=>{"string"==typeof e&&(e=[e]);m(e).forEach(e=>{e.resetValidation()})},getValidationStatus:()=>s.reduce((e,r)=>(e[r.name]=r.getValidationStatus(),e),{})}),()=>{var e;return d("form",{class:u(),onSubmit:f},[null==(e=a.default)?void 0:e.call(a)])}}}));export{c as F};
