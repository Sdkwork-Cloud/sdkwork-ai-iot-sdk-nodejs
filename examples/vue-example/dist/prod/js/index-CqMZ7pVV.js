import{S as e}from"./sdkwork-page-container-VUGI9Via.js";import{a,_ as l}from"./sdkwork-collapse-item-vel7qLBU.js";import{k as s,r as t,f as i,o,P as n,Q as u,S as d,j as r,W as c,$ as v,a0 as p,a4 as m,Z as k,O as f}from"./vue-vendor-CnVaDBlt.js";import{B as h,I as y,aS as g,L as b,s as w,_ as j}from"./index-DS3FT4GI.js";import{a as _,_ as x}from"./sdkwork-cell-group-VLV2jidw.js";import{E as A}from"./index-D-A-zf9T.js";import{T as V}from"./index-DurQyno_.js";/* empty css              *//* empty css              *//* empty css              */import{S as B}from"./sdkwork-voice-speaker-category-list-popup-J_X3DczI.js";import{F}from"./index-CxAp-bNZ.js";import"./index-BJXTf1ZV.js";import"./utils-vendor-WEzSe-CR.js";import"./sdkwork-icon-JBBTW6q4.js";import"./use-id-CkVbEcjv.js";import"./sdkwork-popup-BvExtb7p.js";import"./LoadMoreSection-DaQO85n7.js";import"./shared-BOBKNwVB.js";import"./sdkwork-search-bar-BRXsRgH8.js";import"./ListItem-CYbH_EmH.js";import"./LoadingSection-BrXZVoTP.js";import"./index-CpHSUcX0.js";import"./index-B7xsF8XP.js";const U={class:"sdkwork-text-to-speech"},C={class:"tts-container"},L={class:"input-section"},M={class:"section-header"},S={class:"text-counter"},E={class:"speaker-section"},z={class:"section-header"},Q={key:0,class:"selected-speaker"},D={class:"speaker-info"},G={class:"speaker-details"},T={class:"speaker-name"},I={class:"speaker-meta"},R={key:1,class:"no-speaker"},H={class:"settings-section"},J={class:"slider-value"},N={class:"slider-value"},P={class:"slider-value"},Z={class:"action-section"},q={key:0,class:"playback-section"},O={class:"section-header"},X={class:"audio-player"},$=["src"],W={class:"playback-info"},Y={class:"info-item"},K={class:"info-value"},ee={class:"info-item"},ae={class:"info-value"},le=j(s({__name:"sdkwork-text-to-speech",emits:["synthesis-complete","synthesis-error","speaker-selected","playback-started","playback-stopped"],setup(e,{emit:a}){const l=a,s=t(""),f=t(1e3),j=t(null),le=t(!1),se=t(1),te=t(80),ie=t(0),oe=t(!1),ne=t(!1),ue=t(""),de=t(0),re=t(0),ce=t(null),ve=i(()=>s.value.trim().length>0&&null!==j.value),pe=e=>{j.value=e,le.value=!1,w(`已选择发音人: ${e.name}`),l("speaker-selected",e)},me=async()=>{if(j.value)try{const e="欢迎使用语音合成服务，这是发音人试听效果。";await fe(e,!0)}catch(e){w("试听失败，请重试")}else w("请先选择发音人")},ke=async()=>{if(ve.value)try{await fe(s.value,!1)}catch(e){w("合成失败，请重试")}else w("请输入文本并选择发音人")},fe=async(e,a=!1)=>{oe.value=!0;try{const s=Date.now();await new Promise(e=>setTimeout(e,2e3));const t="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcBjiR1/LMeSw=",i=Math.floor(5e4*Math.random())+1e4;if(ue.value=t,de.value=i,re.value=Date.now()-s,a)w("试听播放中...");else{w("合成完成，开始播放");const a={audioUrl:t,audioSize:i,synthesisTime:re.value,text:e,speaker:j.value,settings:{speed:se.value,volume:te.value,pitch:ie.value}};l("synthesis-complete",a)}setTimeout(()=>{ce.value&&ce.value.play()},100)}catch(s){throw l("synthesis-error",s),s}finally{oe.value=!1}},he=()=>{ce.value&&(ce.value.pause(),ce.value.currentTime=0),ne.value=!1},ye=()=>{ne.value=!0},ge=()=>{ne.value=!1},be=()=>{ne.value=!1},we=()=>{if(ue.value)try{const e=document.createElement("a");e.href=ue.value,e.download=`语音合成_${Date.now()}.wav`,e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),w("音频文件下载成功")}catch(e){w("下载失败，请重试")}else w("没有可下载的音频文件")},je=e=>{if(0===e)return"0 B";const a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["B","KB","MB","GB"][a]};return o(()=>{he(),ue.value.startsWith("blob:")&&URL.revokeObjectURL(ue.value)}),(e,a)=>{const l=F,t=h,i=y,o=V,w=A,fe=g,_e=_,xe=x,Ae=b;return u(),n("div",U,[d("div",C,[d("div",L,[d("div",M,[a[8]||(a[8]=d("h3",{class:"section-title"},"文本输入",-1)),d("div",S,v(s.value.length)+"/"+v(f.value),1)]),r(l,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),type:"textarea",rows:"4",placeholder:"请输入要合成的文本内容...",maxlength:f.value,"show-word-limit":"",class:"text-input"},null,8,["modelValue","maxlength"])]),d("div",E,[d("div",z,[a[10]||(a[10]=d("h3",{class:"section-title"},"发音人选择",-1)),r(t,{type:"primary",size:"small",onClick:a[1]||(a[1]=e=>le.value=!0),class:"select-btn"},{default:p(()=>[...a[9]||(a[9]=[m(" 选择发音人 ",-1)])]),_:1})]),j.value?(u(),n("div",Q,[d("div",D,[r(i,{name:"music",class:"speaker-icon"}),d("div",G,[d("div",T,v(j.value.name),1),d("div",I,[j.value.gender?(u(),k(o,{key:0},{default:p(()=>[m(v("female"===j.value.gender?"女声":"男声"),1)]),_:1})):c("",!0),j.value.language?(u(),k(o,{key:1},{default:p(()=>[m(v(j.value.language),1)]),_:1})):c("",!0)])])]),r(t,{type:"default",size:"small",onClick:me,class:"preview-btn"},{default:p(()=>[...a[11]||(a[11]=[m(" 试听 ",-1)])]),_:1})])):(u(),n("div",R,[r(w,{description:"请选择发音人",image:"search"},{default:p(()=>[r(t,{type:"primary",size:"small",onClick:a[2]||(a[2]=e=>le.value=!0)},{default:p(()=>[...a[12]||(a[12]=[m(" 选择发音人 ",-1)])]),_:1})]),_:1})]))]),d("div",H,[a[13]||(a[13]=d("div",{class:"section-header"},[d("h3",{class:"section-title"},"合成设置")],-1)),r(xe,null,{default:p(()=>[r(_e,{title:"语速",center:""},{value:p(()=>[r(fe,{modelValue:se.value,"onUpdate:modelValue":a[3]||(a[3]=e=>se.value=e),min:.5,max:2,step:.1,class:"speed-slider"},{button:p(()=>[d("div",J,v(se.value.toFixed(1))+"x",1)]),_:1},8,["modelValue"])]),_:1}),r(_e,{title:"音量",center:""},{value:p(()=>[r(fe,{modelValue:te.value,"onUpdate:modelValue":a[4]||(a[4]=e=>te.value=e),min:0,max:100,step:1,class:"volume-slider"},{button:p(()=>[d("div",N,v(te.value)+"%",1)]),_:1},8,["modelValue"])]),_:1}),r(_e,{title:"音调",center:""},{value:p(()=>[r(fe,{modelValue:ie.value,"onUpdate:modelValue":a[5]||(a[5]=e=>ie.value=e),min:-12,max:12,step:1,class:"pitch-slider"},{button:p(()=>[d("div",P,v(ie.value>0?"+":"")+v(ie.value),1)]),_:1},8,["modelValue"])]),_:1})]),_:1})]),d("div",Z,[r(t,{type:"primary",size:"large",block:"",onClick:ke,disabled:!ve.value,loading:oe.value,class:"synthesize-btn"},{loading:p(()=>[r(Ae,{type:"spinner",size:"20px"}),a[14]||(a[14]=m(" 合成中... ",-1))]),default:p(()=>[r(i,{name:"play",class:"btn-icon"}),a[15]||(a[15]=m(" 开始合成 ",-1))]),_:1},8,["disabled","loading"]),r(t,{type:"default",size:"large",block:"",onClick:he,disabled:!ne.value,class:"stop-btn"},{default:p(()=>[r(i,{name:"pause",class:"btn-icon"}),a[16]||(a[16]=m(" 停止播放 ",-1))]),_:1},8,["disabled"])]),ue.value?(u(),n("div",q,[d("div",O,[a[18]||(a[18]=d("h3",{class:"section-title"},"播放控制",-1)),r(t,{type:"success",size:"small",onClick:we,class:"download-btn"},{default:p(()=>[r(i,{name:"down",class:"btn-icon"}),a[17]||(a[17]=m(" 下载 ",-1))]),_:1})]),d("div",X,[d("audio",{ref_key:"audioElement",ref:ce,src:ue.value,controls:"",class:"audio-element",onPlay:ye,onPause:ge,onEnded:be},null,40,$),d("div",W,[d("div",Y,[a[19]||(a[19]=d("span",{class:"info-label"},"文件大小:",-1)),d("span",K,v(je(de.value)),1)]),d("div",ee,[a[20]||(a[20]=d("span",{class:"info-label"},"合成时间:",-1)),d("span",ae,v(re.value)+"ms",1)])])])])):c("",!0)]),r(B,{modelValue:le.value,"onUpdate:modelValue":a[6]||(a[6]=e=>le.value=e),title:"选择发音人",height:"70vh","selected-speaker-id":j.value?.id,onConfirm:pe,onClose:a[7]||(a[7]=e=>le.value=!1)},null,8,["modelValue","selected-speaker-id"])])}}}),[["__scopeId","data-v-6b294dec"]]),se={class:"page-content"},te={class:"usage-guide"},ie=j(s({__name:"index",setup(s){f();const i=t(["guide"]),o=e=>{w("语音合成完成")},n=e=>{w("合成失败，请重试")};return(s,t)=>{const c=l,v=a,f=e;return u(),k(f,{"safe-area":"",scrollable:"","theme-mode":"auto"},{default:p(()=>[d("div",se,[r(le,{onSynthesisComplete:o,onSynthesisError:n,class:"tts-component"})]),d("div",te,[r(v,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e)},{default:p(()=>[r(c,{title:"使用说明",name:"guide"},{default:p(()=>[...t[1]||(t[1]=[d("div",{class:"guide-content"},[d("h4",null,"语音合成功能说明"),d("ul",null,[d("li",null,[d("strong",null,"文本输入："),m("输入要合成的文本内容，支持中英文")]),d("li",null,[d("strong",null,"发音人选择："),m('点击"选择发音人"按钮，从发音人列表中选择合适的发音人')]),d("li",null,[d("strong",null,"合成设置："),m("可以调整语速、音量、音调等参数")]),d("li",null,[d("strong",null,"试听功能："),m('选择发音人后可以点击"试听"按钮预览发音效果')]),d("li",null,[d("strong",null,"开始合成："),m('点击"开始合成"按钮生成语音文件')]),d("li",null,[d("strong",null,"播放控制："),m("合成完成后可以播放、暂停、停止音频")])]),d("h4",null,"支持的功能"),d("ul",null,[d("li",null,"多种发音人选择（男声、女声、不同语言）"),d("li",null,"实时参数调整"),d("li",null,"音频文件下载"),d("li",null,"响应式设计，支持移动端")])],-1)])]),_:1})]),_:1},8,["modelValue"])])]),_:1})}}}),[["__scopeId","data-v-041a354f"]]);export{ie as default};
